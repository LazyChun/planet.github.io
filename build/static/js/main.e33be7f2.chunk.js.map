{"version":3,"sources":["components/common/queryGql.js","components/utils/routeUtils.js","components/common/CONSULT.js","components/common/BasicForm.js","components/common/validate.js","components/common/hooks.js","components/utils/urlData.js","components/pages/QueryItem.js","components/pages/header/SearchInput.js","components/pages/header/LoginAvatar.js","components/pages/header/OpenedObj.js","components/pages/header/Header.js","components/pages/PageQuery.js","components/pages/transformable/common/CONSULT.js","components/pages/transformable/common/SwipeItems.js","components/pages/transformable/grids/home/RecommendItem.js","components/pages/transformable/grids/home/HomeSwipeGridRecommends.js","components/pages/transformable/grids/HomeSwipeGrid.js","components/utils/textUtils.js","components/pages/transformable/item/BlogListItem.js","components/pages/transformable/grids/BlogListGrid.js","components/pages/transformable/common/SemicircleLabel.js","components/pages/transformable/common/FlatList.js","components/pages/transformable/item/BookItem.js","components/pages/transformable/grids/BookFlatListGrid.js","components/pages/transformable/common/Tags.js","components/pages/transformable/item/BookListItem.js","components/pages/transformable/grids/BookListGrid.js","components/pages/transformable/item/AdItem.js","components/pages/transformable/grids/AdsGrid.js","components/pages/transformable/item/ProgramItem.js","components/pages/transformable/grids/ProgramFlatListGrid.js","components/pages/transformable/item/ProgramRecommendItem.js","components/pages/transformable/grids/program/ProgramTopGridVRecommends.js","components/pages/transformable/grids/program/ProgramTopGridHRecommends.js","components/pages/transformable/grids/ProgramTopGrid.js","components/pages/transformable/item/ProgramListItem.js","components/pages/transformable/grids/ProgramListGrid.js","components/pages/transformable/item/BookRecommendItem.js","components/pages/transformable/grids/book/BookTopGridRecommends.js","components/pages/transformable/grids/BookTopGrid.js","components/pages/transformable/item/BookHListItem.js","components/pages/transformable/grids/BookHListGrid.js","components/pages/transformable/item/BlogRecommendListItem.js","components/pages/transformable/grids/BlogRecommendListGrid.js","components/pages/transformable/item/AllPageAdBannerItem.js","components/pages/transformable/grids/AllPageAdBanner.js","components/pages/transformable/grids/blog/VideoRecommend.js","components/pages/transformable/grids/blog/BlogTopGridVideoBlogRecommends.js","components/pages/transformable/grids/blog/ArticleRecommend.js","components/pages/transformable/grids/blog/BlogTopGridArticleBlogRecommends.js","components/pages/transformable/grids/BlogTopGrid.js","components/pages/transformable/grids/BlogVListGrid.js","components/pages/transformable/grids/AnnouncementBannerGrid.js","components/pages/transformable/common/PageRow.js","components/pages/transformable/common/grid.js","components/pages/transformable/common/PageRows.js","components/pages/transformable/TransformablePage.js","components/pages/home/HomePage.js","components/pages/blog/BlogPage.js","components/pages/program/ProgramPage.js","components/pages/book/BookPage.js","components/pages/Routes.js","components/pages/problem/components/AddButton.js","components/pages/problem/components/FilterButtons.js","components/pages/problem/components/SearchFilterFields.js","components/pages/search/segaments/SearchEmpty.js","components/pages/problem/ProblemPage.js","components/pages/search/segaments/Tabs.js","components/pages/search/segaments/SearchContent.js","components/pages/search/segaments/RecommendTags.js","components/pages/search/segaments/SeachHistory.js","components/pages/search/segaments/Tag.js","components/pages/search/segaments/Tags.js","components/pages/search/segaments/items/BlogItem.js","components/pages/search/segaments/BlogPanel.js","components/pages/search/segaments/items/ProgramItem.js","components/pages/search/segaments/ProgramPanel.js","components/pages/search/segaments/items/BookItem.js","components/pages/search/segaments/BookPanel.js","components/pages/search/segaments/SearchResultPanel.js","components/pages/search/SearchPage.js","components/common/BackToTop.js","components/common/Footer.js","components/pages/AppPage.js","hooks/appHooks.js","App.js","components/utils/elementLink.js","components/common/formFields/CaptchaInput.js","components/common/FlatList.js","components/common/props.js","components/common/LoadingWapper.js","components/utils/optionsUtils.js","components/utils/PersistStorage.js","components/common/QueryList.js","components/common/PaginationQueryList.js","components/common/Empty.js","components/common/ReportHint.js","components/common/OPTIONS.js","components/common/LinkToObject.js","components/common/item/ProblemItem.js","components/common/RichTextEditor.js","components/common/ToastHint.js","components/pages/problem/ProblemForm.js","components/common/ReportModal.js","components/common/Loading.js","components/common/ErrorModal.js","components/common/ModalHint.js","components/common/PageTitle.js","components/utils/pathUtils.js","components/common/mutationGql.js","components/pages/transformable/common/Avatar.js","components/common/Space.js","components/pages/login/LoginModal.js","components/pages/login/RegisterModal.js","components/common/LoginHint.js","components/pages/problem/ProblemEditPage.js","components/utils/utils.js","serviceWorker.js","index.js","config.js"],"names":["GET_PROBLEMS","gql","PROBLEM_LIST_PROPS","GET_PROBLEM","PROBLEM_PROPS","GET_PROGRAM","PROGRAM_PROPS","GET_PROGRAM_WITH_VERSION","PROGRAM_VERSION_PROPS","GET_PROGRAMS","PROGRAM_LIST_PROPS","GET_BLOG","BLOG_PROPS","GET_BOOK","BOOK_PROPS","GET_CHAPTER","CHAPTER_PROPS","SEARCH_ITEMS","BOOK_LIST_PROPS","BLOG_LIST_PROPS","GET_SEARCH_TAGS","TAG_LIST_PROPS","GET_COMMENTS","COMMENT_ITEM_PROPS","GET_FOLLOWERS","FOLLOWER_LIST_PROPS","GET_UPS","UP_LIST_PROPS","get_codes","ITEM_PROPS","CODE_PROPS","GET_REPORT_ITEMS_GROUPS","GET_GIT_TYPES","GET_ME","USER_PROPS","GET_PROGRAM_VERSIONS","PROGRAM_VERSION_LIST_PROPS","GET_PROGRAM_DATA_LIST","PROGRAM_DATA_PROPS","getRouteId","path","currentPath","lastPart","_last","_split","id","parseInt","e","console","error","getRouteLastValue","decodeURI","getSearchKeyword","indexOf","PROBLEM_CREATE","PROBLEM_EDIT","PROBLEM_PAGE","PROGRAM","PERSONAL_PROGRAM_CREATE","PERSONAL_PROGRAM_EDIT","BLOG","CHAPTER","BOOK","SEARCH","PERSONAL","ABOUT","OBJ_TYPES","COMMENT","PROBLEM","CHAPTER_PAGE_SETTINGS","UPDATED","BOOKS_READ","SEARCHED_PROBLEMS","MY_PROGRAMS_REFRESH","REFETCH_TAG","PERSONAL_PAGES","USER_SETTINGS","PROGRAM_EDIT","PROGRAM_CREATE","UP","FOLLOWER","IMPORT_TYPE","OnlyJs","OnlyHtml","HtmlAndJS","Folder","PROBLEM_TYPE","label","value","bgColor","CAPTCHA_TYPE","SMS","EMAIL","ACTION_TYPE","Login","Register","ResetPassword","BindPhoneNumber","BindEmail","Container","styled","div","FormItem","item","form","onUpdateField","onValidate","setErrors","placeholder","renderControl","fieldKey","required","type","_get","log","control","useReducer","state","action","key","dispatch","onChange","onSetError","errorMsg","formItemState","onUpdateState","inputType","_toLower","Input","defaultValue","name","getControlByType","fieldErrorProps","pointing","content","Form","Field","useForm","formData","items","useState","refreshForm","setRefreshForm","formStore","setFormStore","errors","submit","validateKeys","_each","rules","_isEmpty","_reverse","rule","strValue","toString","length","message","isEmail","isPhone","_keys","validateForm","_filter","BasicForm","loading","width","height","children","style","_map","onSubmit","onAddErrors","useCopyUrlsToFields","itemData","fieldKeys","setItem","useEffect","fieldKeyUrl","slice","useComment","refetch","commentType","objId","parentId","repliedCommentId","clearForm","saveCallback","show","setShow","useMutation","SAVE_COMMENT_FOR_DETAILS","SAVE_COMMENT","onCompleted","data","onError","ModalHint","saveComment","mLoading","onSaveComment","variables","useReplyForm","creator","repliedComment","showReplyForm","setShowReplyForm","replyPlaceholder","_getByRank","useRefresh","refresh","setRefresh","Math","random","useSwitchFollow","currentFollowed","objType","onSwitchCompleted","followCount","fCount","successMsg","followed","unFollowed","setFollowed","setFollowCount","SWITCH_FOLLOW","PersistStorage","ToastHint","showSuccess","switchFollower","switchFollow","onSwitchFollow","LoginHint","checkLogin","useSwitchUp","currentUpped","upCount","uCount","upped","unUpped","setUpped","setUpCount","SWITCH_UP","switchUp","onSwitchUp","useRating","currentRating","onRateCompleted","isCurrentRating","score","rating","setRating","SAVE_RATING","saveRating","rate","onRate","useMe","useQuery","me","useTabs","initTab","currentTab","setCurrentTab","tab","count","countState","dispatchCount","onSwitchTab","onUpdateTabCount","useUpdateProgramStatus","programId","onUpdateStatusCompleted","status","setStatus","setSuccessMsg","setErrorMsg","UPDATE_PROGRAM_STATUS","updateProgramStatus","onUpdateProgramStatus","useFileInput","isTmp","setLoading","imageUrl","setImageUrl","handleChange","info","file","img","callback","reader","FileReader","addEventListener","result","readAsDataURL","getBase64","originFileObj","ossImageUrl","actionUrl","SERVER_URL","useSendCaptcha","captchaType","actionType","onSendCaptcha","cType","aType","onSuccess","onFail","onFinal","postData","phone","email","axios","post","then","response","catch","finally","showFailure","callCaptcha","res","useBindPhone","onBindPhone","captchaCode","accessToken","getItemRO","headers","Authorization","bindPhone","useBindEmail","onBindEmail","bindEmail","useResetPassword","onResetPassword","newPassword","resetPassword","useRead","READ_OBJ","readObj","lastReadDate","getItem","currentDate","Date","getTime","useIframeLoading","eleId","document","getElementById","onload","useResizeIframe","setWidth","setHeight","messageHandler","event","programHeight","programWidth","currentWidth","clientWidth","window","removeEventListener","getDataFromUrl","url","dataPath","onUpdateValue","finalAction","get","dataText","JSON","parse","PageItem","itemPath","autoLoading","networkStatus","SearchInput","isLoading","onSearch","handleKeypress","keyCode","target","searchInput","displayHistorySearchItems","_chunk","i","title","Search","input","icon","iconPosition","onResultSelect","className","results","AvatarContainer","LoginAvatar","onGoTo","showMenu","setShowMenu","AppContext","Consumer","props","currentUser","logout","setAuthentication","onMouseLeave","onBlur","Dropdown","open","onMouseEnter","Avatar","avatar","size","cursor","Menu","marginTop","Item","text","onClick","showRegister","Divider","Image","OpenedObj","openedObj","imgUrl","src","LeftBox","RightBox","HEAD_TABS","HeadTab","selected","HeadTabsContainer","HeadTabs","selectedTab","index","LogoContainer","LogoImage","LogoField","logo","to","lineHeight","onSaveSearchHistory","keyword","historySearchItems","newHistorySearchItems","unshift","filter","Header","currentPage","onSwitchPage","searchKeyword","GET_PAGE_SETTINGS","PAGE_SETTINGS_PROPS","PageQuery","_spit","location","pathname","pageForm","aboutCodes","GRIDS","homeSwipe","image","announcement","blogList","xs","adList","bookFlatList","bookList","programFlatList","programTop","programList","bookTop","bookHList","allPageBannerAd","blogTop","blogRecommendList","blogVList","SwipeImage","SwipeItemBox","RecommendContainer","RecommendText","Recommend","SwipeItem","linkUrl","recommendText","recommendLabel","SwipeItems","swipeItemKey","dots","infinite","speed","slidesToShow","slidesToScroll","LabelBox","color","getBgColor","RecommendLabel","ItemBox","RecommendContent","RecommendItem","recommend","linkUrlItem","recommendLengthLargerThan10","RankHead","RankHeadText","HomeSwipeGridRecommends","recommends","HomeSwipeGrid","grid","chunkTo","len","substr","ImageBox","CoverImage","Cover","FooterBox","FooterItem","Text","Footer","Icon","ContentBox","VideoIcon","ArticleIcon","Title","Description","ContentHeader","BlogListItem","cover","description","BlogListGrid","randKey","SemicircleLabel","RowBox","Position","isFlexItem","FlatList","gap","gapX","gapY","renderItem","itemWidth","columnsInRow","itemsArr","_mapValues","push","itemsLength","coverPositionSize","newItems","isPosition","rows","gX","gY","useFlatList","row","isLastRow","itemIndex","isLastItem","Space","isLastOne","Name","Author","BookItem","BookFlatListGrid","labelColor","COLOR_LIST","TagBox","TagText","Tag","tag","randomIndex","getRandomColor","borderRadius","margin","Tags","tags","selectedTag","TextCount","BookListItem","intro","GridTitle","BookListGrid","AdImage","AdItem","PanelBox","PanelTitle","AdsGridChildrenPanel","Content","AdsGrid","tagsKey","tagTitle","CoverHint","BottomBox","ProgramItem","averageScore","Rating","disabled","maxRating","ProgramFlatListGrid","NameBox","ProgramRecommendItem","ProgramTopGridVRecommends","ProgramTopGridHRecommends","SwipeBox","ProgramTopGrid","RateBox","RateNum","ProgramListItem","scoreCount","hasScoreCount","ProgramListGrid","BookRecommendItem","BookTopGridRecommends","BookTopGrid","BookHListItem","BookHListGrid","BlogRecommendListItem","BlogRecommendListGrid","AllPageAdBannerItem","AllPageAdBanner","_head","VideoRecommend","BlogTopGridVideoBlogRecommends","itemsKey","ArticleRecommend","BlogTopGridArticleBlogRecommends","LeftRecommendsBox","RightRecommendsBox","BlogTopGrid","BlogVListGrid","AnnouncementBannerGrid","RowHeader","TitleWrapper","HeaderBottomLine","bColor","RowBody","contentMinHeight","GridWrapper","flex","PageRow","hasNoHeader","grids","hasHeaderLine","headerColor","columns","Empty","gridWidth","getGridById","PageRows","page","TransformablePage","HomePage","PageTitle","BlogPage","ProgramPage","BookPage","Routes","routes","route","routeIndex","component","exact","AddButton","Popup","trigger","circular","FILTER_ITEMS","FilterButton","onSwitchTag","Button","basic","marginLeft","marginRight","FilterButtons","SearchFilterFields","HintText","SearchEmpty","Problems","LinkToObject","ProblemItem","problem","initSearchFields","statuses","ProblemPage","searchFields","creatorId","useProblemPage","PaginationQueryList","hidePaginationInSinglePage","dataKey","limit","TabsBox","Tabs","commonProps","TabBox","TabText","Tab","More","HeaderBox","totalPages","onSearchMore","PaginationBox","SearchContent","itemsCount","onUpdatePagination","pagination","emptyText","offset","Pagination","activePage","onPageChange","TagsWrapper","RecommendTags","selectedTagIds","onSelectTag","_find","tagId","onSelect","TagItemBox","TagItem","HistoryPanel","SearchItemBox","ItemText","CloseIcon","SearchItem","onRefresh","searchItem","onRemoveSearchItem","SearchHistory","IconWrapper","CloseButton","onClose","TagsBox","BlogItem","BlogPanel","blogs","isAll","blog","ProgramsBox","ProgramPanel","programs","rowGap","program","BooksBox","BookPanel","books","book","MainBox","checkTab","panelTab","SearchResultPanel","searchTags","searchResult","tagIds","isEmpty","isAllEmpty","SearchBox","_SearchPageResult","searchType","tabMax","All","Program","Blog","Book","getPagination","SearchPageResult","setTags","_findIndex","t","useSearchResult","refetchBook","SearchPage","useSearchPage","BackToTop","BeiAnLink","a","BeiAn","href","ProblemEditPage","lazy","ProblemCreatePage","Chapter","PersonalPage","Problem","AboutPage","body","clientHeight","PageBox","PAGES","mergeQueryItems","pData","pageData","_clone","handleItem","pages","pagesConfig","_pick","_keysIn","objKey","gValue","_isArray","v","Object","iteratePageItems","rowIndex","gridIndex","queryItem","newItem","_merge","objPath","_set","_AppPage","history","dataUrl","setPageData","getPageByPath","getPathByPage","useAppPage","head","fallback","Loading","render","ReportHint","withRouter","setOpenedObj","setGlobalBgColor","Provider","getAuthentication","userInfo","expiredTime","authUser","expires_in","username","initialize","refreshToken","appConfig","authString","refresh_token","grant_type","beforeData","roles","alert","initParams","uri","credentials","access_token","networkError","statusCode","client","ApolloClient","removeItem","refreshCurrentPage","useApp","apolloClient","setApolloClient","setCurrentUser","React","createContext","App","sayOK","msg","clickEle","ele","getEleById","click","CaptchaBox","isError","Seconds","renderer","hours","minutes","seconds","completed","CaptchaButton","showCountDown","onComplete","date","now","block","CaptchaInput","showCountdown","success","maxLength","actionPosition","Row","cGap","rowLength","rowClass","columnGap","rGap","CURRENT_REPORT_PROPS","REPORT_PROPS","OPERATE_RESULT","COMMENT_COMMON_PROPS","PROGRAM_VERSION_PROPS_DETAIL","LoadingWrapper","onUpdateCount","getOptionByKey","options","Array","o","store","this","set","remove","_QueryList","countPath","showLoading","renderWhenLoading","onUpdateCurrentPage","queryOptions","paginationPages","QueryList","initCurrentPage","setCurrentPage","useQueryList","renderPagination","paginationSize","paginationSecondary","secondary","EmptyBox","hintComponent","reportType","currentReport","rConfig","onShow","setOnShow","onShowFnc","setVariables","config","setConfig","setCurrentReport","setOpen","onHide","reportCallback","PROGRAM_STATUS","PROBLEM_STATUS","PROGRAM_VERSION_STATUS","updateText","stopPropagation","getLinkUrl","Status","typeOption","fontSize","ContentText","simpleDescription","RichTextEditor","language","setDefaultValue","refreshKey","onUpdateDefaultValue","BraftEditor","createEditorState","useEditor","editorState","toHTML","readOnly","scale","ToastText","setType","setScale","setMsg","timerScale","setTimeout","clearTimeout","timer","PROBLEM_OPTIONS","ProblemForm","isEdit","SAVE_PROBLEM","saveProblem","metaKeywords","onValue","GroupItemBox","GroupTitle","GroupContent","GroupItem","group","ids","onUpdateItem","reportItems","checked","InputReasonBox","InputText","TextArea","InputReason","reason","onUpdateReason","hasReasonAndDisabled","ReportPanel","groups","reportReason","g","_ReportModal","report","setReport","setReportReason","setIds","SAVE_REPORT","onSaveReport","isAdd","useReport","top","centered","closeIcon","Actions","primary","itemIds","ReportModal","types","sort","order","MaskBox","hasMask","loader","active","ErrorModal","errorTitle","Modal","onOk","setMessage","mConfig","_noop","Confirm","header","cancelButton","confirmButton","onConfirm","onCancel","isLogout","assign","isHomePath","getPersonPage","_values","SWITCH_UP_COMMENT","SAVE_CURRENT_USER","SAVE_PROGRAM","GET_PROGRAM_VERSION","SAVE_PROGRAM_VERSION","UPDATE_PROGRAM_VERSION_STATUS","UNBIND_PHONE","UNBIND_EMAIL","SAVE_PROGRAM_DATA","AvatarBox","AvatarImg","avatarUrl","login","password","RegisterButton","CaptchaLoginButton","LoginModal","captchaLogin","setCaptchaLogin","sendCaptcha","isNameEmail","loginCaptcha","_join","visible","labelPosition","positive","REGISTER_USER","RegisterModal","registerUser","autoComplete","confirmPassword","variablesProps","verificationCode","splits","arrPaths","_slice","Boolean","hostname","match","ReactDOM","navigator","serviceWorker","ready","registration","unregister","module","exports","process"],"mappings":"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","file":"static/js/main.e33be7f2.chunk.js","sourcesContent":["import { gql } from \"apollo-boost\";\r\n\r\nimport {\r\n  BLOG_LIST_PROPS,\r\n  BLOG_PROPS,\r\n  BOOK_LIST_PROPS,\r\n  BOOK_PROPS,\r\n  CHAPTER_PROPS,\r\n  CODE_PROPS,\r\n  COMMENT_ITEM_PROPS,\r\n  COMMENT_PROPS,\r\n  FOLLOWER_LIST_PROPS,\r\n  PROBLEM_LIST_PROPS,\r\n  PROBLEM_PROPS,\r\n  PROGRAM_DATA_PROPS,\r\n  PROGRAM_LIST_PROPS,\r\n  PROGRAM_PROPS,\r\n  PROGRAM_VERSION_LIST_PROPS,\r\n  PROGRAM_VERSION_PROPS,\r\n  TAG_LIST_PROPS,\r\n  TAG_PROPS,\r\n  UP_LIST_PROPS,\r\n  USER_PROPS\r\n} from \"./props\";\r\n\r\nexport const GET_PROBLEMS = gql`\r\n    query( $objTypes: [ProblemObjType]\r\n        $statuses: [ProblemStatus]\r\n        $type:ProblemType\r\n        $creatorId:ID\r\n        $dateCreated: [Date]\r\n        $lastUpdated: [Date]\r\n        $limit: Int\r\n        $offset: Int\r\n        $sort:String\r\n        $order:String\r\n    ) {\r\n        problems( paginateParams: {\r\n            max: $limit\r\n            offset: $offset\r\n            sort: $sort\r\n            order: $order\r\n        }\r\n            objTypes: $objTypes\r\n            type: $type\r\n            creatorId:$creatorId\r\n            statuses: $statuses\r\n            dateCreated: $dateCreated\r\n            lastUpdated: $lastUpdated) {\r\n            count\r\n            items{\r\n                ${PROBLEM_LIST_PROPS}\r\n            }\r\n\r\n        }\r\n    }\r\n`;\r\n\r\nexport const GET_PROBLEM = gql`\r\n    query ($id:ID!){\r\n        problem(id:$id){\r\n            ${PROBLEM_PROPS}\r\n        }\r\n    }\r\n`;\r\n\r\nexport const GET_PROGRAM = gql`\r\nquery ($id:ID!){\r\n    program(id:$id){\r\n        ${PROGRAM_PROPS}\r\n    }\r\n}`;\r\n\r\nexport const GET_PROGRAM_WITH_VERSION = gql`\r\n    query ($id:ID!,$version:ID!){\r\n        program(id:$id){\r\n            ${PROGRAM_PROPS}\r\n        }\r\n        programVersion(id:$version){\r\n            ${PROGRAM_VERSION_PROPS}\r\n        }\r\n    }\r\n`;\r\n\r\nexport const GET_PROGRAMS = gql`\r\n    query( $name: String\r\n        $code:String\r\n        $creatorId:ID \r\n        $statuses: [ProgramStatus]\r\n        $dateCreated: [Date]\r\n        $lastUpdated: [Date]\r\n        $limit: Int\r\n        $offset: Int\r\n        $sort:String\r\n        $order:String\r\n    ) {\r\n        programs( paginateParams: {\r\n            max: $limit\r\n            offset: $offset\r\n            sort: $sort\r\n            order: $order\r\n             }\r\n            name: $name\r\n            code:$code\r\n            creatorId:$creatorId\r\n            searchType:Program\r\n            statuses: $statuses\r\n            dateCreated: $dateCreated\r\n            lastUpdated: $lastUpdated) {\r\n            count\r\n            items{\r\n                ${PROGRAM_LIST_PROPS}\r\n            }\r\n\r\n        }\r\n    }\r\n`;\r\n\r\nexport const GET_BLOG = gql`\r\n    query ($id:ID!){\r\n        blog(id:$id){\r\n            ${BLOG_PROPS}\r\n        }\r\n    }\r\n`;\r\n\r\nexport const GET_BOOK = gql`\r\n    query ($id:ID!){\r\n        book(id:$id){\r\n            ${BOOK_PROPS}\r\n        }\r\n    }\r\n`;\r\n\r\nexport const GET_CHAPTER = gql`\r\n   query ($id:ID!){\r\n       chapter(id:$id){\r\n           ${CHAPTER_PROPS}\r\n       }\r\n   }\r\n`;\r\n\r\nexport const SEARCH_ITEMS = gql`\r\n  query searchItems(\r\n    $searchKeyword: String\r\n    $searchType: SearchType\r\n    $tagIds: [ID!]!\r\n    $limit: Int\r\n    $offset: Int\r\n    $sort:String\r\n    $order:String\r\n  ) {  \r\n    books( paginateParams: {\r\n             max: $limit\r\n             offset: $offset\r\n             sort: $sort\r\n             order: $order\r\n           }, \r\n             name: $searchKeyword, searchType: $searchType,tagIds: $tagIds,statuses:[Published]){\r\n        count\r\n        items{\r\n            ${BOOK_LIST_PROPS}\r\n        }\r\n    }\r\n    blogs(\r\n        paginateParams: {\r\n            max: $limit\r\n            offset: $offset\r\n            sort: $sort\r\n            order: $order\r\n        },\r\n        title: $searchKeyword,\r\n        tagIds: $tagIds\r\n        searchType: $searchType,\r\n        inCollection:false,\r\n      statuses:[Published]\r\n        )\r\n       {\r\n        count\r\n        items{ \r\n            ${BLOG_LIST_PROPS}\r\n        }\r\n    }\r\n    problems(\r\n        paginateParams: {\r\n            max: $limit\r\n            offset: $offset\r\n            sort: $sort\r\n            order: $order\r\n        },\r\n        title: $searchKeyword, searchType: $searchType,tagIds: $tagIds,statuses:[Published]){\r\n        count\r\n        items{\r\n            ${PROBLEM_LIST_PROPS}\r\n        }\r\n    }\r\n   programs(\r\n       paginateParams: {\r\n           max: $limit\r\n           offset: $offset\r\n           sort: $sort\r\n           order: $order\r\n       },\r\n       name: $searchKeyword, searchType: $searchType,tagIds: $tagIds,statuses:[Published]){\r\n          count\r\n          items{ \r\n              ${PROGRAM_LIST_PROPS}\r\n          }\r\n   }\r\n  }\r\n`;\r\n\r\nexport const GET_SEARCH_TAGS = gql`\r\n  query($searchKeyword: String){\r\n      tags(paginateParams:{max:30,offset:0},name: $searchKeyword){\r\n          count\r\n          items{\r\n              ${TAG_LIST_PROPS}\r\n          }\r\n      }\r\n  }\r\n`;\r\n\r\nexport const GET_COMMENTS = gql`\r\n  query ( \r\n      $objId:String\r\n      $types:[CommentType]\r\n      $parentId:ID\r\n      $searchParentComment:Boolean\r\n      $isUserQuery:Boolean\r\n      $isUserRelated:Boolean\r\n      $creatorId:ID\r\n      $limit: Int\r\n      $offset: Int\r\n      $sort:String\r\n      $order:String){\r\n      comments(\r\n        paginateParams: {\r\n          max: $limit\r\n          offset: $offset\r\n          sort: $sort\r\n          order: $order\r\n          } \r\n          objId:$objId\r\n          types:$types\r\n          searchParentComment:$searchParentComment\r\n          isUserQuery:$isUserQuery\r\n          isUserRelated:$isUserRelated\r\n          creatorId:$creatorId\r\n          parentId:$parentId\r\n      ){\r\n          count\r\n          items{\r\n              ${COMMENT_ITEM_PROPS}\r\n          }\r\n      }\r\n  }\r\n`;\r\n\r\nexport const GET_FOLLOWERS = gql`\r\n   query ( \r\n       $userId:ID\r\n       $objId:ID\r\n       $types:[ObjType]\r\n       $limit: Int\r\n       $offset: Int\r\n       $sort:String\r\n       $order:String\r\n   ){\r\n       followers(\r\n           paginateParams: {\r\n               max: $limit\r\n               offset: $offset\r\n               sort: $sort\r\n               order: $order\r\n           }\r\n           userId:$userId\r\n           objId:$objId\r\n           types:$types\r\n       ){\r\n           count\r\n           items{\r\n               ${FOLLOWER_LIST_PROPS}\r\n           }\r\n       }\r\n   }\r\n`;\r\n\r\nexport const GET_UPS = gql`\r\n    query (\r\n        $userId:ID\r\n        $objId:ID\r\n        $types:[ObjType]\r\n        $limit: Int\r\n        $offset: Int\r\n        $sort:String\r\n        $order:String\r\n    ){\r\n        ups(\r\n            paginateParams: {\r\n                max: $limit\r\n                offset: $offset\r\n                sort: $sort\r\n                order: $order\r\n            }\r\n            userId:$userId\r\n            objId:$objId\r\n            types:$types\r\n        ){\r\n            count\r\n            items{\r\n                ${UP_LIST_PROPS}\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nexport const get_codes = ITEM_PROPS => gql`\r\n  query(\r\n    $name: String\r\n    $value: String\r\n    $rank:[Int]\r\n    $description:String\r\n    $types: [CodeType]\r\n    $dateCreated: [Date]\r\n    $lastUpdated: [Date]\r\n    $limit: Int\r\n    $offset: Int\r\n    $sort:String\r\n    $order:String\r\n  ) {\r\n    codes(\r\n      paginateParams: {\r\n        max: $limit\r\n        offset: $offset\r\n        sort: $sort\r\n        order: $order\r\n      }\r\n      name: $name\r\n      value:$value\r\n      rank:$rank\r\n      types:$types\r\n      available:true\r\n      description:$description\r\n      dateCreated: $dateCreated\r\n      lastUpdated: $lastUpdated\r\n    ) {\r\n      items {\r\n        ${ITEM_PROPS ? ITEM_PROPS : CODE_PROPS}\r\n      }\r\n      count\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_REPORT_ITEMS_GROUPS = get_codes(`\r\n     id\r\n     name\r\n     value\r\n     reportItems{\r\n        id\r\n        name\r\n     }\r\n`);\r\n\r\nexport const GET_GIT_TYPES = get_codes(`\r\n     id\r\n     name\r\n     value\r\n`);\r\n\r\nexport const GET_ME = gql`\r\n query {\r\n     me{\r\n         ${USER_PROPS}\r\n     }\r\n }\r\n`;\r\n\r\nexport const GET_PROGRAM_VERSIONS = gql`\r\n    query(\r\n        $statuses:[ProgramVersionStatus]\r\n        $importTypes:[ImportType]\r\n        $submitterId:ID\r\n        $programId:ID\r\n        $name:String\r\n        $description:String\r\n        $publishedDate: [Date]\r\n        $dateCreated: [Date]\r\n        $lastUpdated: [Date]\r\n        $limit: Int\r\n        $offset: Int\r\n        $sort:String\r\n        $order:String\r\n    ) {\r\n        programVersions(\r\n            paginateParams: {\r\n                max: $limit\r\n                offset: $offset\r\n                sort: $sort\r\n                order: $order\r\n            }\r\n            importTypes:$importTypes\r\n            submitterId:$submitterId\r\n            programId:$programId\r\n            name: $name\r\n            description: $description\r\n            statuses: $statuses\r\n            publishedDate: $publishedDate\r\n            dateCreated: $dateCreated\r\n            lastUpdated: $lastUpdated\r\n        ) {\r\n            items {\r\n                ${PROGRAM_VERSION_LIST_PROPS}\r\n            }\r\n            count\r\n        }\r\n    }\r\n`;\r\n\r\nexport const GET_PROGRAM_DATA_LIST = gql`\r\n    query(\r\n        $statuses:[statuses]\r\n        $types:[String]\r\n        $creatorId:ID\r\n        $programId:ID!\r\n        $isLarge:Boolean\r\n        $isTest:Boolean\r\n        $dateCreated: [Date]\r\n        $lastUpdated: [Date]\r\n        $limit: Int\r\n        $offset: Int\r\n        $sort:String\r\n        $order:String\r\n    ) {\r\n          programDataList(\r\n            paginateParams: {\r\n                max: $limit\r\n                offset: $offset\r\n                sort: $sort\r\n                order: $order\r\n            }\r\n            types:$types\r\n            creatorId:$creatorId\r\n            programId:$programId\r\n            isLarge: $isLarge\r\n            isTest: $isTest\r\n            statuses: $statuses\r\n            dateCreated: $dateCreated\r\n            lastUpdated: $lastUpdated\r\n        ) {\r\n            items {\r\n                ${PROGRAM_DATA_PROPS}\r\n            }\r\n            count\r\n        }\r\n    }\r\n`;\r\n","import { currentPath } from \"./pathUtils\";\r\nimport _split from \"lodash/split\";\r\nimport _last from \"lodash/last\";\r\n\r\nexport const getRouteId = () => {\r\n  const path = currentPath();\r\n  const lastPart = _last(_split(path, \"/\"));\r\n  let id = 0;\r\n  try {\r\n    id = parseInt(lastPart);\r\n  } catch (e) {\r\n    console.error(\"wrong id :\", id);\r\n  }\r\n  return id;\r\n};\r\n\r\nexport const getRouteLastValue = () => {\r\n  const path = decodeURI(currentPath());\r\n  return _last(_split(path, \"/\"));\r\n};\r\n\r\nexport const getSearchKeyword = () => {\r\n  const path = currentPath();\r\n  if (path.indexOf(\"/search\") >= 0) {\r\n    return getRouteLastValue();\r\n  }\r\n  return \"\";\r\n};\r\n","// 链接\r\nexport const PROBLEM_CREATE = \"/problem/create\";\r\nexport const PROBLEM_EDIT = \"/problem/edit\";\r\nexport const PROBLEM_PAGE = \"/problem/\";\r\nexport const PROGRAM = \"/program/\";\r\nexport const PERSONAL_PROGRAM_CREATE = \"/personal/programCreate\";\r\nexport const PERSONAL_PROGRAM_EDIT = \"/personal/programEdit\";\r\nexport const BLOG = \"/blog/\";\r\nexport const CHAPTER = \"/chapter/\";\r\nexport const BOOK = \"/book/\";\r\nexport const SEARCH = \"/search/\";\r\nexport const PERSONAL = \"/personal/\";\r\nexport const ABOUT = \"/about/\";\r\n\r\n// 对象类型\r\nexport const OBJ_TYPES = {\r\n  PROGRAM: \"Program\",\r\n  BLOG: \"Blog\",\r\n  BOOK: \"Book\",\r\n  CHAPTER: \"Chapter\",\r\n  COMMENT: \"Comment\",\r\n  PROBLEM: \"Problem\"\r\n};\r\n\r\n// 本地存储key\r\nexport const CHAPTER_PAGE_SETTINGS = \"chapterPageSettings\";\r\n\r\n// 更新标识\r\nexport const UPDATED = \"_change\";\r\n\r\nexport const BOOKS_READ = \"booksRead\";\r\n\r\nexport const SEARCHED_PROBLEMS = \"searched_problems\";\r\n\r\nexport const MY_PROGRAMS_REFRESH = \"my_programs_refresh\";\r\n\r\nexport const REFETCH_TAG = \"_refetch_\";\r\n\r\nexport const BOOK_REFRESH = \"book_refresh\";\r\n\r\nexport const PROGRAM_REFRESH = \"program_refresh\";\r\n\r\n// 个人中心\r\nexport const PERSONAL_PAGES = {\r\n  USER_SETTINGS: \"userSettings\",\r\n  PROGRAM_EDIT: \"programEdit\",\r\n  PROGRAM_CREATE: \"programCreate\",\r\n  PROGRAM: \"program\",\r\n  PROBLEM: \"problem\",\r\n  BOOK: \"book\",\r\n  BLOG: \"blog\",\r\n  COMMENT: \"comment\",\r\n  UP: \"up\",\r\n  FOLLOWER: \"follower\",\r\n  CHAPTER: \"chapter\"\r\n};\r\n\r\nexport const IMPORT_TYPE = {\r\n  OnlyJs: \"Js\",\r\n  OnlyHtml: \"Html\",\r\n  HtmlAndJS: \"Html与Js\",\r\n  Folder: \"文件夹\"\r\n};\r\n\r\nexport const PROBLEM_TYPE = [\r\n  { label: \"建议\", value: \"Advice\", bgColor: \"#4169E1\" },\r\n  { label: \"Bug\", value: \"Bug\", bgColor: \"red\" }\r\n];\r\n\r\nexport const CAPTCHA_TYPE = { SMS: \"Sms\", EMAIL: \"Email\" };\r\n\r\nexport const ACTION_TYPE = {\r\n  Login: \"Login\",\r\n  Register: \"Register\",\r\n  ResetPassword: \"ResetPassword\",\r\n  BindPhoneNumber: \"BindPhoneNumber\",\r\n  BindEmail: \"BindEmail\"\r\n};\r\n","import React, { useState, useEffect, useReducer } from \"react\";\r\nimport { Form, Input } from \"semantic-ui-react\";\r\nimport styled from \"styled-components\";\r\nimport _map from \"lodash/map\";\r\nimport _get from \"lodash/get\";\r\nimport _isEmpty from \"lodash/isEmpty\";\r\nimport _filter from \"lodash/filter\";\r\nimport _find from \"lodash/find\";\r\nimport _pick from \"lodash/pick\";\r\nimport _noop from \"lodash/noop\";\r\nimport { validateForm } from \"./validate\";\r\nimport _toLower from \"lodash/toLower\";\r\n\r\nconst Container = styled.div`\r\n  .ui.form .field > label {\r\n    text-align: left;\r\n  }\r\n  .ui.form .field .prompt.label {\r\n    float: left;\r\n  }\r\n`;\r\n\r\nconst getControlByType = type => {\r\n  let inputType = \"input\";\r\n  switch (_toLower(type)) {\r\n    case \"password\":\r\n      inputType = \"password\";\r\n    case \"input\":\r\n    default:\r\n      return ({ value, onChange, placeholder }) => (\r\n        <Input\r\n          defaultValue={value}\r\n          type={inputType}\r\n          onChange={(e, { name, value }) => {\r\n            onChange(value);\r\n          }}\r\n          placeholder={placeholder}\r\n        />\r\n      );\r\n  }\r\n};\r\n\r\nconst FormItem = ({\r\n  item,\r\n  form,\r\n  onUpdateField,\r\n  error,\r\n  onValidate,\r\n  setErrors\r\n}) => {\r\n  const { label, placeholder, renderControl, fieldKey, required, type } = item;\r\n  const value = _get(form, fieldKey, null);\r\n  console.log(\"value_________________________AAA\", value);\r\n  const [state, dispatch] = useReducer((state, action) => {\r\n    return { ...state, [action.key]: action.value };\r\n  }, {});\r\n  let control;\r\n  const onChange = value => onUpdateField(fieldKey, value);\r\n  if (typeof renderControl === \"function\") {\r\n    control = () =>\r\n      renderControl({\r\n        item,\r\n        value,\r\n        onUpdateField,\r\n        onChange,\r\n        form,\r\n        setErrors,\r\n        onSetError: errorMsg => {\r\n          setErrors({ [item.fieldKey]: errorMsg });\r\n        },\r\n        formItemState: state,\r\n        onUpdateState: (key, value) => dispatch({ key, value }),\r\n        error,\r\n        onValidate\r\n      });\r\n  } else {\r\n    control = () =>\r\n      getControlByType(type)({\r\n        value,\r\n        onChange,\r\n        form,\r\n        error,\r\n        setErrors,\r\n        onSetError: errorMsg => {\r\n          setErrors({ [item.fieldKey]: errorMsg });\r\n        },\r\n        formItemState: state,\r\n        onUpdateState: (key, value) => dispatch({ key, value }),\r\n        placeholder,\r\n        onValidate\r\n      });\r\n  }\r\n\r\n  const fieldErrorProps = error\r\n    ? { error: { pointing: \"below\", content: error } }\r\n    : {};\r\n  return (\r\n    <Form.Field\r\n      label={label}\r\n      required={required}\r\n      placeholder={placeholder}\r\n      control={control}\r\n      {...fieldErrorProps}\r\n    />\r\n  );\r\n};\r\n\r\nconst useForm = ({ formData, items }) => {\r\n  const [refreshForm, setRefreshForm] = useState(\"refresh\");\r\n  const [formStore, setFormStore] = useState(formData);\r\n  let form = formStore;\r\n  const [errors, setErrors] = useState({});\r\n  const updateField = (fieldKey, value) => {\r\n    form[fieldKey] = value;\r\n  };\r\n  return {\r\n    form,\r\n    onUpdateField: updateField,\r\n    errors,\r\n    setErrors: errors => {\r\n      setFormStore(form);\r\n      setErrors(errors);\r\n    },\r\n    refreshForm,\r\n    setRefreshForm,\r\n    onValidate: (submit, validateKeys) => {\r\n      const errors = validateForm(\r\n        form,\r\n        _isEmpty(validateKeys)\r\n          ? items\r\n          : _filter(items, item => validateKeys.indexOf(item.fieldKey) >= 0)\r\n      );\r\n      if (errors) {\r\n        setErrors(errors);\r\n      } else {\r\n        setErrors(null);\r\n        submit && submit();\r\n      }\r\n    }\r\n  };\r\n};\r\n\r\nconst BasicForm = ({\r\n  loading,\r\n  items,\r\n  width,\r\n  height,\r\n  children,\r\n  formData = {}\r\n}) => {\r\n  const {\r\n    form,\r\n    onUpdateField,\r\n    errors,\r\n    setErrors,\r\n    refreshForm,\r\n    onValidate\r\n  } = useForm({\r\n    formData,\r\n    items\r\n  });\r\n  return (\r\n    <Container style={{ width, height }} key={refreshForm}>\r\n      <Form loading={loading}>\r\n        {_map(items, item => {\r\n          return (\r\n            <FormItem\r\n              key={item.label}\r\n              form={form}\r\n              item={item}\r\n              setErrors={setErrors}\r\n              onValidate={onValidate}\r\n              error={_get(errors, item.fieldKey)}\r\n              onUpdateField={onUpdateField}\r\n            />\r\n          );\r\n        })}\r\n      </Form>\r\n      {children &&\r\n        children({\r\n          form,\r\n          onSubmit: () => {},\r\n          onAddErrors: setErrors,\r\n          onValidate: onValidate\r\n        })}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BasicForm;\r\n","import isEmail from \"validator/lib/isEmail\";\r\n\r\nimport isPhone from \"validator/lib/isMobilePhone\";\r\nimport _each from \"lodash/each\";\r\nimport _get from \"lodash/get\";\r\nimport _reverse from \"lodash/reverse\";\r\nimport _keys from \"lodash/keys\";\r\nimport _isEmpty from \"lodash/isEmpty\";\r\nimport _isInteger from \"lodash/isInteger\";\r\n\r\n// rules = {\"required\":{value:\"\",message:\"\"}}\r\n\r\nexport const validateForm = (form, items) => {\r\n  console.log(\"form___________________AAA\", form);\r\n  let errors = {};\r\n  _each(items, item => {\r\n    const { rules = {}, fieldKey, required, label } = item;\r\n    const value = _get(form, fieldKey);\r\n    if (required) {\r\n      if (_isEmpty(value)) {\r\n        errors[fieldKey] = rules[\"required\"] || `${label}不能为空`;\r\n      }\r\n    }\r\n    _each(_reverse(rules), (rule, key) => {\r\n      const strValue = value ? value.toString() : \"\";\r\n      switch (key) {\r\n        case \"maxLength\":\r\n          if (strValue.length > (rule.value || 0)) {\r\n            errors[fieldKey] = rule.message || `字符数不能超过${rule.value}`;\r\n          }\r\n          break;\r\n        case \"minLength\":\r\n          if (strValue.length < (rule.value || 0)) {\r\n            errors[fieldKey] = rule.message || `字符数不能小鱼${rule.value}`;\r\n          }\r\n          break;\r\n        case \"isEmail\":\r\n          if (value && !isEmail(value)) {\r\n            errors[fieldKey] = rule.message || \"邮件格式不对\";\r\n          }\r\n          break;\r\n        case \"phone\":\r\n          if (!isPhone(value)) {\r\n            errors[fieldKey] = rule.message || \"手机格式不对\";\r\n          }\r\n          break;\r\n        case \"isCaptcha\":\r\n          if (value && value.length !== 6) {\r\n            errors[fieldKey] = rule.message || \"验证码必须为6位字符\";\r\n          }\r\n        case \"isTelPhone\":\r\n          break;\r\n      }\r\n    });\r\n  });\r\n\r\n  const noError = _isEmpty(_keys(errors));\r\n  return noError ? null : errors;\r\n};\r\n","import { useEffect, useState, useReducer } from \"react\";\r\nimport { getDataFromUrl } from \"../utils/urlData\";\r\nimport _pick from \"lodash/pick\";\r\nimport _each from \"lodash/each\";\r\nimport _isEmpty from \"lodash/isEmpty\";\r\nimport _get from \"lodash/get\";\r\nimport _toLower from \"lodash/toLower\";\r\nimport _isNumber from \"lodash/isNumber\";\r\nimport { useMutation, useQuery } from \"@apollo/react-hooks\";\r\nimport {\r\n  READ_OBJ,\r\n  SAVE_COMMENT,\r\n  SAVE_COMMENT_FOR_DETAILS,\r\n  SAVE_RATING,\r\n  SWITCH_FOLLOW,\r\n  SWITCH_UP,\r\n  UPDATE_PROGRAM_STATUS\r\n} from \"./mutationGql\";\r\nimport ModalHint from \"./ModalHint\";\r\nimport { _getByRank } from \"../utils/utils\";\r\nimport ToastHint from \"./ToastHint\";\r\nimport LoginHint from \"./LoginHint\";\r\nimport { GET_ME } from \"./queryGql\";\r\nimport PersistStorage from \"../utils/PersistStorage\";\r\nimport { BOOK_REFRESH, CAPTCHA_TYPE, REFETCH_TAG, UPDATED } from \"./CONSULT\";\r\nimport { SERVER_URL } from \"../../config\";\r\nimport { message } from \"antd\";\r\nimport axios from \"axios\";\r\n\r\nexport const useMockDataUrl = (itemData, ...fieldKeys) => {\r\n  const dataUrls = _pick(itemData, fieldKeys);\r\n  const [item, setItem] = useState(itemData);\r\n  useEffect(() => {\r\n    _each(dataUrls, (dataUrl, fieldKeyUrl) => {\r\n      getDataFromUrl(dataUrl, \"data.content\", data => {\r\n        const fieldKey = fieldKeyUrl.slice(0, fieldKeyUrl.length - 3);\r\n        setItem({ ...item, [fieldKey]: data });\r\n      });\r\n    });\r\n  }, []);\r\n\r\n  return { item };\r\n};\r\n\r\nexport const useCopyUrlsToFields = (itemData, ...fieldKeys) => {\r\n  const [item, setItem] = useState(itemData);\r\n  useEffect(() => {\r\n    _each(fieldKeys, fieldKeyUrl => {\r\n      const fieldKey = fieldKeyUrl.slice(0, fieldKeyUrl.length - 3);\r\n      setItem({ ...item, [fieldKey]: itemData && itemData[fieldKeyUrl] });\r\n    });\r\n  }, []);\r\n  return { item };\r\n};\r\n\r\nexport const useComment = ({\r\n  refetch,\r\n  commentType,\r\n  objId,\r\n  parentId,\r\n  repliedCommentId,\r\n  clearForm,\r\n  saveCallback\r\n}) => {\r\n  const [show, setShow] = useState(false);\r\n  const [saveComment, { data, loading }] = useMutation(\r\n    saveCallback ? SAVE_COMMENT_FOR_DETAILS : SAVE_COMMENT,\r\n    {\r\n      onCompleted: data => {\r\n        refetch && refetch();\r\n        clearForm && clearForm();\r\n        saveCallback && saveCallback(_get(data, \"saveComment\"));\r\n      },\r\n      onError: () => ModalHint.error(\"评论失败！\")\r\n    }\r\n  );\r\n  const onSaveComment = content => {\r\n    if (_isEmpty(content)) {\r\n      ModalHint.error(\"评论不能为空！\");\r\n    } else {\r\n      saveComment({\r\n        variables: {\r\n          type: commentType,\r\n          objId,\r\n          parentId,\r\n          repliedCommentId,\r\n          content\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  return { show, setShow, mLoading: loading, onSaveComment };\r\n};\r\n\r\nexport const useReplyForm = ({ repliedComment }) => {\r\n  const { creator } = repliedComment;\r\n  const [show, setShow] = useState(false);\r\n  return {\r\n    showReplyForm: show,\r\n    setShowReplyForm: setShow,\r\n    replyPlaceholder: `回复 @${_getByRank(creator, [\"nickname\", \"username\"])}:`\r\n  };\r\n};\r\n\r\nexport const useRefresh = () => {\r\n  const [refresh, setRefresh] = useState(\"refresh\");\r\n  const onRefresh = () => setRefresh(Math.random().toString());\r\n  return [refresh, onRefresh];\r\n};\r\n\r\nexport const useSwitchFollow = ({\r\n  currentFollowed,\r\n  objId,\r\n  objType,\r\n  onSwitchCompleted,\r\n  followCount: fCount = 0,\r\n  successMsg = { followed: \"收藏成功！\", unFollowed: \"取消收藏成功！\" },\r\n  errorMsg = { followed: \"收藏失败！\", unFollowed: \"取消收藏失败！\" }\r\n}) => {\r\n  const [followed, setFollowed] = useState(currentFollowed);\r\n  const [followCount, setFollowCount] = useState(fCount);\r\n  const [switchFollow, { data, loading }] = useMutation(SWITCH_FOLLOW, {\r\n    onCompleted: data => {\r\n      onSwitchCompleted && onSwitchCompleted(data);\r\n      // 更新标识\r\n      PersistStorage.setItem(`${objType}${objId}${UPDATED}`, true);\r\n      ToastHint.showSuccess(\r\n        !followed ? successMsg.followed : successMsg.unFollowed\r\n      );\r\n      setFollowed(!followed);\r\n      setFollowCount(data.switchFollower);\r\n    },\r\n    onError: e => {\r\n      console.log(e);\r\n      ModalHint.error(!followed ? errorMsg.followed : errorMsg.unFollowed);\r\n    }\r\n  });\r\n  return {\r\n    followed,\r\n    setFollowed,\r\n    mLoading: loading,\r\n    onSwitchFollow: () =>\r\n      LoginHint.checkLogin(() =>\r\n        switchFollow({ variables: { objId, objType } })\r\n      ),\r\n    followCount\r\n  };\r\n};\r\n\r\nexport const useSwitchUp = ({\r\n  currentUpped,\r\n  objId,\r\n  objType,\r\n  onSwitchCompleted,\r\n  upCount: uCount = 0,\r\n  successMsg = { upped: \"已点赞！\", unUpped: \"已取消点赞！\" },\r\n  errorMsg = { upped: \"点赞失败！\", unUpped: \"取消点赞失败！\" }\r\n}) => {\r\n  const [upped, setUpped] = useState(currentUpped);\r\n  const [upCount, setUpCount] = useState(uCount);\r\n  const [switchUp, { data, loading }] = useMutation(SWITCH_UP, {\r\n    onCompleted: data => {\r\n      onSwitchCompleted && onSwitchCompleted(data);\r\n      ToastHint.showSuccess(!upped ? successMsg.upped : successMsg.unUpped);\r\n      setUpped(!upped);\r\n      setUpCount(data.switchUp);\r\n    },\r\n    onError: () => ModalHint.error(!upped ? errorMsg.upped : errorMsg.unUpped)\r\n  });\r\n  return {\r\n    upped,\r\n    setUpped,\r\n    mLoading: loading,\r\n    onSwitchUp: () =>\r\n      LoginHint.checkLogin(() => switchUp({ variables: { objId, objType } })),\r\n    upCount\r\n  };\r\n};\r\n\r\nexport const useRating = ({\r\n  currentRating,\r\n  objId,\r\n  objType,\r\n  onRateCompleted,\r\n  successMsg = \"评分成功！\",\r\n  errorMsg = \"评分失败！\"\r\n}) => {\r\n  const [rating, setRating] = useState(\r\n    currentRating && currentRating.isCurrentRating\r\n      ? currentRating\r\n      : { ...currentRating, score: 0 }\r\n  );\r\n  const [rate, { data, loading }] = useMutation(SAVE_RATING, {\r\n    onCompleted: data => {\r\n      const score = data.saveRating.score;\r\n      onRateCompleted && onRateCompleted(data);\r\n      ToastHint.showSuccess(successMsg + `${score}分`);\r\n      setRating(data.saveRating);\r\n    },\r\n    onError: error => {\r\n      console.error(error);\r\n      //ModalHint.error(errorMsg);\r\n    }\r\n  });\r\n  return {\r\n    rating,\r\n    setRating,\r\n    mLoading: loading,\r\n    onRate: score =>\r\n      LoginHint.checkLogin(() =>\r\n        rate({ variables: { objId, type: objType, score } })\r\n      )\r\n  };\r\n};\r\n\r\nexport const useMe = () => {\r\n  const { loading, error, data, refetch } = useQuery(GET_ME);\r\n  const me = _get(data, \"me\", null);\r\n  return { me, loading, refetch };\r\n};\r\n\r\nexport const useTabs = ({ initTab }) => {\r\n  const [currentTab, setCurrentTab] = useState(initTab);\r\n  const [countState, dispatchCount] = useReducer((state, action) => {\r\n    if (action.tab && action.count) {\r\n      return { ...state, [action.tab]: action.count };\r\n    }\r\n    return state;\r\n  }, {});\r\n  const onUpdateTabCount = (tab, count) => dispatchCount({ tab, count });\r\n  return {\r\n    currentTab,\r\n    onSwitchTab: tab => setCurrentTab(tab),\r\n    onUpdateTabCount,\r\n    countState\r\n  };\r\n};\r\n\r\n// program\r\nexport const useUpdateProgramStatus = ({\r\n  programId,\r\n  onUpdateStatusCompleted\r\n}) => {\r\n  const [status, setStatus] = useState(\"\");\r\n  const [successMsg, setSuccessMsg] = useState(\"\");\r\n  const [errorMsg, setErrorMsg] = useState(\"\");\r\n  const [updateProgramStatus, { data, loading }] = useMutation(\r\n    UPDATE_PROGRAM_STATUS,\r\n    {\r\n      onCompleted: data => {\r\n        onUpdateStatusCompleted && onUpdateStatusCompleted(status);\r\n        ToastHint.showSuccess(successMsg);\r\n      },\r\n      onError: () => ModalHint.error(errorMsg)\r\n    }\r\n  );\r\n\r\n  return {\r\n    mLoading: loading,\r\n    onUpdateProgramStatus: (status, successMsg, errorMsg) => {\r\n      setSuccessMsg(successMsg);\r\n      setErrorMsg(errorMsg);\r\n      setStatus(status);\r\n      updateProgramStatus({ variables: { id: programId, status } });\r\n    }\r\n  };\r\n};\r\n\r\n// file upload\r\n\r\nfunction getBase64(img, callback) {\r\n  const reader = new FileReader();\r\n  reader.addEventListener(\"load\", () => callback(reader.result));\r\n  reader.readAsDataURL(img);\r\n}\r\n\r\nexport const useFileInput = ({ isTmp, value, onChange }) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [imageUrl, setImageUrl] = useState(value);\r\n  const handleChange = info => {\r\n    if (info.file.status === \"uploading\") {\r\n      setLoading(true);\r\n    }\r\n    if (info.file.status === \"done\") {\r\n      // Get this url from response in real world.\r\n      getBase64(info.file.originFileObj, imageUrl => {\r\n        setLoading(false);\r\n        setImageUrl(imageUrl);\r\n        const ossImageUrl = _get(info.file, \"response.pathArray[0]\");\r\n        onChange(ossImageUrl);\r\n      });\r\n    }\r\n  };\r\n  return {\r\n    loading,\r\n    imageUrl,\r\n    handleChange,\r\n    actionUrl: SERVER_URL + (isTmp ? \"/uploadTemp\" : \"/uploadm\")\r\n  };\r\n};\r\n\r\nconst callCaptcha = (\r\n  name,\r\n  captchaType,\r\n  actionType,\r\n  onSuccess,\r\n  onFail,\r\n  onFinal\r\n) => {\r\n  if (!name) {\r\n    ToastHint.showFailure(\"请输入验证码发送对象！\");\r\n    return;\r\n  }\r\n  const postData =\r\n    captchaType === CAPTCHA_TYPE.SMS ? { phone: name } : { email: name };\r\n  axios\r\n    .post(`${SERVER_URL}/${_toLower(captchaType)}Captcha`, {\r\n      actionType,\r\n      ...postData\r\n    })\r\n    .then(response => {\r\n      onSuccess && onSuccess(response.data);\r\n      console.log(\"response______\", response);\r\n    })\r\n    .catch(error => {\r\n      onFail && onFail(error);\r\n      console.log(\"call captcha error\", error);\r\n    })\r\n    .finally(() => {\r\n      onFinal && onFinal();\r\n    });\r\n};\r\n\r\nexport const useSendCaptcha = ({\r\n  captchaType,\r\n  actionType,\r\n  onUpdateState,\r\n  onCompleted,\r\n  count,\r\n  onError\r\n}) => {\r\n  const onSendCaptcha = (name, cType, aType) => {\r\n    callCaptcha(\r\n      name,\r\n      cType || captchaType,\r\n      aType || actionType,\r\n      res => {\r\n        onCompleted && onCompleted(res);\r\n        onUpdateState(\"loading\", true);\r\n      },\r\n      onError,\r\n      () => {\r\n        onUpdateState(\"loading\", true);\r\n        onUpdateState(\"count\", count + 1);\r\n      }\r\n    );\r\n  };\r\n  return { onSendCaptcha };\r\n};\r\n\r\nconst bindPhone = (phone, captchaCode, onSuccess, onFail, onFinal) => {\r\n  const accessToken = _get(\r\n    PersistStorage.getItemRO(\"authentication\"),\r\n    \"access_token\"\r\n  );\r\n  axios\r\n    .post(\r\n      `${SERVER_URL}/bindPhone`,\r\n      { phone, captchaCode },\r\n      { headers: { Authorization: \"Bearer \" + accessToken } }\r\n    )\r\n    .then(response => {\r\n      onSuccess && onSuccess(response.data);\r\n    })\r\n    .catch(error => {\r\n      onFail && onFail(error);\r\n      console.log(\"call captcha error\", error);\r\n    })\r\n    .finally(() => {\r\n      onFinal && onFinal();\r\n    });\r\n};\r\n\r\nexport const useBindPhone = ({ onCompleted, onError }) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const onBindPhone = (phone, captchaCode) => {\r\n    bindPhone(\r\n      phone,\r\n      captchaCode,\r\n      response => {\r\n        console.log(\"bindPhoneRes______________\", response);\r\n        onCompleted && onCompleted(response);\r\n        setLoading(true);\r\n      },\r\n      onError,\r\n      () => {\r\n        setLoading(false);\r\n      }\r\n    );\r\n  };\r\n  return { loading, onBindPhone };\r\n};\r\n\r\nconst bindEmail = (email, captchaCode, onSuccess, onFail, onFinal) => {\r\n  const accessToken = _get(\r\n    PersistStorage.getItemRO(\"authentication\"),\r\n    \"access_token\"\r\n  );\r\n  axios\r\n    .post(\r\n      `${SERVER_URL}/bindEmail`,\r\n      { email, captchaCode },\r\n      { headers: { Authorization: \"Bearer \" + accessToken } }\r\n    )\r\n    .then(response => {\r\n      onSuccess && onSuccess(response);\r\n      console.log(\"response______\", response);\r\n    })\r\n    .catch(error => {\r\n      onFail && onFail(error);\r\n      console.log(\"call captcha error\", error);\r\n    })\r\n    .finally(() => {\r\n      onFinal && onFinal();\r\n    });\r\n};\r\n\r\nexport const useBindEmail = ({ onCompleted, onError }) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const onBindEmail = (email, captchaCode) => {\r\n    if (!email || !captchaCode) {\r\n      ToastHint.showFailure(\"邮箱与验证码不能为空！\");\r\n    }\r\n    bindEmail(\r\n      email,\r\n      captchaCode,\r\n      response => {\r\n        onCompleted && onCompleted(response);\r\n        setLoading(true);\r\n      },\r\n      onError,\r\n      () => {\r\n        setLoading(false);\r\n      }\r\n    );\r\n  };\r\n  return { loading, onBindEmail };\r\n};\r\n\r\nconst resetPassword = (\r\n  name,\r\n  captchaType,\r\n  newPassword,\r\n  captchaCode,\r\n  onSuccess,\r\n  onFail,\r\n  onFinal\r\n) => {\r\n  const accessToken = _get(\r\n    PersistStorage.getItemRO(\"authentication\"),\r\n    \"access_token\"\r\n  );\r\n\r\n  axios\r\n    .post(\r\n      `${SERVER_URL}/resetPasswordByCaptchaCode`,\r\n      { name, captchaType, newPassword, captchaCode },\r\n      { headers: { Authorization: \"Bearer \" + accessToken } }\r\n    )\r\n    .then(response => {\r\n      onSuccess && onSuccess(response.data);\r\n      console.log(\"response______\", response);\r\n    })\r\n    .catch(error => {\r\n      onFail && onFail(error);\r\n      console.log(\"call captcha error\", error);\r\n    })\r\n    .finally(() => {\r\n      onFinal && onFinal();\r\n    });\r\n};\r\n\r\nexport const useResetPassword = ({ onCompleted, onError }) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const onResetPassword = (name, captchaType, newPassword, captchaCode) => {\r\n    if (!name || !captchaCode) {\r\n      ToastHint.showFailure(\"邮箱或手机号与验证码不能为空！\");\r\n    }\r\n    resetPassword(\r\n      name,\r\n      captchaType,\r\n      newPassword,\r\n      captchaCode,\r\n      response => {\r\n        onCompleted && onCompleted(response);\r\n        setLoading(true);\r\n      },\r\n      onError,\r\n      () => {\r\n        setLoading(false);\r\n      }\r\n    );\r\n  };\r\n  return { loading, onResetPassword };\r\n};\r\n\r\nexport const useRead = ({ objId, objType }) => {\r\n  const [readObj, { data, loading: mLoading }] = useMutation(READ_OBJ, {\r\n    onCompleted: () => {},\r\n    onError: () => {}\r\n  });\r\n  useEffect(() => {\r\n    const lastReadDate = PersistStorage.getItem(\r\n      `readCount[${objType}][${objId}]`\r\n    );\r\n    const currentDate = new Date().getTime();\r\n    const readNow = lastReadDate\r\n      ? currentDate - lastReadDate > 1000 * 60 * 30\r\n      : true;\r\n    // 每间隔30min算一次阅读\r\n    if (readNow) {\r\n      if (objId && objType) {\r\n        readObj({ variables: { objId, objType } });\r\n      }\r\n      PersistStorage.setItem(`readCount[${objType}][${objId}]`, currentDate);\r\n    }\r\n  }, []);\r\n};\r\n\r\nexport const useIframeLoading = (eleId = \"program_iframe\") => {\r\n  const [loading, setLoading] = useState(true);\r\n  useEffect(() => {\r\n    const programIframe = document.getElementById(eleId);\r\n    programIframe.onload = () => {\r\n      setLoading(false);\r\n    };\r\n  }, []);\r\n  return { loading };\r\n};\r\n\r\nexport const useResizeIframe = () => {\r\n  const [width, setWidth] = useState(\"100%\");\r\n  const [height, setHeight] = useState(400);\r\n  useEffect(() => {\r\n    const messageHandler = event => {\r\n      const {\r\n        data: { height: programHeight, width: programWidth }\r\n      } = event;\r\n      setHeight(programHeight + 4);\r\n      const currentWidth = document.getElementById(\"program_iframe\")\r\n        .clientWidth;\r\n      if (currentWidth && programWidth > currentWidth) {\r\n        setWidth(programWidth);\r\n      }\r\n    };\r\n    window.addEventListener(\"message\", messageHandler);\r\n    return () => window.removeEventListener(\"message\", messageHandler);\r\n  }, []);\r\n  return { width, height };\r\n};\r\n\r\nexport const useRefetch = (refetch, deps, cond, clearRefetch) => {\r\n  useEffect(() => {\r\n    if (cond) {\r\n      refetch && refetch();\r\n      clearRefetch && clearRefetch();\r\n    }\r\n  }, deps || []);\r\n};\r\n\r\nexport const useRefetchItem = (refetch, refetchKey, objId) => {\r\n  const objRefresh = PersistStorage.getItemRO(refetchKey);\r\n  const refreshValue = _get(objRefresh, objId);\r\n  useRefetch(refetch, [], refreshValue === REFETCH_TAG, () => {\r\n    PersistStorage.setItem(refetchKey, { ...objRefresh, [objId]: \"\" });\r\n  });\r\n};\r\n","import axios from \"axios\";\r\nimport _get from \"lodash/get\";\r\n\r\nexport const getDataFromUrl = (\r\n  url,\r\n  dataPath = \"data.content\",\r\n  onUpdateValue,\r\n  finalAction\r\n) => {\r\n  axios\r\n    .get(url)\r\n    .then(response => {\r\n      const dataText = _get(response, dataPath, \"\");\r\n      try {\r\n        onUpdateValue(JSON.parse(dataText) || {});\r\n      } catch (e) {\r\n        onUpdateValue(dataText);\r\n      } finally {\r\n        finalAction && finalAction();\r\n      }\r\n    })\r\n    .catch(error => {\r\n      console.log(error); //异常\r\n    });\r\n};\r\n\r\nexport const getJsTextFromUrl = (url, onUpdateValue) => {\r\n  axios\r\n    .get(url)\r\n    .then(response => {\r\n      onUpdateValue(response.data);\r\n    })\r\n    .catch(error => {\r\n      console.log(error); //异常\r\n    });\r\n};\r\n","import React from \"react\";\r\nimport { useQuery } from \"@apollo/react-hooks\";\r\nimport _get from \"lodash/get\";\r\nimport Loading from \"../common/Loading\";\r\n\r\nconst PageItem = ({\r\n  id,\r\n  variables,\r\n  itemPath = \"\",\r\n  children,\r\n  gql,\r\n  autoLoading\r\n}) => {\r\n  variables = id ? { ...variables, id } : variables;\r\n  const { loading, error, data, refetch, networkStatus } = useQuery(gql, {\r\n    variables,\r\n    onError: error => {\r\n      console.log(\"query error_____________________\", error);\r\n    }\r\n  });\r\n  if (autoLoading && loading) {\r\n    return <Loading />;\r\n  }\r\n  if (!data) {\r\n    return null;\r\n  }\r\n  return children({\r\n    loading,\r\n    refetch,\r\n    item: itemPath ? _get(data, itemPath, {}) : data\r\n  });\r\n};\r\n\r\nexport default PageItem;\r\n","import React, { useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Search } from \"semantic-ui-react\";\r\nimport PersistStorage from \"../../utils/PersistStorage\";\r\nimport _map from \"lodash/map\";\r\nimport _get from \"lodash/get\";\r\nimport _chunk from \"lodash/chunk\";\r\nimport { getSearchKeyword } from \"../../utils/routeUtils\";\r\n\r\nconst SearchInput = ({ isLoading, onSearch }) => {\r\n  useEffect(() => {\r\n    const handleKeypress = event => {\r\n      if (event.keyCode === 13) {\r\n        onSearch(event.target.value);\r\n      }\r\n    };\r\n    const searchInput = document.getElementById(\"search_input\");\r\n    searchInput.addEventListener(\"keypress\", handleKeypress);\r\n    return () => searchInput.removeEventListener(\"keypress\", handleKeypress);\r\n  }, []);\r\n  const displayHistorySearchItems = _map(\r\n    _chunk(PersistStorage.getItem(\"historySearchItems\"), 10)[0],\r\n    i => ({ title: i })\r\n  );\r\n  return (\r\n    <Search\r\n      id={\"search_input\"}\r\n      input={{ icon: \"search\", iconPosition: \"left\" }}\r\n      loading={isLoading}\r\n      onResultSelect={(e, data) => {\r\n        const value = _get(data, \"result.title\");\r\n        onSearch(value);\r\n      }}\r\n      className={\"search_header\"}\r\n      style={{ width: 400 }}\r\n      placeholder={\"请输入关键词\"}\r\n      // onSearchChange={e => {\r\n      // }}\r\n      results={displayHistorySearchItems}\r\n      defaultValue={getSearchKeyword()}\r\n      // onSearchChange={_.debounce(this.handleSearchChange, 500, {\r\n      //     leading: true,\r\n      // })}\r\n      // results={results}\r\n      // value={value}\r\n    />\r\n  );\r\n};\r\n\r\nexport default SearchInput;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Dropdown } from \"semantic-ui-react\";\r\nimport Avatar from \"../transformable/common/Avatar\";\r\nimport { AppContext } from \"../../../App\";\r\nimport ModalHint from \"../../common/ModalHint\";\r\nimport LoginHint from \"../../common/LoginHint\";\r\nimport { PERSONAL, PERSONAL_PAGES } from \"../../common/CONSULT\";\r\nimport _get from \"lodash/get\";\r\nimport _isEmpty from \"lodash/isEmpty\";\r\n\r\nconst AvatarContainer = styled.div`\r\n  height: 80px;\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst LoginAvatar = ({ onGoTo }) => {\r\n  const [showMenu, setShowMenu] = useState(false);\r\n  return (\r\n    <AppContext.Consumer>\r\n      {props => {\r\n        const { currentUser, setAuthentication, logout } = props;\r\n        return (\r\n          <AvatarContainer\r\n            onMouseLeave={() => setShowMenu(false)}\r\n            onBlur={() => setShowMenu(false)}\r\n          >\r\n            <Dropdown\r\n              open={showMenu}\r\n              icon={\r\n                <div onMouseEnter={() => setShowMenu(true)}>\r\n                  <Avatar\r\n                    avatar={_get(currentUser, \"avatar\")}\r\n                    width={50}\r\n                    size={\"big\"}\r\n                    cursor={\"pointer\"}\r\n                  />\r\n                </div>\r\n              }\r\n            >\r\n              <Dropdown.Menu style={{ marginTop: 12, width: 90 }}>\r\n                {!_isEmpty(currentUser) ? (\r\n                  <>\r\n                    <Dropdown.Item\r\n                      onClick={() =>\r\n                        LoginHint.checkLogin(() =>\r\n                          onGoTo(PERSONAL + PERSONAL_PAGES.PROGRAM)\r\n                        )\r\n                      }\r\n                      text=\"个人中心\"\r\n                    />\r\n                    <Dropdown.Divider />\r\n                    <Dropdown.Item onClick={() => logout()} text=\"登出\" />\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Dropdown.Item\r\n                      text=\"登录\"\r\n                      onClick={() => LoginHint.show()}\r\n                    />\r\n                    <Dropdown.Item\r\n                      text=\"注册\"\r\n                      onClick={() => LoginHint.showRegister()}\r\n                    />\r\n                  </>\r\n                )}\r\n              </Dropdown.Menu>\r\n            </Dropdown>\r\n          </AvatarContainer>\r\n        );\r\n      }}\r\n    </AppContext.Consumer>\r\n  );\r\n};\r\n\r\nexport default LoginAvatar;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _get from \"lodash/get\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\n\r\nconst Image = styled.img`\r\n  height: 70px;\r\n  border-radius: 2px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);\r\n`;\r\n\r\nconst OpenedObj = ({ openedObj }) => {\r\n  const imgUrl = _get(openedObj, \"cover.url\", \"\");\r\n  return <Container>{imgUrl && <Image src={imgUrl} />}</Container>;\r\n};\r\n\r\nexport default OpenedObj;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _map from \"lodash/map\";\r\nimport SearchInput from \"./SearchInput\";\r\nimport LoginAvatar from \"./LoginAvatar\";\r\nimport { SEARCH } from \"../../common/CONSULT\";\r\nimport PersistStorage from \"../../utils/PersistStorage\";\r\nimport _filter from \"lodash/filter\";\r\nimport { getSearchKeyword } from \"../../utils/routeUtils\";\r\nimport OpenedObj from \"./OpenedObj\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  height: 80px;\r\n  width: 100%;\r\n  background: #fff;\r\n  position: relative;\r\n  box-shadow: 0 2px 4px 0 rgb(0 0 0 / 8%);\r\n  .search_header {\r\n    //position: absolute !important;\r\n    //left: 0 !important;\r\n    //right: 0 !important;\r\n    //margin: auto;\r\n    .prompt {\r\n      width: 400px;\r\n      height: 40px;\r\n    }\r\n  }\r\n`;\r\n\r\nconst LeftBox = styled.div`\r\n  display: flex;\r\n  flex: 1;\r\n  align-items: center;\r\n`;\r\n\r\nconst RightBox = styled.div`\r\n  align-items: center;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding-right: 40px;\r\n  padding-left: 40px;\r\n  flex: 1;\r\n`;\r\n\r\nconst HEAD_TABS = [\r\n  { name: \"首页\", value: \"home\" },\r\n  { name: \"工具\", value: \"program\" },\r\n  { name: \"博客\", value: \"blog\" },\r\n  { name: \"书籍\", value: \"book\" },\r\n  { name: \"建议\", value: \"problem\" },\r\n  // { name: \"公告\", value: \"announcement\" },\r\n  { name: \"关于\", value: \"about\" }\r\n];\r\n\r\nconst HeadTab = styled.div`\r\n  padding-left: 20px;\r\n  padding-right: 20px;\r\n  cursor: pointer;\r\n  font-size: ${props => (props.selected ? \"24\" : \"20\")}px;\r\n  color: ${props => (props.selected ? \"#EC808D\" : \"#333333\")};\r\n  text-align: center;\r\n  line-height: ${props => (props.selected ? \"24\" : \"20\")} px;\r\n  margin-bottom: ${props => (props.selected ? 30 : 0)} px;\r\n`;\r\n\r\nconst HeadTabsContainer = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst HeadTabs = ({ onSwitchTab, selectedTab }) => {\r\n  return (\r\n    <HeadTabsContainer>\r\n      {_map(HEAD_TABS, (tab, index) => {\r\n        const { name, value } = tab;\r\n        return (\r\n          <HeadTab\r\n            key={index}\r\n            selected={selectedTab === value}\r\n            onClick={() => onSwitchTab(value)}\r\n          >\r\n            {name}\r\n          </HeadTab>\r\n        );\r\n      })}\r\n    </HeadTabsContainer>\r\n  );\r\n};\r\n\r\nconst LogoContainer = styled.div``;\r\n\r\nconst LogoImage = styled.img`\r\n  width: 180px;\r\n  height: 70px;\r\n`;\r\n\r\nconst LogoField = ({ logo }) => {\r\n  return (\r\n    <LogoContainer>\r\n      <Link to={\"/\"}>\r\n        <LogoContainer lineHeight={logo ? 0 : 70}>\r\n          {logo ? <LogoImage src={logo} /> : \"选择LOGO\"}\r\n        </LogoContainer>\r\n      </Link>\r\n    </LogoContainer>\r\n  );\r\n};\r\n\r\nexport const onSaveSearchHistory = keyword => {\r\n  const historySearchItems = PersistStorage.getItem(\"historySearchItems\") || [];\r\n  const newHistorySearchItems = _filter(\r\n    historySearchItems,\r\n    item => item !== keyword\r\n  );\r\n  newHistorySearchItems.unshift(keyword);\r\n  PersistStorage.setItem(\r\n    \"historySearchItems\",\r\n    newHistorySearchItems.filter(i => i)\r\n  );\r\n};\r\n\r\nconst Header = ({\r\n  data: { logo },\r\n  currentPage,\r\n  onSwitchPage,\r\n  onGoTo,\r\n  openedObj\r\n}) => {\r\n  return (\r\n    <Container>\r\n      <LeftBox>\r\n        <LogoField logo={logo} />\r\n        <HeadTabs selectedTab={currentPage} onSwitchTab={onSwitchPage} />\r\n      </LeftBox>\r\n      <SearchInput\r\n        key={getSearchKeyword()}\r\n        onSearch={searchKeyword => {\r\n          onSaveSearchHistory(searchKeyword);\r\n          onGoTo(`${SEARCH}${searchKeyword}`);\r\n        }}\r\n      />\r\n      <RightBox>\r\n        <OpenedObj openedObj={openedObj} />\r\n        <LoginAvatar onGoTo={onGoTo} />\r\n      </RightBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\nimport { useQuery } from \"@apollo/react-hooks\";\r\nimport _last from \"lodash/last\";\r\nimport _spit from \"lodash/split\";\r\nimport _get from \"lodash/get\";\r\nimport { gql } from \"apollo-boost\";\r\nimport { PAGE_SETTINGS_PROPS } from \"../common/props\";\r\nexport const GET_PAGE_SETTINGS = gql`\r\n    query {\r\n        currentWebPageSettings {\r\n            ${PAGE_SETTINGS_PROPS}   \r\n        }\r\n        aboutCodes:codes(available:true,paginateParams:{sort:\"codeRank\",order:\"desc\"},types:[ABOUT]){\r\n            count \r\n            items{\r\n                id\r\n                name\r\n                value\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nconst PageQuery = ({ children }) => {\r\n  const pageSettingsId = _last(_spit(window.location.pathname, \"/\"));\r\n  const { loading, error, data, refetch, networkStatus } = useQuery(\r\n    GET_PAGE_SETTINGS\r\n  );\r\n  if (!data) {\r\n    return null;\r\n  }\r\n  return children({\r\n    loading,\r\n    refetch,\r\n    pageForm: _get(data, \"currentWebPageSettings\", {}),\r\n    aboutCodes: _get(data, \"aboutCodes.items\", [])\r\n  });\r\n};\r\n\r\nexport default PageQuery;\r\n","export const GRIDS = {\r\n  homeSwipe: {\r\n    name: \"首页滑动\",\r\n    id: \"grid.swipe\",\r\n    image: \"\"\r\n  },\r\n  announcement: {\r\n    name: \"横幅公告\",\r\n    id: \"grid.announcement\",\r\n    image: \"\"\r\n  },\r\n  blogList: {\r\n    name: \"博客列表\",\r\n    id: \"grid.blogList\",\r\n    image: \"\",\r\n    xs: 18\r\n  },\r\n  adList: {\r\n    name: \"广告\",\r\n    id: \"grid.adList\",\r\n    image: \"\",\r\n    xs: 6\r\n  },\r\n  bookFlatList: {\r\n    name: \"田字书列\",\r\n    id: \"grid.bookFlatList\",\r\n    image: \"\",\r\n    xs: 8\r\n  },\r\n  bookList: {\r\n    name: \"书籍列表\",\r\n    id: \"grid.bookList\",\r\n    image: \"\",\r\n    xs: 16\r\n  },\r\n  programFlatList: {\r\n    name: \"田字工具列\",\r\n    id: \"grid.programFlatList\",\r\n    image: \"\"\r\n  },\r\n\r\n  programTop: {\r\n    name: \"工具头部\",\r\n    id: \"grid.programTop\",\r\n    image: \"\"\r\n  },\r\n  programList: {\r\n    name: \"田字工具列\",\r\n    id: \"grid.programList\",\r\n    image: \"\"\r\n  },\r\n\r\n  bookTop: {\r\n    name: \"书籍头部\",\r\n    id: \"grid.bookTop\",\r\n    image: \"\"\r\n  },\r\n\r\n  bookHList: {\r\n    name: \"书籍列表\",\r\n    id: \"grid.bookHList\",\r\n    image: \"\"\r\n  },\r\n\r\n  allPageBannerAd: {\r\n    name: \"全横屏广告\",\r\n    id: \"grid.allPageBannerAd\",\r\n    image: \"\"\r\n  },\r\n\r\n  blogTop: {\r\n    name: \"博客头部\",\r\n    id: \"grid.blogTop\",\r\n    image: \"\"\r\n  },\r\n\r\n  blogRecommendList: {\r\n    name: \"博客头部\",\r\n    id: \"grid.blogRecommendList\",\r\n    image: \"\"\r\n  },\r\n\r\n  blogVList: {\r\n    name: \"博客列表\",\r\n    id: \"grid.blogVList\",\r\n    image: \"\",\r\n    xs: 18\r\n  }\r\n};\r\n\r\nconst ROW_EDIT_ITEMS = [\r\n  {\r\n    label: \"行标题\",\r\n    name: \"title\",\r\n    rules: [{ required: true, message: \"请输入行标题\" }],\r\n    type: \"input\"\r\n  },\r\n  {\r\n    label: \"颜色\",\r\n    name: \"headerColor\",\r\n    rules: [{ required: true, message: \"请输入颜色\" }],\r\n    type: \"colorPicker\"\r\n  }\r\n];\r\n\r\nexport const ROWS = {\r\n  home: [\r\n    {\r\n      name: \"轮播推荐\",\r\n      id: \"home.swipe\",\r\n      image: \"\",\r\n      selectableGrids: [GRIDS.homeSwipe]\r\n    },\r\n    {\r\n      name: \"公告\",\r\n      id: \"home.announcement\",\r\n      image: \"\",\r\n      selectableGrids: [GRIDS.announcement]\r\n    },\r\n    {\r\n      name: \"博客列表1\",\r\n      id: \"home.blogList\",\r\n      image: \"\",\r\n      selectableGrids: [GRIDS.blogList, GRIDS.adList]\r\n    },\r\n    {\r\n      name: \"书籍列表\",\r\n      id: \"home.bookList\",\r\n      image: \"\",\r\n      hasHeaderLine: true,\r\n      selectableGrids: [GRIDS.bookFlatList, GRIDS.bookList],\r\n      editItems: ROW_EDIT_ITEMS\r\n    },\r\n    {\r\n      name: \"工具列表\",\r\n      hasHeaderLine: true,\r\n      id: \"home.programList\",\r\n      image: \"\",\r\n      selectableGrids: [GRIDS.programFlatList],\r\n      editItems: ROW_EDIT_ITEMS\r\n    }\r\n  ],\r\n  program: [\r\n    {\r\n      name: \"工具头推\",\r\n      id: \"program.head\",\r\n      image: \"\",\r\n      selectableGrids: [GRIDS.programTop]\r\n    },\r\n    {\r\n      name: \"工具列表\",\r\n      id: \"program.list\",\r\n      image: \"\",\r\n      selectableGrids: [GRIDS.programList],\r\n      editItems: [ROW_EDIT_ITEMS[0]]\r\n    }\r\n  ],\r\n  blog: [\r\n    {\r\n      name: \"横屏广告\",\r\n      id: \"blog.adBanner\",\r\n      image: \"\",\r\n      selectableGrids: [GRIDS.allPageBannerAd]\r\n    },\r\n    {\r\n      name: \"推荐列表\",\r\n      id: \"blog.recommends\",\r\n      image: \"\",\r\n      selectableGrids: [GRIDS.blogRecommendList]\r\n    },\r\n    {\r\n      name: \"博客头推\",\r\n      id: \"blog.head\",\r\n      image: \"\",\r\n      selectableGrids: [GRIDS.blogTop]\r\n    },\r\n    {\r\n      name: \"博客列表\",\r\n      id: \"blog.list\",\r\n      image: \"\",\r\n      selectableGrids: [GRIDS.blogVList, GRIDS.adList]\r\n    }\r\n  ],\r\n  book: [\r\n    {\r\n      name: \"书籍头推\",\r\n      id: \"book.head\",\r\n      image: \"\",\r\n      selectableGrids: [GRIDS.bookTop]\r\n    },\r\n    {\r\n      name: \"书籍列表\",\r\n      id: \"book.list\",\r\n      image: \"\",\r\n      selectableGrids: [GRIDS.bookHList],\r\n      editItems: [ROW_EDIT_ITEMS[0]]\r\n    }\r\n  ]\r\n};\r\n\r\nexport const SEARCH_TYPE = {\r\n  IMAGE: \"image\",\r\n  LOGO: \"logo\",\r\n  ICON: \"icon\",\r\n  AD: \"ad\",\r\n  SWIPE_BANNER: \"swipeBanner\",\r\n  BOOK: \"book\",\r\n  PROGRAM: \"program\",\r\n  BLOG: \"blog\",\r\n  VIDEO_BLOG: \"videoBlog\",\r\n  TEXT_BLOG: \"textBlog\"\r\n};\r\n\r\nexport const OBJS = [\r\n  { searchType: SEARCH_TYPE.BLOG, btnText: \"博客\", baseLinkUrl: \"/blog/\" },\r\n  {\r\n    searchType: SEARCH_TYPE.PROGRAM,\r\n    btnText: \"工具\",\r\n    baseLinkUrl: \"/program/\"\r\n  },\r\n  { searchType: SEARCH_TYPE.BOOK, btnText: \"书籍\", baseLinkUrl: \"/book/\" }\r\n];\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Slider from \"react-slick\";\r\nimport _map from \"lodash/map\";\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\n\r\nconst Container = styled.div`\r\n  .slick-dots {\r\n    margin-bottom: 40px;\r\n  }\r\n  .slick-dots li.slick-active button:before {\r\n    color: red;\r\n    font-size: 18px;\r\n  }\r\n  .slick-dots li button:before {\r\n    color: white;\r\n  }\r\n`;\r\n\r\nconst SwipeImage = styled.img``;\r\n\r\nconst SwipeItemBox = styled.div`\r\n  cursor: pointer;\r\n  position: relative;\r\n`;\r\n\r\nconst RecommendContainer = styled.div`\r\n  position: absolute;\r\n  bottom: 40px;\r\n  left: 80px;\r\n`;\r\n\r\nconst RecommendText = styled.div`\r\n  color: white;\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n`;\r\n\r\nconst Recommend = ({ label, text }) => {\r\n  return text ? (\r\n    <RecommendContainer>\r\n      <RecommendText>{text}</RecommendText>\r\n    </RecommendContainer>\r\n  ) : null;\r\n};\r\n\r\nconst isLinkUrl = url => {\r\n  return url.indexOf(\"http\") < 0;\r\n};\r\n\r\nconst SwipeItem = ({ width, height, item, onGoTo }) => {\r\n  return (\r\n    <SwipeItemBox\r\n      onClick={() =>\r\n        isLinkUrl(item.linkUrl)\r\n          ? onGoTo(item.linkUrl)\r\n          : window.open(item.linkUrl)\r\n      }\r\n    >\r\n      <Recommend text={item.recommendText} label={item.recommendLabel} />\r\n      <SwipeImage width={width} height={height} src={item.url} />\r\n    </SwipeItemBox>\r\n  );\r\n};\r\n\r\nconst SwipeItems = ({ items, width, height, onGoTo }) => {\r\n  const swipeItemKey = Math.random().toString();\r\n  return (\r\n    <Container style={{ width, height }}>\r\n      <Slider\r\n        dots={true}\r\n        infinite={true}\r\n        speed={500}\r\n        slidesToShow={1}\r\n        slidesToScroll={1}\r\n      >\r\n        {_map(items, item => {\r\n          return (\r\n            <SwipeItem\r\n              key={swipeItemKey + item.index}\r\n              item={item}\r\n              width={width}\r\n              height={height}\r\n              onGoTo={onGoTo}\r\n            />\r\n          );\r\n        })}\r\n      </Slider>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SwipeItems;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Avatar from \"../../common/Avatar\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Tooltip } from \"antd\";\r\n\r\nconst Container = styled.div`\r\n  cursor: pointer;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  height: 30px;\r\n  margin-bottom: 10px;\r\n  padding-top: 20px;\r\n  padding-bottom: 30px;\r\n  border-bottom: 1px solid #f0c5c5;\r\n  margin-right: 10px;\r\n  margin-left: 10px;\r\n  &:hover {\r\n    .recommend_text {\r\n      color: #ed4259;\r\n    }\r\n  }\r\n`;\r\n\r\nconst RecommendText = styled.div`\r\n  font-size: 16px;\r\n  height: 34px;\r\n  line-height: 34px;\r\n  color: #333333;\r\n`;\r\n\r\nconst LabelBox = styled.div`\r\n  height: 34px;\r\n  width: 34px;\r\n  line-height: 34px;\r\n  text-align: center;\r\n  background-color: ${props => props.bgColor};\r\n  color: ${props => props.color};\r\n  margin-right: 10px;\r\n  font-size: 20px;\r\n`;\r\n\r\nconst getBgColor = index => {\r\n  switch (index) {\r\n    case 0:\r\n      return \"#F43636\";\r\n    case 1:\r\n      return \"#F2A56C\";\r\n    case 2:\r\n      return \"#E6BF25\";\r\n    default:\r\n      return \"#cecece\";\r\n  }\r\n};\r\n\r\nconst RecommendLabel = ({ index }) => {\r\n  return (\r\n    <LabelBox\r\n      bgColor={getBgColor(index)}\r\n      color={index < 3 ? \"white\" : \"#575252\"}\r\n    >\r\n      {index + 1}\r\n    </LabelBox>\r\n  );\r\n};\r\n\r\nconst ItemBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  width: 100%;\r\n`;\r\n\r\nconst RecommendContent = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst RecommendItem = ({ recommend, index }) => {\r\n  const { recommendText, creator, linkUrlItem, linkUrl } = recommend;\r\n  const recommendLengthLargerThan10 =\r\n    recommendText && recommendText.length > 12;\r\n  return (\r\n    <Container>\r\n      <ItemBox>\r\n        <Link to={linkUrl}>\r\n          <RecommendContent>\r\n            <RecommendLabel index={index} />\r\n            <RecommendText className={\"recommend_text\"}>\r\n              {recommendLengthLargerThan10 ? (\r\n                <Tooltip title={recommendText}>\r\n                  {recommendText.slice(0, 12)}...\r\n                </Tooltip>\r\n              ) : (\r\n                recommendText\r\n              )}\r\n            </RecommendText>\r\n          </RecommendContent>\r\n        </Link>\r\n        <Avatar avatar={creator.avatar} />\r\n      </ItemBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default RecommendItem;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _map from \"lodash/map\";\r\nimport RecommendItem from \"./RecommendItem\";\r\n\r\nconst Container = styled.div`\r\n  flex: 1;\r\n  margin-left: 10px;\r\n  background-color: #f0f8fa;\r\n  position: relative;\r\n  padding-top: 40px;\r\n`;\r\n\r\nconst RankHead = styled.div`\r\n  background-color: #84bf96;\r\n  position: absolute;\r\n  width: 102%;\r\n  display: flex;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 6px;\r\n  top: -10px;\r\n  left: -1%;\r\n  text-shadow: 2px 2px 2px #bbb;\r\n  box-shadow: 0 8px 10px #bbb;\r\n  border-radius: 6px 6px 10px 10px;\r\n`;\r\n\r\nconst RankHeadText = styled.div`\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  color: white;\r\n`;\r\n\r\nconst HomeSwipeGridRecommends = ({ recommends }) => {\r\n  return (\r\n    <Container>\r\n      <RankHead>\r\n        <RankHeadText>热门推荐</RankHeadText>\r\n      </RankHead>\r\n      {_map(recommends, recommend => {\r\n        return (\r\n          <RecommendItem\r\n            index={recommend.index}\r\n            recommend={recommend}\r\n            key={\"home_recommend_\" + recommend.index}\r\n          />\r\n        );\r\n      })}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default HomeSwipeGridRecommends;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport SwipeItems from \"../common/SwipeItems\";\r\nimport _get from \"lodash/get\";\r\nimport HomeSwipeGridRecommends from \"./home/HomeSwipeGridRecommends\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst HomeSwipeGrid = ({ grid, onGoTo }) => {\r\n  console.log(\"grid_________________\", grid);\r\n  return (\r\n    <Container>\r\n      <SwipeItems\r\n        width={1000}\r\n        onGoTo={onGoTo}\r\n        height={475}\r\n        items={_get(grid, \"items\", [])}\r\n      />\r\n      <HomeSwipeGridRecommends recommends={_get(grid, \"recommends\", [])} />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default HomeSwipeGrid;\r\n","export const chunkTo = (content, len = 90) => {\r\n  if (!content) {\r\n    return \"\";\r\n  }\r\n  if (content.length > len) {\r\n    return content.substr(0, len) + \"...\";\r\n  }\r\n  return content;\r\n};\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Avatar from \"../common/Avatar\";\r\nimport _get from \"lodash/get\";\r\nimport { Icon } from \"semantic-ui-react\";\r\nimport { BLOG } from \"../../../common/CONSULT\";\r\nimport { chunkTo } from \"../../../utils/textUtils\";\r\n\r\nconst Container = styled.div`\r\n  position: relative;\r\n  display: flex;\r\n  background-color: white;\r\n  cursor: pointer;\r\n  &:hover {\r\n    box-shadow: 0 8px 20px #bbb;\r\n    .blog_title {\r\n      color: #fb6b84;\r\n    }\r\n  }\r\n  flex: 1;\r\n  margin-bottom: 12px;\r\n`;\r\n\r\nconst ImageBox = styled.div``;\r\n\r\nconst CoverImage = styled.img``;\r\n\r\nconst Cover = ({ url }) => {\r\n  return (\r\n    <ImageBox>\r\n      <CoverImage src={url} width={240} height={160} />\r\n    </ImageBox>\r\n  );\r\n};\r\n\r\nconst FooterBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 6px;\r\n`;\r\n\r\nconst FooterItem = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-right: 20px;\r\n`;\r\n\r\nconst Text = styled.div`\r\n  margin-left: 16px;\r\n`;\r\n\r\nconst Footer = ({ item }) => {\r\n  return (\r\n    <FooterBox>\r\n      <FooterItem>\r\n        <Avatar url={_get(item, \"creator.avatar.url\", \"\")} />\r\n        <Text>{_get(item, \"creator.username\", \"-username-\")}</Text>\r\n      </FooterItem>\r\n      <FooterItem>\r\n        <Icon name={\"calendar alternate outline\"} />\r\n        <Text>{_get(item, \"dateCreated\", \"-date-\")}</Text>\r\n      </FooterItem>\r\n      <FooterItem>\r\n        <Icon name={\"heart outline\"} />\r\n        <Text>{_get(item, \"upCount\", \"-like-\")}</Text>\r\n      </FooterItem>\r\n      <FooterItem>\r\n        <Icon name={\"eye\"} />\r\n        <Text>{_get(item, \"readCount\", \"-read-\")}</Text>\r\n      </FooterItem>\r\n    </FooterBox>\r\n  );\r\n};\r\n\r\nconst ContentBox = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  padding-left: 10px;\r\n  padding-top: 14px;\r\n  padding-bottom: 8px;\r\n  width: 100%;\r\n`;\r\n\r\nconst VideoIcon = styled(Icon)``;\r\nconst ArticleIcon = styled(Icon)``;\r\n\r\nconst Title = styled.div`\r\n  font-size: 18px;\r\n  color: #333333;\r\n  font-weight: 700;\r\n  line-height: 22px;\r\n`;\r\n\r\nconst Description = styled.div`\r\n  flex: 1;\r\n  margin-top: 8px;\r\n  color: #999;\r\n  text-align: left;\r\n  margin-right: 40px;\r\n`;\r\n\r\nconst ContentHeader = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  justify-content: space-between;\r\n  padding-right: 20px;\r\n`;\r\nconst BlogListItem = ({ item, onGoTo }) => {\r\n  const { id, cover, title, description, type } = item;\r\n  return (\r\n    <Container onClick={() => onGoTo(`${BLOG}${id}`)}>\r\n      <Cover url={_get(cover, \"url\")} />\r\n      <ContentBox>\r\n        <ContentHeader>\r\n          <Title className={\"blog_title\"}>{title}</Title>\r\n          {type === \"Video\" && <VideoIcon name={\"video camera\"} />}\r\n          {type === \"Article\" && <ArticleIcon name={\"address book outline\"} />}\r\n        </ContentHeader>\r\n        <Description>{chunkTo(description, 120)}</Description>\r\n        <Footer item={item} />\r\n      </ContentBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BlogListItem;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _map from \"lodash/map\";\r\nimport _get from \"lodash/get\";\r\nimport BlogListItem from \"../item/BlogListItem\";\r\n\r\nconst Container = styled.div`\r\n  margin-right: 20px;\r\n  background-color: whitesmoke;\r\n`;\r\n\r\nconst BlogListGrid = ({ grid, onGoTo }) => {\r\n  const items = _get(grid, \"items\", []);\r\n  const randKey = Math.random().toString();\r\n  return (\r\n    <Container>\r\n      {_map(items, item => {\r\n        return (\r\n          <BlogListItem\r\n            item={item}\r\n            key={randKey + item.index}\r\n            onGoTo={onGoTo}\r\n          />\r\n        );\r\n      })}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BlogListGrid;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div`\r\n  background-color: ${props => props.bgColor || \"red\"};\r\n  border-bottom-right-radius: 30px;\r\n  border-top-right-radius: 30px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 30px;\r\n  padding: 0 16px;\r\n  box-shadow: 2px 2px 5px #333333;\r\n`;\r\n\r\nconst Text = styled.div`\r\n  color: white;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n`;\r\n\r\nconst SemicircleLabel = ({ bgColor, title }) => {\r\n  return (\r\n    <Container bgColor={bgColor}>\r\n      <Text>{title}</Text>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SemicircleLabel;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _map from \"lodash/map\";\r\nimport _mapValues from \"lodash/mapValues\";\r\nimport _chunk from \"lodash/chunk\";\r\nimport Space from \"../../../common/Space\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst RowBox = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst useFlatList = ({ items, columnsInRow = 4, gap, gapX, gapY }) => {\r\n  let itemsArr = [];\r\n  if (typeof items === \"object\") {\r\n    _mapValues(items, value => {\r\n      itemsArr.push(value);\r\n    });\r\n  } else {\r\n    itemsArr = items;\r\n  }\r\n  let itemsLength = itemsArr.length;\r\n\r\n  const coverPositionSize = columnsInRow - (itemsLength % columnsInRow);\r\n  let newItems = itemsArr;\r\n  if (coverPositionSize > 0) {\r\n    for (let i = 0; i < coverPositionSize; i++) {\r\n      newItems.push({ isPosition: true, index: Math.random().toString() });\r\n    }\r\n  }\r\n  const rows = _chunk(newItems, columnsInRow);\r\n  return { rows, itemsLength, gX: gapX || gap, gY: gapY || gap };\r\n};\r\n\r\nconst Position = styled.div`\r\n  width: ${props => props.width}px;\r\n  ${props => (props.isFlexItem ? \"flex:1;\" : \"\")}\r\n`;\r\n\r\nconst FlatList = ({\r\n  items = [],\r\n  gap,\r\n  gapX,\r\n  gapY,\r\n  renderItem,\r\n  itemWidth,\r\n  columnsInRow = 4,\r\n  isFlexItem = false\r\n}) => {\r\n  const { rows, itemsLength, gX, gY } = useFlatList({\r\n    items,\r\n    columnsInRow,\r\n    gap,\r\n    gapX,\r\n    gapY\r\n  });\r\n\r\n  return (\r\n    <Container>\r\n      {_map(rows, (row, index) => {\r\n        const isLastRow = index === rows.length - 1;\r\n        return (\r\n          <>\r\n            <RowBox key={Math.random().toString()}>\r\n              {_map(row, (item, itemIndex) => {\r\n                const isLastItem = itemIndex === row.length - 1;\r\n                if (item.isPosition) {\r\n                  return (\r\n                    <>\r\n                      <Position\r\n                        isFlexItem={isFlexItem}\r\n                        width={itemWidth}\r\n                        key={Math.random().toString()}\r\n                      />\r\n                      {!isLastItem && gX && <Space width={gX} />}\r\n                    </>\r\n                  );\r\n                }\r\n                return (\r\n                  <>\r\n                    {renderItem({\r\n                      item,\r\n                      isLastRow: index + 1 === rows.length,\r\n                      isLastOne:\r\n                        index * columnsInRow + itemIndex + 1 === itemsLength\r\n                    })}\r\n                    {!isLastItem && gX && <Space width={gX} />}\r\n                  </>\r\n                );\r\n              })}\r\n            </RowBox>\r\n            {!isLastRow && gY && <Space height={gY} />}\r\n          </>\r\n        );\r\n      })}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default FlatList;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _get from \"lodash/get\";\r\nimport { _getByRank } from \"../../../utils/utils\";\r\nimport { BOOK } from \"../../../common/CONSULT\";\r\n\r\nconst Container = styled.div`\r\n  padding: 0 8px;\r\n  cursor: pointer;\r\n  &:hover {\r\n    .cover_image {\r\n      box-shadow: 0 8px 20px #bbb;\r\n    }\r\n    .book_name {\r\n      color: #fb6b84;\r\n    }\r\n  }\r\n`;\r\n\r\nconst CoverImage = styled.img`\r\n  border-bottom-right-radius: 5px;\r\n  border-top-right-radius: 10px;\r\n`;\r\n\r\nconst Name = styled.div`\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  margin-top: 10px;\r\n`;\r\n\r\nconst Author = styled.div`\r\n  margin-top: 10px;\r\n  color: #666;\r\n  font: 14px / 24px \"Microsoft YaHei\", 微软雅黑, SimSun, tahoma, arial;\r\n`;\r\n\r\nconst BookItem = ({ item, onGoTo }) => {\r\n  return (\r\n    <Container onClick={() => onGoTo(`${BOOK}${item.id}`)}>\r\n      <CoverImage\r\n        className={\"cover_image\"}\r\n        width={200}\r\n        height={240}\r\n        src={_get(item, \"cover.url\")}\r\n      />\r\n      <Name className={\"book_name\"}>{_get(item, \"name\")}</Name>\r\n      <Author>\r\n        {_getByRank(item, [\"creator.nickname\", \"creator.username\"])}/ 著\r\n      </Author>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BookItem;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport SemicircleLabel from \"../common/SemicircleLabel\";\r\nimport FlatList from \"../common/FlatList\";\r\nimport _get from \"lodash/get\";\r\nimport BookItem from \"../item/BookItem\";\r\nimport Space from \"../../../common/Space\";\r\n\r\nconst Container = styled.div`\r\n  margin-right: 16px;\r\n`;\r\n\r\nconst LabelBox = styled.div`\r\n  margin-top: 10px;\r\n  margin-bottom: 4px;\r\n  display: flex;\r\n`;\r\n\r\nconst BookFlatListGrid = ({ grid, onGoTo }) => {\r\n  const items = _get(grid, \"items\", []);\r\n  return (\r\n    <Container>\r\n      <LabelBox>\r\n        <SemicircleLabel\r\n          title={grid.title || \"标签\"}\r\n          bgColor={grid.labelColor}\r\n        />\r\n      </LabelBox>\r\n      <Space height={\"16px\"} />\r\n      <FlatList\r\n        items={items}\r\n        columnsInRow={2}\r\n        itemWidth={200}\r\n        gapX={\"20px\"}\r\n        gapY={\"20px\"}\r\n        renderItem={({ item }) => {\r\n          return (\r\n            <BookItem\r\n              onGoTo={onGoTo}\r\n              item={item}\r\n              key={Math.random().toString()}\r\n            />\r\n          );\r\n        }}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BookFlatListGrid;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _map from \"lodash/map\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { SEARCH } from \"../../../common/CONSULT\";\r\n\r\nconst COLOR_LIST = [\r\n  \"magenta\",\r\n  \"red\",\r\n  \"lightgreen\",\r\n  \"orange\",\r\n  \"gold\",\r\n  \"lime\",\r\n  \"green\",\r\n  \"cyan\",\r\n  \"blue\",\r\n  \"pink\",\r\n  \"purple\"\r\n];\r\n\r\nconst getRandomColor = () => {\r\n  const randomIndex = parseInt((Math.random() * 11).toString());\r\n  return COLOR_LIST[randomIndex];\r\n};\r\n\r\nconst TagBox = styled.div`\r\n  display: flex;\r\n  cursor: pointer;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: ${props => props.color};\r\n  border: 1px solid ${props => props.color};\r\n  padding: 4px 8px;\r\n  &:hover {\r\n    box-shadow: 0 2px 4px ${props => props.color};\r\n  }\r\n`;\r\n\r\nconst TagText = styled.div`\r\n  color: ${props => props.color};\r\n`;\r\n\r\nconst Tag = ({ tag }) => {\r\n  const { id, name, type } = tag;\r\n  const color = getRandomColor();\r\n  return (\r\n    <TagBox style={{ borderRadius: 18, margin: 6 }} color={color}>\r\n      <TagText color={color}>{name}</TagText>\r\n    </TagBox>\r\n  );\r\n};\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\nconst Tags = ({ tags }) => {\r\n  return (\r\n    <Container>\r\n      {_map(tags, (tag, index) => {\r\n        return (\r\n          <Link\r\n            key={\"tag_\" + index}\r\n            to={{\r\n              pathname: SEARCH,\r\n              state: {\r\n                selectedTag: tag\r\n              }\r\n            }}\r\n          >\r\n            <Tag tag={tag} />\r\n          </Link>\r\n        );\r\n      })}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Tags;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Avatar from \"../common/Avatar\";\r\nimport _get from \"lodash/get\";\r\nimport Tags from \"../common/Tags\";\r\nimport { BOOK } from \"../../../common/CONSULT\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  border-bottom: 1px solid\r\n    ${props => (props.isLastOne ? \"transparent\" : \"#cecece\")};\r\n  padding-bottom: 20px;\r\n  margin-bottom: 16px;\r\n  cursor: pointer;\r\n  width: 100%;\r\n\r\n  &:hover {\r\n    box-shadow: 0px 7px 7px -7px #bbb;\r\n    border-bottom: 1px solid transparent;\r\n    .book_name {\r\n      color: #fb6b84;\r\n    }\r\n    .cover_img {\r\n      box-shadow: 0 8px 20px #bbb;\r\n    }\r\n  }\r\n`;\r\n\r\nconst CoverImage = styled.img`\r\n  border-top-right-radius: 6px;\r\n  border-bottom-right-radius: 4px;\r\n`;\r\n\r\nconst ContentBox = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-left: 18px;\r\n  width: 100%;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  font-weight: bold;\r\n  font-size: 22px;\r\n  margin-bottom: 10px;\r\n  margin-top: 6px;\r\n  align-self: flex-start;\r\n`;\r\n\r\nconst Description = styled.div`\r\n  color: gray;\r\n  flex: 1;\r\n`;\r\n\r\nconst FooterBox = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`;\r\n\r\nconst LeftBox = styled.div``;\r\n\r\nconst RightBox = styled.div`\r\n  margin-right: 20px;\r\n`;\r\n\r\nconst FooterItem = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst TextCount = styled.div`\r\n  color: #666;\r\n`;\r\n\r\nconst Text = styled.div`\r\n  margin-left: 16px;\r\n  color: #666;\r\n  font: 14px / 24px \"Microsoft YaHei\", 微软雅黑, SimSun, tahoma, arial;\r\n`;\r\n\r\nconst Footer = ({ item }) => {\r\n  const tags = _get(item, \"tags\", []);\r\n  return (\r\n    <FooterBox>\r\n      <LeftBox>\r\n        <FooterItem>\r\n          <Avatar url={_get(item, \"creator.avatar.url\", \"\")} />\r\n          <Text>{_get(item, \"creator.username\", \"-username-\")}</Text>\r\n        </FooterItem>\r\n      </LeftBox>\r\n      <RightBox>\r\n        <FooterItem>\r\n          <Tags tags={tags} />\r\n        </FooterItem>\r\n        <FooterItem>\r\n          <TextCount>250万字</TextCount>\r\n        </FooterItem>\r\n      </RightBox>\r\n    </FooterBox>\r\n  );\r\n};\r\n\r\nconst BookListItem = ({ item, isLastOne, onGoTo }) => {\r\n  const {\r\n    id,\r\n    name,\r\n    intro,\r\n    cover: { url }\r\n  } = item;\r\n  return (\r\n    <Container onClick={() => onGoTo(`${BOOK}${id}`)} isLastOne={isLastOne}>\r\n      <CoverImage className={\"cover_img\"} width={120} height={154} src={url} />\r\n      <ContentBox>\r\n        <Title className={\"book_name\"}>{name}</Title>\r\n        <Description>{intro}</Description>\r\n        <Footer item={item} />\r\n      </ContentBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BookListItem;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _get from \"lodash/get\";\r\nimport FlatList from \"../common/FlatList\";\r\nimport BookListItem from \"../item/BookListItem\";\r\n\r\nconst Container = styled.div``;\r\n\r\nconst GridTitle = styled.div`\r\n  font-size: 20px;\r\n  font-weight: bolder;\r\n  width: 100%;\r\n  text-align: left;\r\n  margin-bottom: 28px;\r\n  margin-top: 12px;\r\n`;\r\n\r\nconst BookListGrid = ({ grid, onGoTo }) => {\r\n  const items = _get(grid, \"items\", []);\r\n  return (\r\n    <Container>\r\n      <GridTitle>{_get(grid, \"title\", \"标题\")}</GridTitle>\r\n      <FlatList\r\n        items={items}\r\n        columnsInRow={1}\r\n        gapY={\"14px\"}\r\n        renderItem={({ item, isLastOne }) => (\r\n          <BookListItem\r\n            key={Math.random().toString()}\r\n            item={item}\r\n            onGoTo={onGoTo}\r\n            isLastOne={isLastOne}\r\n          />\r\n        )}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BookListGrid;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst AdImage = styled.img`\r\n  object-fit: contain;\r\n  width: 100%;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n  &:hover {\r\n  }\r\n  margin: 10px;\r\n`;\r\n\r\nconst AdItem = ({ item }) => {\r\n  return (\r\n    <Container>\r\n      <AdImage src={item.url} />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default AdItem;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _get from \"lodash/get\";\r\nimport _isEmpty from \"lodash/isEmpty\";\r\nimport _map from \"lodash/map\";\r\nimport { AppContext } from \"../../../../App\";\r\nimport Tags from \"../common/Tags\";\r\nimport AdItem from \"../item/AdItem\";\r\n\r\nconst Container = styled.div``;\r\n\r\nconst PanelBox = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n`;\r\n\r\nconst PanelTitle = styled.div`\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  margin-bottom: 8px;\r\n`;\r\n\r\nconst AdsGridChildrenPanel = ({ title, children }) => {\r\n  return (\r\n    <PanelBox>\r\n      <PanelTitle>{title}</PanelTitle>\r\n      {children}\r\n    </PanelBox>\r\n  );\r\n};\r\n\r\nconst Content = styled.div``;\r\n\r\nconst AdsGrid = ({\r\n  tagsKey = \"homeTags\",\r\n  tagTitle = \"热门标签\",\r\n  grid,\r\n  onGoTo\r\n}) => {\r\n  const items = _get(grid, \"items\", []);\r\n  return (\r\n    <Container>\r\n      <AppContext.Consumer>\r\n        {({ pageForm }) => {\r\n          const tags = _get(pageForm, tagsKey, []);\r\n          return (\r\n            <Content>\r\n              {!_isEmpty(tags) && (\r\n                <AdsGridChildrenPanel title={tagTitle}>\r\n                  <Tags tags={tags} />\r\n                </AdsGridChildrenPanel>\r\n              )}\r\n              {_map(items, item => {\r\n                return <AdItem item={item} key={item.index} />;\r\n              })}\r\n            </Content>\r\n          );\r\n        }}\r\n      </AppContext.Consumer>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default AdsGrid;\r\n","import React from \"react\";\r\nimport { Rating } from \"semantic-ui-react\";\r\nimport styled from \"styled-components\";\r\nimport { PROGRAM } from \"../../../common/CONSULT\";\r\n\r\nconst Container = styled.div`\r\n  cursor: pointer;\r\n  margin-bottom: 14px;\r\n  &:hover {\r\n    .cover_img {\r\n      box-shadow: 0 8px 20px #bbb;\r\n    }\r\n    .program_name {\r\n      color: #fb6b84;\r\n    }\r\n    .p_star {\r\n      color: yellow !important;\r\n    }\r\n  }\r\n`;\r\n\r\nconst Cover = styled.div`\r\n  position: relative;\r\n`;\r\n\r\nconst CoverImage = styled.img`\r\n  width: 300px;\r\n  height: 200px;\r\n`;\r\n\r\nconst CoverHint = styled.div`\r\n  position: absolute;\r\n`;\r\n\r\nconst BottomBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding-left: 10px;\r\n  padding-right: 10px;\r\n  width: 300px;\r\n  margin-top: 16px;\r\n  font-size: 24px;\r\n`;\r\n\r\nconst Name = styled.div`\r\n  font-weight: bold;\r\n  font-size: 18px;\r\n`;\r\n\r\nconst ProgramItem = ({ item, onGoTo }) => {\r\n  const {\r\n    id,\r\n    name,\r\n    averageScore,\r\n    cover: { url }\r\n  } = item;\r\n  return (\r\n    <Container\r\n      onClick={() => {\r\n        onGoTo(`${PROGRAM}` + id);\r\n      }}\r\n    >\r\n      <Cover>\r\n        <CoverImage\r\n          className={\"cover_img\"}\r\n          width={300}\r\n          height={200}\r\n          src={url}\r\n        />\r\n        <CoverHint />\r\n      </Cover>\r\n      <BottomBox>\r\n        <Name className={\"program_name\"}>{name}</Name>\r\n        <Rating\r\n          className={\"p_star\"}\r\n          disabled\r\n          rating={averageScore}\r\n          maxRating={5}\r\n        />\r\n      </BottomBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ProgramItem;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _get from \"lodash/get\";\r\nimport ProgramItem from \"../item/ProgramItem\";\r\nimport FlatList from \"../common/FlatList\";\r\nconst Container = styled.div`\r\n  margin-bottom: 10px;\r\n`;\r\n\r\nconst ProgramFlatListGrid = ({ grid, onGoTo }) => {\r\n  const items = _get(grid, \"items\", []);\r\n  return (\r\n    <Container>\r\n      <FlatList\r\n        items={items}\r\n        itemWidth={300}\r\n        renderItem={({ item }) => (\r\n          <ProgramItem item={item} key={item.index} onGoTo={onGoTo} />\r\n        )}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ProgramFlatListGrid;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { PROGRAM } from \"../../../common/CONSULT\";\r\n\r\nconst Container = styled.div`\r\n  cursor: pointer;\r\n  position: relative;\r\n  flex: 1;\r\n  &:hover {\r\n    .cover_img {\r\n      box-shadow: 0 8px 20px #bbb;\r\n    }\r\n    .program_name {\r\n      color: #333333;\r\n      font-size: 18px;\r\n    }\r\n    .name_box {\r\n      background: transparent;\r\n    }\r\n  }\r\n`;\r\n\r\nconst CoverImage = styled.img`\r\n  height: 200px;\r\n  width: 100%;\r\n`;\r\n\r\nconst Name = styled.div`\r\n  color: white;\r\n  font-weight: bold;\r\n  font-size: 16px;\r\n  width: 100%;\r\n  text-align: center;\r\n  z-index: 100;\r\n`;\r\n\r\nconst NameBox = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  padding: 4px 12px 10px;\r\n  display: flex;\r\n  align-items: flex-end;\r\n  justify-content: center;\r\n  background: linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.3));\r\n`;\r\n\r\nconst ProgramRecommendItem = ({ item, onGoTo }) => {\r\n  const {\r\n    cover: { url },\r\n    name,\r\n    id,\r\n    recommendText\r\n  } = item;\r\n  return (\r\n    <Container onClick={() => onGoTo(`${PROGRAM}${id}`)}>\r\n      <CoverImage className={\"cover_img\"} src={url} />\r\n      <NameBox className={\"name_box\"}>\r\n        <Name className={\"program_name\"}>{recommendText || name}</Name>\r\n      </NameBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ProgramRecommendItem;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport ProgramRecommendItem from \"../../item/ProgramRecommendItem\";\r\nimport FlatList from \"../../common/FlatList\";\r\nimport _get from \"lodash/get\";\r\n\r\nconst Container = styled.div`\r\n  margin-left: 10px;\r\n`;\r\n\r\nconst ProgramTopGridVRecommends = ({ grid, onGoTo }) => {\r\n  return (\r\n    <Container>\r\n      <FlatList\r\n        items={_get(grid, \"rightRecommends\", [])}\r\n        itemWidth={290}\r\n        columnsInRow={1}\r\n        gapY={\"6px\"}\r\n        renderItem={({ item }) => {\r\n          return (\r\n            <ProgramRecommendItem\r\n              item={item}\r\n              key={Math.random().toString()}\r\n              onGoTo={onGoTo}\r\n            />\r\n          );\r\n        }}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ProgramTopGridVRecommends;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport ProgramRecommendItem from \"../../item/ProgramRecommendItem\";\r\nimport _get from \"lodash/get\";\r\nimport FlatList from \"../../common/FlatList\";\r\n\r\nconst Container = styled.div`\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst ProgramTopGridHRecommends = ({ grid, onGoTo }) => {\r\n  return (\r\n    <Container>\r\n      <FlatList\r\n        items={_get(grid, \"bottomRecommends\", [])}\r\n        columnsInRow={4}\r\n        gapX={\"10px\"}\r\n        isFlexItem={true}\r\n        renderItem={({ item }) => {\r\n          return (\r\n            <ProgramRecommendItem\r\n              onGoTo={onGoTo}\r\n              item={item}\r\n              key={Math.random().toString()}\r\n            />\r\n          );\r\n        }}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ProgramTopGridHRecommends;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport SwipeItems from \"../common/SwipeItems\";\r\nimport _get from \"lodash/get\";\r\nimport ProgramTopGridVRecommends from \"./program/ProgramTopGridVRecommends\";\r\nimport ProgramTopGridHRecommends from \"./program/ProgramTopGridHRecommends\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst SwipeBox = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst BottomBox = styled.div``;\r\n\r\nconst ProgramTopGrid = ({ grid, onGoTo }) => {\r\n  return (\r\n    <Container>\r\n      <SwipeBox>\r\n        <SwipeItems\r\n          width={972}\r\n          height={406}\r\n          onGoTo={onGoTo}\r\n          items={_get(grid, \"items\", [])}\r\n        />\r\n        <ProgramTopGridVRecommends grid={grid} onGoTo={onGoTo} />\r\n      </SwipeBox>\r\n      <BottomBox>\r\n        <ProgramTopGridHRecommends grid={grid} onGoTo={onGoTo} />\r\n      </BottomBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ProgramTopGrid;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Rating } from \"semantic-ui-react\";\r\nimport { PROGRAM } from \"../../../common/CONSULT\";\r\n\r\nconst Container = styled.div`\r\n  margin-left: 4px;\r\n  margin-right: 4px;\r\n  margin-bottom: 16px;\r\n  cursor: pointer;\r\n  &:hover {\r\n    .cover_img {\r\n      box-shadow: 0 8px 20px #bbb;\r\n    }\r\n    .program_name {\r\n      color: #fb6b84;\r\n    }\r\n    .ui.rating .active.icon {\r\n      color: goldenrod !important;\r\n    }\r\n  }\r\n`;\r\n\r\nconst CoverImage = styled.img`\r\n  width: 196px;\r\n  height: 170px;\r\n  object-fit: cover;\r\n`;\r\n\r\nconst BottomBox = styled.div`\r\n  margin-top: 4px;\r\n`;\r\n\r\nconst Name = styled.div`\r\n  font-size: 16px;\r\n  font-weight: 700;\r\n  color: black;\r\n  width: 100%;\r\n  text-align: left;\r\n`;\r\n\r\nconst RateBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-top: 6px;\r\n\r\n  .ui.rating .active.icon {\r\n    color: grey !important;\r\n  }\r\n`;\r\n\r\nconst RateNum = styled.div`\r\n  margin-left: 10px;\r\n  font-size: 10px;\r\n  color: grey;\r\n`;\r\n\r\nconst ProgramListItem = ({ item, onGoTo }) => {\r\n  const {\r\n    id,\r\n    name,\r\n    cover: { url },\r\n    averageScore,\r\n    scoreCount\r\n  } = item;\r\n  const hasScoreCount = scoreCount && scoreCount > 0.1;\r\n  return (\r\n    <Container\r\n      onClick={() => {\r\n        onGoTo(`${PROGRAM}${id}`);\r\n      }}\r\n    >\r\n      <CoverImage className={\"cover_img\"} src={url} />\r\n      <BottomBox>\r\n        <Name className={\"program_name\"}>{name}</Name>\r\n        <RateBox>\r\n          <Rating maxRating={5} disabled rating={averageScore} />\r\n          {hasScoreCount ? <RateNum>{scoreCount}</RateNum> : null}\r\n        </RateBox>\r\n      </BottomBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ProgramListItem;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _get from \"lodash/get\";\r\nimport ProgramListItem from \"../item/ProgramListItem\";\r\nimport FlatList from \"../common/FlatList\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  min-height: 60px;\r\n`;\r\n\r\nconst ProgramListGrid = ({ grid,onGoTo }) => {\r\n  return (\r\n    <Container>\r\n      <FlatList\r\n        columnsInRow={6}\r\n        itemWidth={200}\r\n        items={_get(grid, \"items\", [])}\r\n        renderItem={({ item }) => {\r\n          return <ProgramListItem onGoTo={onGoTo} item={item} key={Math.random().toString()} />;\r\n        }}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ProgramListGrid;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { BOOK } from \"../../../common/CONSULT\";\r\n\r\nconst Container = styled.div`\r\n  cursor: pointer;\r\n  position: relative;\r\n  flex: 1;\r\n  &:hover {\r\n    .blog_name {\r\n      color: #fb6b84;\r\n    }\r\n    .cover_img {\r\n      box-shadow: 0 8px 20px #bbb;\r\n    }\r\n  }\r\n`;\r\n\r\nconst CoverImage = styled.img`\r\n  height: 198px;\r\n  width: 100%;\r\n`;\r\n\r\nconst Name = styled.div`\r\n  position: absolute;\r\n  bottom: 10px;\r\n  color: white;\r\n  font-weight: bold;\r\n  font-size: 20px;\r\n  width: 100%;\r\n  text-align: center;\r\n  z-index: 100;\r\n`;\r\n\r\nconst BookRecommendItem = ({ item, onGoTo }) => {\r\n  const {\r\n    cover: { url },\r\n    name,\r\n    id,\r\n    recommendText\r\n  } = item;\r\n  return (\r\n    <Container onClick={() => onGoTo(`${BOOK}${id}`)}>\r\n      <CoverImage className={\"cover_img\"} src={url} />\r\n      <Name>{recommendText || name}</Name>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BookRecommendItem;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport BookRecommendItem from \"../../item/BookRecommendItem\";\r\nimport FlatList from \"../../common/FlatList\";\r\nimport _get from \"lodash/get\";\r\n\r\nconst Container = styled.div`\r\n  width: 340px;\r\n  margin-left: 6px;\r\n`;\r\n\r\nconst BookTopGridRecommends = ({ grid, onGoTo }) => {\r\n  return (\r\n    <Container>\r\n      <FlatList\r\n        items={_get(grid, \"recommends\", [])}\r\n        columnsInRow={2}\r\n        gap={\"4px\"}\r\n        isFlexItem={true}\r\n        renderItem={({ item }) => {\r\n          return (\r\n            <BookRecommendItem\r\n              onGoTo={onGoTo}\r\n              key={Math.random()}\r\n              item={item}\r\n            />\r\n          );\r\n        }}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BookTopGridRecommends;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport SwipeItems from \"../common/SwipeItems\";\r\nimport _get from \"lodash/get\";\r\nimport BookTopGridRecommends from \"./book/BookTopGridRecommends\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst BookTopGrid = ({ grid,onGoTo }) => {\r\n  return (\r\n    <Container>\r\n      <SwipeItems onGoTo={onGoTo} width={960} height={400} items={_get(grid, \"items\", [])} />\r\n      <BookTopGridRecommends onGoTo={onGoTo} grid={grid} />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BookTopGrid;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _get from \"lodash/get\";\r\nimport { _getByRank } from \"../../../utils/utils\";\r\nimport { BOOK } from \"../../../common/CONSULT\";\r\n\r\nconst Container = styled.div`\r\n  padding: 0 8px;\r\n  width: 180px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  margin-bottom: 12px;\r\n  &:hover {\r\n    .book_name {\r\n      color: #fb6b84;\r\n    }\r\n    .cover_img {\r\n      box-shadow: 0 8px 20px #bbb;\r\n    }\r\n  }\r\n`;\r\n\r\nconst CoverImage = styled.img``;\r\n\r\nconst Name = styled.div`\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  color: black;\r\n  margin-top: 6px;\r\n`;\r\n\r\nconst Author = styled.div`\r\n  margin-top: 4px;\r\n  color: #cecece;\r\n`;\r\n\r\nconst BookHListItem = ({ item, onGoTo }) => {\r\n  return (\r\n    <Container onClick={() => onGoTo(`${BOOK}${item.id}`)}>\r\n      <CoverImage\r\n        className={\"cover_img\"}\r\n        width={172}\r\n        height={200}\r\n        src={_get(item, \"cover.url\")}\r\n      />\r\n      <Name className={\"book_name\"}>{_get(item, \"name\")}</Name>\r\n      <Author>\r\n        {_getByRank(item, [\"creator.nickname\", \"creator.username\"])}/ 著\r\n      </Author>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BookHListItem;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport BookHListItem from \"../item/BookHListItem\";\r\nimport FlatList from \"../common/FlatList\";\r\nimport _get from \"lodash/get\";\r\nconst Container = styled.div``;\r\n\r\nconst BookHListGrid = ({ grid, onGoTo }) => {\r\n  return (\r\n    <Container>\r\n      <FlatList\r\n        items={_get(grid, \"items\", [])}\r\n        columnsInRow={7}\r\n        itemWidth={180}\r\n        renderItem={({ item }) => {\r\n          return (\r\n            <BookHListItem\r\n              onGoTo={onGoTo}\r\n              item={item}\r\n              key={Math.random().toString()}\r\n            />\r\n          );\r\n        }}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BookHListGrid;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _get from \"lodash/get\";\r\nimport { BLOG } from \"../../../common/CONSULT\";\r\n\r\nconst Container = styled.div`\r\n  flex-wrap: wrap;\r\n  &:hover {\r\n    .blog_name {\r\n      color: #fb6b84;\r\n    }\r\n    .cover_img {\r\n      box-shadow: 0 8px 20px #bbb;\r\n    }\r\n  }\r\n  cursor: pointer;\r\n  margin-bottom: 18px;\r\n`;\r\n\r\nconst CoverImage = styled.img`\r\n  width: 252px;\r\n  height: 160px;\r\n  margin-left: 4px;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  color: #333333;\r\n  margin-top: 2px;\r\n  align-items: flex-start;\r\n  text-align: left;\r\n  font-weight: bold;\r\n  margin-left: 4px;\r\n`;\r\n\r\nconst BlogRecommendListItem = ({ item, onGoTo }) => {\r\n  const { id, title } = item;\r\n  return (\r\n    <Container onClick={() => onGoTo(`${BLOG}${id}`)}>\r\n      <CoverImage className={\"cover_img\"} src={_get(item, \"cover.url\")} />\r\n      <Title className={\"blog_name\"}>{title}</Title>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BlogRecommendListItem;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport BlogRecommendListItem from \"../item/BlogRecommendListItem\";\r\nimport FlatList from \"../common/FlatList\";\r\nimport _get from \"lodash/get\";\r\n\r\nconst Container = styled.div``;\r\n\r\nconst BlogRecommendListGrid = ({ grid, onGoTo }) => {\r\n  return (\r\n    <Container>\r\n      <FlatList\r\n        items={_get(grid, \"items\", [])}\r\n        columnsInRow={5}\r\n        itemWidth={252}\r\n        renderItem={({ item }) => {\r\n          return (\r\n            <BlogRecommendListItem\r\n              key={Math.random().toString()}\r\n              onGoTo={onGoTo}\r\n              item={item}\r\n            />\r\n          );\r\n        }}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BlogRecommendListGrid;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst AdImage = styled.img`\r\n  width: 100%;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  margin: 10px;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst AllPageAdBannerItem = ({ item }) => {\r\n  return (\r\n    <Container>\r\n      <AdImage height={140} src={item.url} />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default AllPageAdBannerItem;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport AllPageAdBannerItem from \"../item/AllPageAdBannerItem\";\r\nimport _get from \"lodash/get\";\r\nimport _head from \"lodash/head\";\r\n\r\nconst Container = styled.div``;\r\n\r\nconst AllPageAdBanner = ({ grid }) => {\r\n  const item = _head(_get(grid, \"items\"));\r\n  return (\r\n    <Container>\r\n      <AllPageAdBannerItem item={item} />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default AllPageAdBanner;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _get from \"lodash/get\";\r\nimport { BLOG } from \"../../../../common/CONSULT\";\r\n\r\nconst Container = styled.div`\r\n  margin-bottom: 4px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  flex: 1;\r\n  &:hover {\r\n    .blog_name {\r\n      color: #fb6b84;\r\n    }\r\n  }\r\n`;\r\n\r\nconst CoverImage = styled.img`\r\n  width: 100%;\r\n  height: 90px;\r\n  object-fit: cover;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  color: white;\r\n  font-size: 14px;\r\n  text-align: left;\r\n`;\r\n\r\nconst ContentBox = styled.div`\r\n  position: absolute;\r\n  padding: 4px;\r\n  width: 100%;\r\n  z-index: 100;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.2);\r\n`;\r\n\r\nconst VideoRecommend = ({ item, onGoTo }) => {\r\n  const { id, title, description } = item;\r\n  return (\r\n    <Container\r\n      onClick={() => {\r\n        onGoTo(`${BLOG}${id}`);\r\n      }}\r\n    >\r\n      <CoverImage src={_get(item, \"cover.url\")} />\r\n      <ContentBox>\r\n        <Title className={\"blog_name\"}>{title}</Title>\r\n      </ContentBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default VideoRecommend;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _get from \"lodash/get\";\r\nimport VideoRecommend from \"./VideoRecommend\";\r\nimport FlatList from \"../../common/FlatList\";\r\nconst Container = styled.div``;\r\n\r\nconst BlogTopGridVideoBlogRecommends = ({\r\n  grid,\r\n  itemsKey = \"blogRecommends\",\r\n  onGoTo\r\n}) => {\r\n  const items = _get(grid, itemsKey, []);\r\n  return (\r\n    <Container>\r\n      <FlatList\r\n        items={items}\r\n        isFlexItem={true}\r\n        columnsInRow={1}\r\n        gapY={\"10px\"}\r\n        renderItem={({ item }) => {\r\n          return (\r\n            <VideoRecommend\r\n              onGoTo={onGoTo}\r\n              item={item}\r\n              key={Math.random().toString()}\r\n            />\r\n          );\r\n        }}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BlogTopGridVideoBlogRecommends;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _get from \"lodash/get\";\r\nimport { BLOG } from \"../../../../common/CONSULT\";\r\nimport { chunkTo } from \"../../../../utils/textUtils\";\r\n\r\nconst Container = styled.div`\r\n  cursor: pointer;\r\n  display: flex;\r\n  flex: 1;\r\n  margin-bottom: 8px;\r\n  margin-left: 10px;\r\n  margin-right: 10px;\r\n  padding-bottom: 6px;\r\n  border-bottom: 1px dotted\r\n    ${props => (props.isLastOne ? \"transparent\" : \"#dfdfdf\")};\r\n  &:hover {\r\n    .cover_img {\r\n      box-shadow: 0 8px 20px #bbb;\r\n    }\r\n    .blog_name {\r\n      color: #fb6b84;\r\n    }\r\n  }\r\n`;\r\n\r\nconst CoverImage = styled.img`\r\n  height: 80px;\r\n  width: 110px;\r\n  object-fit: cover;\r\n`;\r\n\r\nconst ContentBox = styled.div`\r\n  margin-left: 4px;\r\n  text-align: left;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  color: black;\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n  margin-top: 4px;\r\n`;\r\n\r\nconst Description = styled.div`\r\n  font-size: 12px;\r\n  color: #999;\r\n`;\r\n\r\nconst ArticleRecommend = ({ item, isLastOne, onGoTo }) => {\r\n  const { id, title, description } = item;\r\n  return (\r\n    <Container onClick={() => onGoTo(`${BLOG}${id}`)} isLastOne={isLastOne}>\r\n      <CoverImage className={\"cover_img\"} src={_get(item, \"cover.url\")} />\r\n      <ContentBox>\r\n        <Title className={\"blog_name\"}>{title}</Title>\r\n        <Description className={\"blog_name\"}>\r\n          {chunkTo(description, 20)}\r\n        </Description>\r\n      </ContentBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ArticleRecommend;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport ArticleRecommend from \"./ArticleRecommend\";\r\nimport _get from \"lodash/get\";\r\nimport FlatList from \"../../common/FlatList\";\r\n\r\nconst Container = styled.div``;\r\n\r\nconst BlogTopGridArticleBlogRecommends = ({\r\n  grid,\r\n  itemsKey = \"articleRecommends\",\r\n  onGoTo\r\n}) => {\r\n  const items = _get(grid, itemsKey, []);\r\n  return (\r\n    <Container>\r\n      <FlatList\r\n        columnsInRow={1}\r\n        items={items}\r\n        gapY={\"10px\"}\r\n        isFlexItem={true}\r\n        renderItem={({ item, isLastOne }) => {\r\n          return (\r\n            <ArticleRecommend\r\n              key={Math.random().toString()}\r\n              item={item}\r\n              onGoTo={onGoTo}\r\n              isLastOne={isLastOne}\r\n            />\r\n          );\r\n        }}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BlogTopGridArticleBlogRecommends;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport SwipeItems from \"../common/SwipeItems\";\r\nimport _get from \"lodash/get\";\r\nimport BlogTopGridVideoBlogRecommends from \"./blog/BlogTopGridVideoBlogRecommends\";\r\nimport BlogTopGridArticleBlogRecommends from \"./blog/BlogTopGridArticleBlogRecommends\";\r\nimport Space from \"../../../common/Space\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst LeftRecommendsBox = styled.div`\r\n  width: 220px;\r\n`;\r\n\r\nconst RightRecommendsBox = styled.div`\r\n  width: 280px;\r\n`;\r\n\r\nconst BlogTopGrid = props => {\r\n  const { grid, onGoTo } = props;\r\n  return (\r\n    <Container>\r\n      <LeftRecommendsBox>\r\n        <BlogTopGridVideoBlogRecommends grid={grid} onGoTo={onGoTo} />\r\n      </LeftRecommendsBox>\r\n      <Space width={\"12px\"} />\r\n      <SwipeItems\r\n        width={800}\r\n        height={400}\r\n        items={_get(grid, \"items\", [])}\r\n        onGoTo={onGoTo}\r\n      />\r\n      <RightRecommendsBox>\r\n        <BlogTopGridArticleBlogRecommends grid={grid} onGoTo={onGoTo} />\r\n      </RightRecommendsBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BlogTopGrid;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _get from \"lodash/get\";\r\nimport BlogListItem from \"../item/BlogListItem\";\r\nimport FlatList from \"../common/FlatList\";\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n  padding-right: 12px;\r\n`;\r\n\r\nconst BlogVListGrid = props => {\r\n  const { grid, onGoTo } = props;\r\n  return (\r\n    <Container>\r\n      <FlatList\r\n        columnsInRow={1}\r\n        isFlexItem={true}\r\n        items={_get(grid, \"items\", [])}\r\n        renderItem={({ item }) => {\r\n          return (\r\n            <BlogListItem\r\n              item={item}\r\n              onGoTo={onGoTo}\r\n              key={Math.random().toString()}\r\n            />\r\n          );\r\n        }}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BlogVListGrid;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div``;\r\n\r\nconst AnnouncementBannerGrid = () => {\r\n  return <Container />;\r\n};\r\n\r\nexport default AnnouncementBannerGrid;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Grid, GridColumn, GridRow } from \"semantic-ui-react\";\r\n\r\nimport { getGridById } from \"./grid\";\r\nimport _map from \"lodash/map\";\r\nimport _isEmpty from \"lodash/isEmpty\";\r\nimport Empty from \"../../../common/Empty\";\r\n\r\nconst Container = styled.div`\r\n  margin-bottom: 16px;\r\n`;\r\n\r\nconst RowHeader = styled.div`\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst TitleWrapper = styled.div`\r\n  display: flex;\r\n  margin-bottom: 16px;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  font-size: 22px;\r\n  font-weight: bolder;\r\n  text-shadow: 5px 5px 5px #bbb;\r\n`;\r\n\r\nconst HeaderBottomLine = styled.div`\r\n  background-color: ${props => props.bColor};\r\n  width: 100%;\r\n  height: 14px;\r\n  box-shadow: 0 2px 4px ${props => props.bColor};\r\n  border-radius: 4px;\r\n`;\r\n\r\nconst RowBody = styled.div`\r\n  min-height: ${props => props.contentMinHeight} px;\r\n  width: 1300px;\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\nconst GridWrapper = styled.div`\r\n  flex: ${props => props.flex};\r\n`;\r\n\r\nconst PageRow = ({ row, onGoTo }) => {\r\n  const {\r\n    title,\r\n    hasNoHeader,\r\n    grids,\r\n    hasHeaderLine,\r\n    headerColor = \"#cecece\"\r\n  } = row;\r\n  return (\r\n    <Container>\r\n      {!hasNoHeader && title && (\r\n        <RowHeader>\r\n          <TitleWrapper>\r\n            <Title>{title}</Title>\r\n          </TitleWrapper>\r\n          {hasHeaderLine && <HeaderBottomLine bColor={headerColor} />}\r\n        </RowHeader>\r\n      )}\r\n      <RowBody columns=\"equal\">\r\n        {!_isEmpty(grids) ? (\r\n          _map(grids, grid => {\r\n            const gridWidth = grid.xs\r\n              ? parseInt(((grid.xs / 24) * 16).toString())\r\n              : 16;\r\n            console.log(\"gridWidth___________________\", gridWidth);\r\n            return (\r\n              <GridWrapper key={\"grid___\" + grid.index} flex={gridWidth}>\r\n                {getGridById({ grid, onGoTo })}\r\n              </GridWrapper>\r\n            );\r\n          })\r\n        ) : (\r\n          <Empty text={\"您要的东西没找到哦！\"} />\r\n        )}\r\n      </RowBody>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default PageRow;\r\n","import React from \"react\";\r\nimport { GRIDS } from \"./CONSULT\";\r\nimport HomeSwipeGrid from \"../grids/HomeSwipeGrid\";\r\nimport BlogListGrid from \"../grids/BlogListGrid\";\r\nimport BookFlatListGrid from \"../grids/BookFlatListGrid\";\r\nimport BookListGrid from \"../grids/BookListGrid\";\r\nimport AdsGrid from \"../grids/AdsGrid\";\r\nimport ProgramFlatListGrid from \"../grids/ProgramFlatListGrid\";\r\nimport ProgramTopGrid from \"../grids/ProgramTopGrid\";\r\nimport ProgramListGrid from \"../grids/ProgramListGrid\";\r\nimport BookTopGrid from \"../grids/BookTopGrid\";\r\nimport BookHListGrid from \"../grids/BookHListGrid\";\r\nimport BlogRecommendListGrid from \"../grids/BlogRecommendListGrid\";\r\nimport AllPageAdBanner from \"../grids/AllPageAdBanner\";\r\nimport BlogTopGrid from \"../grids/BlogTopGrid\";\r\nimport BlogVListGrid from \"../grids/BlogVListGrid\";\r\nimport AnnouncementBannerGrid from \"../grids/AnnouncementBannerGrid\";\r\n\r\nexport const getGridById = props => {\r\n  const {\r\n    grid: { id }\r\n  } = props;\r\n  switch (id) {\r\n    case GRIDS.homeSwipe.id:\r\n      return <HomeSwipeGrid {...props} />;\r\n    case GRIDS.blogList.id:\r\n      return <BlogListGrid {...props} />;\r\n    case GRIDS.bookFlatList.id:\r\n      return <BookFlatListGrid {...props} />;\r\n    case GRIDS.bookList.id:\r\n      return <BookListGrid {...props} />;\r\n    case GRIDS.adList.id:\r\n      return <AdsGrid {...props} />;\r\n    case GRIDS.programFlatList.id:\r\n      return <ProgramFlatListGrid {...props} />;\r\n    case GRIDS.announcement.id:\r\n      return <AnnouncementBannerGrid {...props} />;\r\n\r\n    case GRIDS.programTop.id:\r\n      return <ProgramTopGrid {...props} />;\r\n    case GRIDS.programList.id:\r\n      return <ProgramListGrid {...props} />;\r\n\r\n    case GRIDS.bookTop.id:\r\n      return <BookTopGrid {...props} />;\r\n\r\n    case GRIDS.bookHList.id:\r\n      return <BookHListGrid {...props} />;\r\n\r\n    case GRIDS.blogRecommendList.id:\r\n      return <BlogRecommendListGrid {...props} />;\r\n\r\n    case GRIDS.allPageBannerAd.id:\r\n      return <AllPageAdBanner {...props} />;\r\n\r\n    case GRIDS.blogTop.id:\r\n      return <BlogTopGrid {...props} />;\r\n    case GRIDS.blogVList.id:\r\n      return <BlogVListGrid {...props} />;\r\n\r\n    default:\r\n      return <div>该Grid不存在</div>;\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _map from \"lodash/map\";\r\nimport PageRow from \"./PageRow\";\r\n\r\nconst Container = styled.div``;\r\n\r\nconst PageRows = ({ page ,onGoTo}) => {\r\n  if (!page) {\r\n    return null;\r\n  }\r\n  const { rows } = page;\r\n\r\n  return (\r\n    <Container>\r\n      {_map(rows, row => {\r\n        return <PageRow row={row} key={\"row\" + row.index} onGoTo={onGoTo}/>;\r\n      })}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default PageRows;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport PageRows from \"./common/PageRows\";\r\nconst Container = styled.div`\r\n  margin-top: 18px;\r\n`;\r\n\r\nconst TransformablePage = ({ page, onGoTo }) => {\r\n  return (\r\n    <Container>\r\n      <PageRows page={page} onGoTo={onGoTo} />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default TransformablePage;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport TransformablePage from \"../transformable/TransformablePage\";\r\nimport PageTitle from \"../../common/PageTitle\";\r\n\r\nconst HomePage = ({ page, onGoTo }) => {\r\n  return (\r\n    <>\r\n      <PageTitle title={`首页`} />\r\n      <TransformablePage page={page} onGoTo={onGoTo} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport TransformablePage from \"../transformable/TransformablePage\";\r\nimport PageTitle from \"../../common/PageTitle\";\r\n\r\nconst BlogPage = ({ page, onGoTo }) => {\r\n  return (\r\n    <>\r\n      <PageTitle title={\"博客_LazyChun\"} />\r\n      <TransformablePage page={page} onGoTo={onGoTo} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BlogPage;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport TransformablePage from \"../transformable/TransformablePage\";\r\nimport PageTitle from \"../../common/PageTitle\";\r\n\r\nconst ProgramPage = props => {\r\n  return (\r\n    <>\r\n      <PageTitle title={\"工具\"} />\r\n      <TransformablePage {...props} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProgramPage;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport TransformablePage from \"../transformable/TransformablePage\";\r\nimport PageTitle from \"../../common/PageTitle\";\r\n\r\nconst BookPage = ({ page, onGoTo }) => {\r\n  return (\r\n    <>\r\n      <PageTitle title={\"书籍_LazyChun\"} />\r\n      <TransformablePage page={page} onGoTo={onGoTo} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default BookPage;\r\n","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport _map from \"lodash/map\";\r\n\r\nconst Routes = ({ routes = [] }) => {\r\n  return (\r\n    <Switch>\r\n      {_map(routes, (route, routeIndex) => {\r\n        const { path, component, exact = true } = route;\r\n        return (\r\n          <Route\r\n            key={\"_page_index_\" + routeIndex + path}\r\n            exact={exact}\r\n            path={path}\r\n            component={() => component}\r\n          />\r\n        );\r\n      })}\r\n    </Switch>\r\n  );\r\n};\r\n\r\nexport default Routes;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Icon, Popup } from \"semantic-ui-react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { PROBLEM_CREATE } from \"../../../common/CONSULT\";\r\n\r\nconst Container = styled.div`\r\n  cursor: pointer;\r\n`;\r\n\r\nconst AddButton = ({}) => {\r\n  return (\r\n    <Popup\r\n      content=\"添加建议|BUG\"\r\n      trigger={\r\n        <Container>\r\n          <Link to={PROBLEM_CREATE}>\r\n            <Icon\r\n              size={\"big\"}\r\n              style={{ color: \"black\" }}\r\n              circular={true}\r\n              name={\"add\"}\r\n            />\r\n          </Link>\r\n        </Container>\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default AddButton;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Button, Icon } from \"semantic-ui-react\";\r\nimport _map from \"lodash/map\";\r\n\r\nconst FILTER_ITEMS = [\r\n  { label: \"已解决\", value: \"resolved\" },\r\n  { label: \"未解决\", value: \"unsolved\" },\r\n  { label: \"BUG\", value: \"bug\" },\r\n  { label: \"建议\", value: \"advice\" },\r\n  { label: \"我的\", value: \"my\" }\r\n];\r\n\r\nconst Container = styled.div``;\r\n\r\nconst FilterButton = ({ item, selected, onSwitchTag }) => {\r\n  const { label, value } = item;\r\n  return (\r\n    <Button\r\n      onClick={() => onSwitchTag(item.value)}\r\n      basic\r\n      icon\r\n      color={selected ? \"grey\" : \"blue\"}\r\n      style={{ marginLeft: 30, width: 120 }}\r\n    >\r\n      {selected && <Icon style={{ marginRight: 20 }} name=\"check\" />}\r\n      {label}\r\n    </Button>\r\n  );\r\n};\r\n\r\nconst FilterButtons = ({ selectedTag, onSwitchTag }) => {\r\n  return (\r\n    <Container>\r\n      {_map(FILTER_ITEMS, (item, index) => {\r\n        return (\r\n          <FilterButton\r\n            onSwitchTag={onSwitchTag}\r\n            selected={item.value === selectedTag}\r\n            item={item}\r\n            key={\"program_filter_button\" + index}\r\n          />\r\n        );\r\n      })}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default FilterButtons;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport AddButton from \"./AddButton\";\r\nimport FilterButtons from \"./FilterButtons\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-top: 20px;\r\n  margin-bottom: 40px;\r\n`;\r\n\r\nconst SearchFilterFields = ({ selectedTag, onSwitchTag }) => {\r\n  return (\r\n    <Container>\r\n      <AddButton />\r\n      <FilterButtons selectedTag={selectedTag} onSwitchTag={onSwitchTag} />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SearchFilterFields;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n  height: 200px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background-color: whitesmoke;\r\n`;\r\nconst HintText = styled.div`\r\n  font-size: 16px;\r\n  color: gray;\r\n`;\r\nconst SearchEmpty = ({ text }) => {\r\n  return (\r\n    <Container>\r\n      <HintText>抱歉，没有找到你要的{text}</HintText>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SearchEmpty;\r\n","import React, { useReducer, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useQuery } from \"@apollo/react-hooks\";\r\nimport { gql } from \"apollo-boost\";\r\nimport { PROBLEM_LIST_PROPS } from \"../../common/props\";\r\nimport SearchFilterFields from \"./components/SearchFilterFields\";\r\nimport PaginationQueryList from \"../../common/PaginationQueryList\";\r\nimport _map from \"lodash/map\";\r\nimport _uniq from \"lodash/uniq\";\r\nimport ProblemItem from \"../../common/item/ProblemItem\";\r\nimport SearchEmpty from \"../search/segaments/SearchEmpty\";\r\nimport { OBJ_TYPES, SEARCHED_PROBLEMS } from \"../../common/CONSULT\";\r\nimport PersistStorage from \"../../utils/PersistStorage\";\r\nimport LinkToObject from \"../../common/LinkToObject\";\r\nimport PageTitle from \"../../common/PageTitle\";\r\n\r\nexport const GET_PROBLEMS = gql` \r\n  query( \r\n    $objTypes: [ProblemObjType]\r\n    $statuses: [ProblemStatus]\r\n    $type:ProblemType\r\n    $creatorId:ID\r\n    $dateCreated: [Date]\r\n    $lastUpdated: [Date] \r\n    $limit: Int\r\n    $offset: Int\r\n    $sort:String\r\n    $order:String\r\n ) {\r\n    problems( paginateParams: {\r\n      max: $limit\r\n      offset: $offset\r\n      sort: $sort\r\n      order: $order\r\n    }\r\n      objTypes: $objTypes\r\n      type: $type \r\n      creatorId:$creatorId\r\n      statuses: $statuses\r\n      dateCreated: $dateCreated\r\n      lastUpdated: $lastUpdated) {\r\n        count\r\n        items{\r\n            ${PROBLEM_LIST_PROPS}\r\n        }\r\n      \r\n    }\r\n  }\r\n`;\r\n\r\nconst Container = styled.div`\r\n  width: 1300px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 0 40px;\r\n  margin-top: 18px;\r\n`;\r\n\r\nconst Problems = ({ items }) => {\r\n  useEffect(() => {\r\n    PersistStorage.setItem(SEARCHED_PROBLEMS, items);\r\n  }, [items]);\r\n  return (\r\n    <>\r\n      {_map(items, item => {\r\n        return (\r\n          <LinkToObject\r\n            key={\"problem_\" + item.id}\r\n            objId={item.id}\r\n            objType={OBJ_TYPES.PROBLEM}\r\n          >\r\n            <ProblemItem problem={item} />\r\n          </LinkToObject>\r\n        );\r\n      })}\r\n    </>\r\n  );\r\n};\r\n\r\nconst initSearchFields = { statuses: [\"Published\", \"Accepted\"] };\r\n\r\nconst useProblemPage = ({ currentUser }) => {\r\n  const [state, dispatch] = useReducer(\r\n    (state, action) => {\r\n      let searchFields = initSearchFields;\r\n      const selectedTag = state.selectedTag;\r\n      if (selectedTag === action.type) {\r\n        return { searchFields, selectedTag: \"\" };\r\n      }\r\n      switch (action.type) {\r\n        case \"resolved\":\r\n          searchFields = { ...searchFields, statuses: [\"Accepted\"] };\r\n          break;\r\n        case \"unsolved\":\r\n          searchFields = { ...searchFields, statuses: [\"Published\"] };\r\n          break;\r\n        case \"bug\":\r\n          searchFields = { ...searchFields, type: \"Bug\" };\r\n          break;\r\n        case \"advice\":\r\n          searchFields = { ...searchFields, type: \"Advice\" };\r\n          break;\r\n        case \"my\":\r\n          searchFields = {\r\n            ...searchFields,\r\n            creatorId: currentUser.id,\r\n            statuses: []\r\n          };\r\n          break;\r\n      }\r\n      return { searchFields, selectedTag: action.type };\r\n    },\r\n    {\r\n      searchFields: initSearchFields,\r\n      selectedTag: \"\"\r\n    }\r\n  );\r\n  return {\r\n    state,\r\n    onSwitchTag: tag => dispatch({ type: tag })\r\n  };\r\n};\r\n\r\nconst ProblemPage = ({ currentUser }) => {\r\n  const { state, onSwitchTag } = useProblemPage({ currentUser });\r\n  const { searchFields, selectedTag } = state;\r\n  return (\r\n    <Container>\r\n      <PageTitle title={\"建议\"} />\r\n      <SearchFilterFields onSwitchTag={onSwitchTag} selectedTag={selectedTag} />\r\n      <PaginationQueryList\r\n        searchFields={searchFields}\r\n        hidePaginationInSinglePage\r\n        gql={GET_PROBLEMS}\r\n        dataKey={\"problems\"}\r\n        limit={10}\r\n      >\r\n        {({ loading, count, items, refetch }) => {\r\n          if (count <= 0) {\r\n            return <SearchEmpty text={\"东西！\"} />;\r\n          }\r\n          return <Problems items={items} />;\r\n        }}\r\n      </PaginationQueryList>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ProblemPage;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-bottom: 30px;\r\n  border-bottom: 1px solid #f2f5f6;\r\n`;\r\n\r\nconst TabsBox = styled.div`\r\n  display: flex;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n  width: 500px;\r\n`;\r\n\r\nconst Tabs = ({ currentTab, onSwitchTab }) => {\r\n  const commonProps = { currentTab, onSwitchTab };\r\n  return (\r\n    <Container>\r\n      <TabsBox>\r\n        <Tab {...commonProps} title={\"综合\"} tab={\"All\"} />\r\n        <Tab {...commonProps} title={\"工具\"} tab={\"Program\"} />\r\n        <Tab {...commonProps} title={\"博客\"} tab={\"Blog\"} />\r\n        <Tab {...commonProps} title={\"书籍\"} tab={\"Book\"} />\r\n        {/*<Tab {...commonProps} title={\"建议\"} tab={\"Problem\"} />*/}\r\n      </TabsBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Tabs;\r\n\r\nconst TabBox = styled.div`\r\n  padding: 10px 2px;\r\n  border-bottom: 2px solid\r\n    ${props => (props.selected ? \"#E83939\" : \"transparent\")};\r\n`;\r\n\r\nconst TabText = styled.div`\r\n  font-size: ${props => (props.selected ? 24 : 24)}px;\r\n  font-weight: bold;\r\n  color: ${props => (props.selected ? \"#E83939\" : \"\")};\r\n  cursor: pointer;\r\n`;\r\n\r\nconst Tab = ({ tab, title, currentTab, onSwitchTab }) => {\r\n  const selected = tab === currentTab;\r\n  return (\r\n    <TabBox selected={selected} onClick={() => onSwitchTab(tab)}>\r\n      <TabText selected={selected}>{title}</TabText>\r\n    </TabBox>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Pagination } from \"semantic-ui-react\";\r\nimport SearchEmpty from \"./SearchEmpty\";\r\n\r\nconst Container = styled.div`\r\n  padding-bottom: 60px;\r\n`;\r\n\r\nconst Content = styled.div``;\r\n\r\nconst Title = styled.div`\r\n  text-align: left;\r\n  font-weight: bold;\r\n  font-size: 18px;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst More = styled.div`\r\n  color: #999;\r\n  cursor: pointer;\r\n  &:hover {\r\n    color: lightblue;\r\n  }\r\n`;\r\n\r\nconst HeaderBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst Header = ({ title, totalPages, tab, onSearchMore }) => {\r\n  return (\r\n    <HeaderBox>\r\n      <Title>{title}</Title>\r\n      {totalPages > 1 && (\r\n        <More onClick={() => onSearchMore(tab)}>查看更多</More>\r\n      )}\r\n    </HeaderBox>\r\n  );\r\n};\r\n\r\nconst PaginationBox = styled.div`\r\n  margin-top: 40px;\r\n`;\r\n\r\nconst SearchContent = ({\r\n  itemsCount,\r\n  onUpdatePagination,\r\n  pagination,\r\n  currentTab,\r\n  title,\r\n  tab,\r\n  onSearchMore,\r\n  emptyText,\r\n  children\r\n}) => {\r\n  const { limit, offset } = pagination;\r\n  const totalPages = itemsCount / limit;\r\n  return (\r\n    <Container>\r\n      {currentTab === \"All\" && (\r\n        <Header\r\n          tab={tab}\r\n          totalPages={totalPages}\r\n          onSearchMore={onSearchMore}\r\n          title={title}\r\n        />\r\n      )}\r\n      <Content>\r\n        {itemsCount > 0 ? children : <SearchEmpty text={emptyText} />}\r\n      </Content>\r\n      {currentTab !== \"All\" && totalPages > 1 && (\r\n        <PaginationBox>\r\n          <Pagination\r\n            activePage={offset / limit + 1}\r\n            totalPages={totalPages}\r\n            onPageChange={(event, { activePage }) => {\r\n              onUpdatePagination(\"offset\", (activePage - 1) * limit);\r\n            }}\r\n          />\r\n        </PaginationBox>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SearchContent;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _map from \"lodash/map\";\r\nimport _find from \"lodash/find\";\r\nimport _isEmpty from \"lodash/isEmpty\";\r\n\r\nconst Container = styled.div`\r\n  background-color: #f9f9f9;\r\n  padding: 20px 10px;\r\n  min-height: 300px;\r\n  margin-bottom: 30px;\r\n  border-radius: 6px;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  font-weight: bold;\r\n  font-size: 16px;\r\n  text-align: left;\r\n  margin-bottom: 12px;\r\n`;\r\n\r\nconst TagsWrapper = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\nconst RecommendTags = ({ selectedTagIds, tags, onSelectTag }) => {\r\n  return (\r\n    <Container>\r\n      <Title>推荐标签</Title>\r\n      <TagsWrapper>\r\n        {_map(tags, tag => {\r\n          const selected = _find(selectedTagIds, tagId => tagId === tag.id);\r\n          return (\r\n            <TagItem\r\n              key={\"tag_\" + tag.id}\r\n              onSelect={onSelectTag}\r\n              tag={tag}\r\n              selected={selected}\r\n            />\r\n          );\r\n        })}\r\n      </TagsWrapper>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default RecommendTags;\r\n\r\nconst TagItemBox = styled.div`\r\n  height: 30px;\r\n  line-height: 30px;\r\n  border-radius: 15px;\r\n  min-width: 60px;\r\n  padding: 0 10px;\r\n  &:hover {\r\n    border: 1px solid lightskyblue;\r\n    color: dodgerblue;\r\n  }\r\n  border: 1px solid ${props => (props.selected ? \"lightblue\" : \"#cecece\")};\r\n  margin: 2px 2px;\r\n  cursor: pointer;\r\n  color: ${props => (props.selected ? \"lightblue\" : \"\")};\r\n`;\r\n\r\nconst TagItem = ({ onSelect, tag, selected }) => {\r\n  return (\r\n    <TagItemBox selected={selected} onClick={() => onSelect(tag)}>\r\n      {tag.name}\r\n    </TagItemBox>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport PersistStorage from \"../../../utils/PersistStorage\";\r\nimport _isEmpty from \"lodash/isEmpty\";\r\nimport _map from \"lodash/map\";\r\nimport _filter from \"lodash/filter\";\r\nimport _chunk from \"lodash/chunk\";\r\nimport { Icon } from \"semantic-ui-react\";\r\nimport { onSaveSearchHistory } from \"../../header/Header\";\r\nimport { SEARCH } from \"../../../common/CONSULT\";\r\n\r\nconst Container = styled.div`\r\n  background-color: #f9f9f9;\r\n  padding: 20px 10px;\r\n  min-height: 300px;\r\n  margin-bottom: 30px;\r\n  border-radius: 6px;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  font-weight: bold;\r\n  font-size: 16px;\r\n  text-align: left;\r\n  margin-bottom: 12px;\r\n`;\r\n\r\nconst HistoryPanel = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\nconst SearchItemBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  height: 30px;\r\n  min-width: 40px;\r\n  text-wrap: none;\r\n  padding: 2px 4px;\r\n  border-bottom: 1px solid #cecece;\r\n  cursor: pointer;\r\n  margin: 2px 4px;\r\n  .remove_btn {\r\n    display: none;\r\n  }\r\n  &:hover {\r\n    color: dodgerblue;\r\n    border-bottom: 1px solid lightskyblue;\r\n    .remove_btn {\r\n      display: block;\r\n    }\r\n  }\r\n`;\r\n\r\nconst ItemText = styled.div`\r\n  font-size: 14px;\r\n  max-width: 100px;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst CloseIcon = styled(Icon)`\r\n  margin-bottom: 4px !important;\r\n  color: black;\r\n  &:hover {\r\n    color: #fb6b84;\r\n  }\r\n`;\r\n\r\nconst onRemoveSearchItem = searchItem => {\r\n  const historySearchItems = PersistStorage.getItem(\"historySearchItems\");\r\n  const newHistorySearchItems = _filter(\r\n    historySearchItems,\r\n    item => item !== searchItem\r\n  );\r\n  PersistStorage.setItem(\"historySearchItems\", newHistorySearchItems);\r\n};\r\n\r\nconst SearchItem = ({ item, onRefresh, onSearch }) => {\r\n  return (\r\n    <SearchItemBox>\r\n      <ItemText onClick={() => onSearch(item)}>{item}</ItemText>\r\n      <CloseIcon\r\n        className={\"remove_btn\"}\r\n        name={\"close\"}\r\n        onClick={() => {\r\n          onRemoveSearchItem(item);\r\n          onRefresh();\r\n        }}\r\n      />\r\n    </SearchItemBox>\r\n  );\r\n};\r\n\r\nconst SearchHistory = ({ onGoTo }) => {\r\n  const historySearchItems = PersistStorage.getItem(\"historySearchItems\");\r\n  const [refresh, setRefresh] = useState(\"refresh\");\r\n  const onSearch = keyword => {\r\n    onSaveSearchHistory(keyword);\r\n    onGoTo(`${SEARCH}${keyword}`);\r\n  };\r\n  if (_isEmpty(historySearchItems)) {\r\n    return null;\r\n  }\r\n  return (\r\n    <Container>\r\n      <Title>搜索历史</Title>\r\n      <HistoryPanel key={refresh}>\r\n        {_map(_chunk(historySearchItems, 20)[0], (item, index) => {\r\n          return (\r\n            <SearchItem\r\n              key={\"search_item_\" + index}\r\n              onRefresh={() => setRefresh(Math.random().toString())}\r\n              item={item}\r\n              onSearch={onSearch}\r\n            />\r\n          );\r\n        })}\r\n      </HistoryPanel>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SearchHistory;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Icon } from \"semantic-ui-react\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-around;\r\n  border: 1px solid #f2f2f2;\r\n  height: 30px;\r\n  min-width: 40px;\r\n  border-radius: 15px;\r\n  padding: 0 4px;\r\n  margin-right: 10px;\r\n  margin-bottom: 2px;\r\n  margin-top: 2px;\r\n`;\r\n\r\nconst TagText = styled.div``;\r\n\r\nconst IconWrapper = styled.div`\r\n  cursor: pointer;\r\n`;\r\n\r\nconst CloseButton = styled(Icon)`\r\n  color: #c3cece;\r\n  &:hover {\r\n    color: lightblue;\r\n  }\r\n`;\r\n\r\nconst Tag = ({ tag, onClose }) => {\r\n  const { id, name } = tag;\r\n  return (\r\n    <Container>\r\n      <TagText>{name}</TagText>\r\n      <IconWrapper>\r\n        <CloseButton onClick={onClose} name={\"close\"} />\r\n      </IconWrapper>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Tag;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _isEmpty from \"lodash/isEmpty\";\r\nimport _map from \"lodash/map\";\r\nimport Tag from \"./Tag\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  text-align: left;\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n`;\r\n\r\nconst Header = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: flex-start;\r\n  width: 60px;\r\n`;\r\n\r\nconst TagsBox = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  flex: 1;\r\n`;\r\n\r\nconst Tags = ({ tags, onSelectTag }) => {\r\n  if (_isEmpty(tags)) {\r\n    return null;\r\n  }\r\n  return (\r\n    <Container>\r\n      <Header>\r\n        <Title>标签</Title>\r\n      </Header>\r\n\r\n      <TagsBox>\r\n        {_map(tags, tag => {\r\n          return <Tag onClose={() => onSelectTag(tag)} tag={tag} />;\r\n        })}\r\n      </TagsBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Tags;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _get from \"lodash/get\";\r\nimport { Icon } from \"semantic-ui-react\";\r\nimport { BLOG } from \"../../../../common/CONSULT\";\r\nimport Avatar from \"../../../transformable/common/Avatar\";\r\n\r\nconst Container = styled.div`\r\n  position: relative;\r\n  display: flex;\r\n  cursor: pointer;\r\n  &:hover {\r\n    box-shadow: 0px 7px 7px -7px #bbb;\r\n    border-bottom: 1px solid transparent;\r\n    .blog_name {\r\n      color: #fb6b84;\r\n    }\r\n    .blog_description {\r\n      font-size: 14px;\r\n    }\r\n  }\r\n  margin-bottom: 18px;\r\n  padding-bottom: 10px;\r\n  border-bottom: 1px solid ${props => (props.isLastOne ? \"none\" : \"#cecece\")};\r\n`;\r\n\r\nconst ImageBox = styled.div`\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst CoverImage = styled.img``;\r\n\r\nconst Cover = ({ url }) => {\r\n  return (\r\n    <ImageBox>\r\n      <CoverImage src={url} width={240} height={160} />\r\n    </ImageBox>\r\n  );\r\n};\r\n\r\nconst FooterBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 6px;\r\n`;\r\n\r\nconst FooterItem = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-right: 20px;\r\n`;\r\n\r\nconst Text = styled.div`\r\n  margin-left: 16px;\r\n`;\r\n\r\nconst Footer = ({ item }) => {\r\n  return (\r\n    <FooterBox>\r\n      <FooterItem>\r\n        <Avatar url={_get(item, \"creator.avatar.url\", \"\")} />\r\n        <Text>{_get(item, \"creator.username\", \"-username-\")}</Text>\r\n      </FooterItem>\r\n      <FooterItem>\r\n        <Icon name={\"calendar alternate outline\"} />\r\n        <Text>{_get(item, \"dateCreated\", \"-date-\")}</Text>\r\n      </FooterItem>\r\n      <FooterItem>\r\n        <Icon name={\"heart outline\"} />\r\n        <Text>{_get(item, \"upCount\", \"-like-\")}</Text>\r\n      </FooterItem>\r\n      <FooterItem>\r\n        <Icon name={\"eye\"} />\r\n        <Text>{_get(item, \"readCount\", \"-read-\")}</Text>\r\n      </FooterItem>\r\n    </FooterBox>\r\n  );\r\n};\r\n\r\nconst ContentBox = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  padding-left: 6px;\r\n  color: #999;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  font-size: 18px;\r\n  color: #333333;\r\n  font-weight: 600;\r\n  margin-top: 8px;\r\n`;\r\n\r\nconst Description = styled.div`\r\n  flex: 1;\r\n  margin-top: 14px;\r\n  font-size: 13px;\r\n  line-height: 24px;\r\n  margin-bottom: 16px;\r\n`;\r\n\r\nconst BlogItem = ({ item, onGoTo, isLastOne }) => {\r\n  const { id, cover, title, description } = item;\r\n  const imgUrl = _get(cover, \"url\");\r\n  return (\r\n    <Container isLastOne={isLastOne} onClick={() => onGoTo(`${BLOG}${id}`)}>\r\n      {imgUrl && <Cover url={imgUrl} />}\r\n      <ContentBox>\r\n        <Title className={\"blog_name\"}>{title}</Title>\r\n        <Description className={\"blog_description\"}>{description}</Description>\r\n        <Footer item={item} />\r\n      </ContentBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BlogItem;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport SearchContent from \"./SearchContent\";\r\nimport _map from \"lodash/map\";\r\nimport BlogItem from \"./items/BlogItem\";\r\n\r\nconst Container = styled.div`\r\n  margin-right: 40px;\r\n`;\r\n\r\nconst BlogPanel = ({\r\n  currentTab,\r\n  pagination,\r\n  blogs,\r\n  onUpdatePagination,\r\n  onGoTo,\r\n  onSearchMore,\r\n  isAll\r\n}) => {\r\n  const { count, items } = blogs;\r\n  if (isAll && count <= 0) {\r\n    return null;\r\n  }\r\n  return (\r\n    <Container>\r\n      <SearchContent\r\n        currentTab={currentTab}\r\n        pagination={pagination}\r\n        itemsCount={count}\r\n        title={\"相关博客\"}\r\n        emptyText={\"博客\"}\r\n        tab={\"Blog\"}\r\n        onSearchMore={onSearchMore}\r\n        onUpdatePagination={onUpdatePagination}\r\n      >\r\n        {_map(items, (blog, index) => {\r\n          return (\r\n            <BlogItem\r\n              key={\"blog___\" + blog.id}\r\n              item={blog}\r\n              onGoTo={onGoTo}\r\n              isLastOne={index + 1 === items.length}\r\n            />\r\n          );\r\n        })}\r\n      </SearchContent>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BlogPanel;\r\n","import React from \"react\";\r\nimport { Rating } from \"semantic-ui-react\";\r\nimport styled from \"styled-components\";\r\nimport { PROGRAM } from \"../../../../common/CONSULT\";\r\n\r\nconst Container = styled.div`\r\n  cursor: pointer;\r\n  margin-bottom: 10px;\r\n  &:hover {\r\n    .cover_img {\r\n      box-shadow: 0 8px 20px #bbb;\r\n    }\r\n    .program_name {\r\n      color: #fb6b84;\r\n      font-size: 16px;\r\n    }\r\n    .p_star {\r\n      color: yellow !important;\r\n    }\r\n  }\r\n`;\r\n\r\nconst Cover = styled.div`\r\n  position: relative;\r\n  margin-bottom: 4px;\r\n`;\r\n\r\nconst CoverImage = styled.img`\r\n  width: 310px;\r\n  height: 200px;\r\n`;\r\n\r\nconst CoverHint = styled.div`\r\n  position: absolute;\r\n`;\r\n\r\nconst BottomBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  width: 300px;\r\n`;\r\n\r\nconst Name = styled.div`\r\n  font-weight: bold;\r\n  font-size: 14px;\r\n`;\r\n\r\nconst ProgramItem = ({ item, onGoTo }) => {\r\n  const {\r\n    id,\r\n    name,\r\n    averageScore,\r\n    cover: { url }\r\n  } = item;\r\n  return (\r\n    <Container\r\n      onClick={() => {\r\n        onGoTo(`${PROGRAM}` + id);\r\n      }}\r\n    >\r\n      <Cover>\r\n        <CoverImage\r\n          className={\"cover_img\"}\r\n          width={300}\r\n          height={200}\r\n          src={url}\r\n        />\r\n        <CoverHint />\r\n      </Cover>\r\n      <BottomBox>\r\n        <Name className={\"program_name\"}>{name}</Name>\r\n        <Rating disabled rating={averageScore} maxRating={5} />\r\n      </BottomBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ProgramItem;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport SearchContent from \"./SearchContent\";\r\nimport ProgramItem from \"./items/ProgramItem\";\r\nimport FlatList from \"../../../common/FlatList\";\r\n\r\nconst Container = styled.div`\r\n  margin-right: 40px;\r\n`;\r\n\r\nconst ProgramsBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\nconst ProgramPanel = ({\r\n  currentTab,\r\n  pagination,\r\n  programs,\r\n  onUpdatePagination,\r\n  onGoTo,\r\n  onSearchMore,\r\n  isAll\r\n}) => {\r\n  const { count, items } = programs;\r\n  if (isAll && count <= 0) {\r\n    return null;\r\n  }\r\n  return (\r\n    <Container>\r\n      <SearchContent\r\n        currentTab={currentTab}\r\n        pagination={pagination}\r\n        itemsCount={count}\r\n        title={\"相关工具\"}\r\n        emptyText={\"工具\"}\r\n        tab={\"Program\"}\r\n        onSearchMore={onSearchMore}\r\n        onUpdatePagination={onUpdatePagination}\r\n      >\r\n        <ProgramsBox>\r\n          <FlatList\r\n            items={items}\r\n            columns={3}\r\n            itemWidth={\"310px\"}\r\n            rowGap={\"10px\"}\r\n          >\r\n            {({ item: program, isLastRow }) => {\r\n              return (\r\n                <ProgramItem\r\n                  key={\"program___\" + program.id}\r\n                  item={program}\r\n                  onGoTo={onGoTo}\r\n                />\r\n              );\r\n            }}\r\n          </FlatList>\r\n        </ProgramsBox>\r\n      </SearchContent>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ProgramPanel;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _get from \"lodash/get\";\r\nimport { _getByRank } from \"../../../../utils/utils\";\r\nimport { BOOK } from \"../../../../common/CONSULT\";\r\n\r\nconst Container = styled.div`\r\n  padding: 0 8px;\r\n  cursor: pointer;\r\n  &:hover {\r\n    .cover_image {\r\n      box-shadow: 0 8px 20px #bbb;\r\n    }\r\n    .book_name {\r\n      color: #fb6b84;\r\n    }\r\n  }\r\n`;\r\n\r\nconst CoverImage = styled.img`\r\n  margin-bottom: 6px;\r\n  border-top-right-radius: 10px;\r\n  border-bottom-right-radius: 4px;\r\n`;\r\n\r\nconst Name = styled.div`\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  margin-top: 2px;\r\n`;\r\n\r\nconst Author = styled.div`\r\n  color: darkgrey;\r\n  margin-top: 4px;\r\n`;\r\n\r\nconst BookItem = ({ item, onGoTo }) => {\r\n  return (\r\n    <Container onClick={() => onGoTo(`${BOOK}${item.id}`)}>\r\n      <CoverImage\r\n        className={\"cover_image\"}\r\n        width={220}\r\n        height={260}\r\n        src={_get(item, \"cover.url\")}\r\n      />\r\n      <Name className={\"book_name\"}>{_get(item, \"name\")}</Name>\r\n      <Author>\r\n        {_getByRank(item, [\"creator.nickname\", \"creator.username\"])}/ 著\r\n      </Author>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BookItem;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport SearchContent from \"./SearchContent\";\r\nimport BookItem from \"./items/BookItem\";\r\nimport FlatList from \"../../../common/FlatList\";\r\n\r\nconst Container = styled.div`\r\n  margin-right: 40px;\r\n`;\r\n\r\nconst BooksBox = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\nconst BookPanel = ({\r\n  currentTab,\r\n  pagination,\r\n  books,\r\n  onUpdatePagination,\r\n  onGoTo,\r\n  onSearchMore,\r\n  isAll\r\n}) => {\r\n  const { count, items } = books;\r\n  if (isAll && count <= 0) {\r\n    return null;\r\n  }\r\n  return (\r\n    <Container>\r\n      <SearchContent\r\n        currentTab={currentTab}\r\n        pagination={pagination}\r\n        itemsCount={count}\r\n        title={\"相关书籍\"}\r\n        tab={\"Book\"}\r\n        emptyText={\"书籍\"}\r\n        onSearchMore={onSearchMore}\r\n        onUpdatePagination={onUpdatePagination}\r\n      >\r\n        <BooksBox>\r\n          <FlatList\r\n            items={items}\r\n            columns={4}\r\n            itemWidth={\"220px\"}\r\n            rowGap={\"18px\"}\r\n          >\r\n            {({ item: book, isLastRow }) => {\r\n              return (\r\n                <BookItem\r\n                  key={\"book___\" + book.id}\r\n                  item={book}\r\n                  onGoTo={onGoTo}\r\n                />\r\n              );\r\n            }}\r\n          </FlatList>\r\n        </BooksBox>\r\n      </SearchContent>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BookPanel;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport RecommendTags from \"./RecommendTags\";\r\nimport SearchHistory from \"./SeachHistory\";\r\nimport Tags from \"./Tags\";\r\nimport BlogPanel from \"./BlogPanel\";\r\nimport ProgramPanel from \"./ProgramPanel\";\r\nimport BookPanel from \"./BookPanel\";\r\nimport _each from \"lodash/each\";\r\nimport _get from \"lodash/get\";\r\nimport SearchEmpty from \"./SearchEmpty\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst MainBox = styled.div`\r\n  flex: 1;\r\n`;\r\n\r\nconst RightBox = styled.div`\r\n  width: 300px;\r\n`;\r\n\r\nconst checkTab = (currentTab, panelTab) => {\r\n  return currentTab === \"All\" || currentTab === panelTab;\r\n};\r\n\r\nconst isAllEmpty = (result, fieldKeys) => {\r\n  let isEmpty = true;\r\n  _each(fieldKeys, fieldKey => {\r\n    if (_get(result, `${fieldKey}.count`, 0) > 0) {\r\n      isEmpty = false;\r\n    }\r\n  });\r\n  return isEmpty;\r\n};\r\n\r\nconst SearchResultPanel = ({\r\n  pagination,\r\n  onUpdatePagination,\r\n  searchTags,\r\n  onGoTo,\r\n  searchResult,\r\n  tagIds,\r\n  tags,\r\n  currentTab,\r\n  onSelectTag,\r\n  onSearchMore\r\n}) => {\r\n  const commonProps = { pagination, currentTab, onGoTo, onUpdatePagination };\r\n  const isAll = currentTab === \"All\";\r\n  return (\r\n    <Container>\r\n      <MainBox>\r\n        <Tags tags={tags} onSelectTag={onSelectTag} />\r\n        {checkTab(currentTab, \"Blog\") && (\r\n          <BlogPanel\r\n            {...commonProps}\r\n            blogs={searchResult[\"blogs\"]}\r\n            onSearchMore={onSearchMore}\r\n            isAll={isAll}\r\n          />\r\n        )}\r\n        {checkTab(currentTab, \"Program\") && (\r\n          <ProgramPanel\r\n            {...commonProps}\r\n            onSearchMore={onSearchMore}\r\n            isAll={isAll}\r\n            programs={searchResult[\"programs\"]}\r\n          />\r\n        )}\r\n        {checkTab(currentTab, \"Book\") && (\r\n          <BookPanel\r\n            {...commonProps}\r\n            isAll={isAll}\r\n            onSearchMore={onSearchMore}\r\n            books={searchResult[\"books\"]}\r\n          />\r\n        )}\r\n        {isAll && isAllEmpty(searchResult, [\"books\", \"blogs\", \"programs\"]) && (\r\n          <SearchEmpty text={\"东西。\"} />\r\n        )}\r\n      </MainBox>\r\n      <RightBox>\r\n        <RecommendTags\r\n          selectedTagIds={tagIds}\r\n          tags={searchTags}\r\n          onSelectTag={onSelectTag}\r\n        />\r\n        <SearchHistory onGoTo={onGoTo} />\r\n      </RightBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SearchResultPanel;\r\n","import React, { useState, useEffect, useReducer } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Tabs from \"./segaments/Tabs\";\r\nimport SearchContent from \"./segaments/SearchContent\";\r\nimport { getRouteId, getSearchKeyword } from \"../../utils/routeUtils\";\r\nimport { GET_SEARCH_TAGS, SEARCH_ITEMS } from \"../../common/queryGql\";\r\nimport _map from \"lodash/map\";\r\nimport PageItem from \"../QueryItem\";\r\nimport LoadingWrapper from \"../../common/LoadingWapper\";\r\nimport SearchResultPanel from \"./segaments/SearchResultPanel\";\r\nimport _findIndex from \"lodash/findIndex\";\r\nimport _filter from \"lodash/filter\";\r\nimport _get from \"lodash/get\";\r\n\r\nconst Container = styled.div`\r\n  width: 1300px;\r\n  margin-top: 18px;\r\n`;\r\n\r\nconst useSearchPage = ({ location }) => {\r\n  const [currentTab, setCurrentTab] = useState(\"All\");\r\n\r\n  return {\r\n    currentTab,\r\n    setCurrentTab,\r\n    selectedTag: _get(location, \"state.selectedTag\", null),\r\n    searchKeyword: getSearchKeyword()\r\n  };\r\n};\r\n\r\nconst SearchBox = styled.div``;\r\n\r\nconst _SearchPageResult = ({\r\n  loading,\r\n  searchResult,\r\n  tagIds,\r\n  tags,\r\n  onSelectTag,\r\n  searchTags,\r\n  searchType,\r\n  searchKeyword,\r\n  onUpdatePagination,\r\n  currentTab,\r\n  pagination,\r\n  onSearchMore,\r\n  onGoTo\r\n}) => {\r\n  return (\r\n    <SearchBox>\r\n      <SearchResultPanel\r\n        pagination={pagination}\r\n        onUpdatePagination={onUpdatePagination}\r\n        searchResult={searchResult}\r\n        tagIds={tagIds}\r\n        tags={tags}\r\n        onGoTo={onGoTo}\r\n        searchTags={searchTags}\r\n        onSelectTag={onSelectTag}\r\n        currentTab={currentTab}\r\n        onSearchMore={onSearchMore}\r\n      />\r\n    </SearchBox>\r\n  );\r\n};\r\n\r\nconst initPagination = {\r\n  offset: 0,\r\n  limit: 8\r\n};\r\n\r\nconst tabMax = {\r\n  All: 6,\r\n  Program: 12,\r\n  Blog: 8,\r\n  Book: 8\r\n};\r\n\r\nconst getPagination = currentTab => {\r\n  return {\r\n    offset: 0,\r\n    limit: tabMax[currentTab]\r\n  };\r\n};\r\n\r\nconst useSearchResult = ({ setCurrentTab, selectedTag, currentTab }) => {\r\n  const [tags, setTags] = useState(selectedTag ? [selectedTag] : []);\r\n  const [pagination, dispatch] = useReducer((state, action) => {\r\n    if (action.type === \"reset\") {\r\n      return getPagination(currentTab);\r\n    }\r\n    return {\r\n      ...state,\r\n      [action.type]: action.value\r\n    };\r\n  }, getPagination(currentTab));\r\n  const onSelectTag = tag => {\r\n    if (_findIndex(tags, t => t.id === tag.id) >= 0) {\r\n      setTags(_filter(tags, t => t.id !== tag.id));\r\n    } else {\r\n      setTags([...tags, tag]);\r\n    }\r\n  };\r\n\r\n  const onUpdatePagination = (key, value) => {\r\n    dispatch({ type: key, value });\r\n  };\r\n\r\n  const onSearchMore = tab => {\r\n    setCurrentTab(tab);\r\n  };\r\n  return { tags, pagination, onSelectTag, onUpdatePagination, onSearchMore };\r\n};\r\n\r\nconst SearchPageResult = ({\r\n  searchKeyword,\r\n  currentTab,\r\n  onGoTo,\r\n  searchTags,\r\n  setCurrentTab,\r\n  selectedTag\r\n}) => {\r\n  const {\r\n    tags,\r\n    onSelectTag,\r\n    onUpdatePagination,\r\n    pagination,\r\n    onSearchMore\r\n  } = useSearchResult({ setCurrentTab, selectedTag, currentTab });\r\n  const tagIds = _map(tags, t => t.id);\r\n  return (\r\n    <PageItem\r\n      key={searchKeyword}\r\n      variables={{\r\n        searchType: currentTab,\r\n        searchKeyword,\r\n        tagIds,\r\n        ...pagination\r\n      }}\r\n      gql={SEARCH_ITEMS}\r\n    >\r\n      {({ loading, refetch, item }) => {\r\n        return (\r\n          <_SearchPageResult\r\n            loading={loading}\r\n            currentTab={currentTab}\r\n            onSelectTag={onSelectTag}\r\n            searchResult={item}\r\n            onUpdatePagination={onUpdatePagination}\r\n            pagination={pagination}\r\n            searchTags={searchTags}\r\n            refetchBook={refetch}\r\n            onGoTo={onGoTo}\r\n            tagIds={tagIds}\r\n            tags={tags}\r\n            onSearchMore={onSearchMore}\r\n          />\r\n        );\r\n      }}\r\n    </PageItem>\r\n  );\r\n};\r\n\r\nconst SearchPage = ({ onGoTo, location }) => {\r\n  const {\r\n    currentTab,\r\n    setCurrentTab,\r\n    searchKeyword,\r\n    selectedTag\r\n  } = useSearchPage({\r\n    location\r\n  });\r\n  return (\r\n    <Container>\r\n      <Tabs currentTab={currentTab} onSwitchTab={tab => setCurrentTab(tab)} />\r\n      <PageItem\r\n        autoLoading\r\n        variables={{\r\n          searchKeyword\r\n        }}\r\n        itemPath={\"tags.items\"}\r\n        gql={GET_SEARCH_TAGS}\r\n      >\r\n        {({ loading, refetch, item }) => {\r\n          return (\r\n            <SearchPageResult\r\n              loading={loading}\r\n              searchTags={item}\r\n              selectedTag={selectedTag}\r\n              currentTab={currentTab}\r\n              searchKeyword={searchKeyword}\r\n              refetchBook={refetch}\r\n              onGoTo={onGoTo}\r\n              setCurrentTab={setCurrentTab}\r\n            />\r\n          );\r\n        }}\r\n      </PageItem>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SearchPage;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { BackTop } from \"antd\";\r\nimport { Popup } from \"semantic-ui-react\";\r\n\r\nconst Container = styled.div`\r\n  .ant-back-top-content {\r\n    width: 50px;\r\n    height: 50px;\r\n    line-height: 50px;\r\n    border-radius: 25px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .ant-back-top-icon {\r\n    font-size: 30px;\r\n  }\r\n`;\r\n\r\nconst BackToTop = () => {\r\n  return (\r\n    <Container>\r\n      <Popup trigger={<BackTop />} content={\"返回顶部\"} />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BackToTop;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div`\r\n  background: #fafafa;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 20px 30px;\r\n  margin-top: 20px;\r\n  min-height: 100px;\r\n  width: 1300px;\r\n  justify-self: self-end;\r\n`;\r\n\r\nconst BeiAnLink = styled.a`\r\n  color: gray;\r\n`;\r\n\r\nconst BeiAn = styled.div``;\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <Container>\r\n      <BeiAn>\r\n        © 2020-2021 www.lazychun.com 版权所有&nbsp;&nbsp;&nbsp;&nbsp;\r\n        <BeiAnLink href={\"https://beian.miit.gov.cn\"}>\r\n          鄂ICP备2021001910号\r\n        </BeiAnLink>\r\n      </BeiAn>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","import React, { useState, useEffect, lazy, Suspense } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Header from \"./header/Header\";\r\nimport { getDataFromUrl } from \"../utils/urlData\";\r\nimport PageQuery from \"./PageQuery\";\r\nimport HomePage from \"./home/HomePage\";\r\nimport BlogPage from \"./blog/BlogPage\";\r\nimport ProgramPage from \"./program/ProgramPage\";\r\nimport BookPage from \"./book/BookPage\";\r\nimport _get from \"lodash/get\";\r\nimport _set from \"lodash/get\";\r\nimport _find from \"lodash/find\";\r\nimport _clone from \"lodash/clone\";\r\nimport _each from \"lodash/each\";\r\nimport _keysIn from \"lodash/keysIn\";\r\nimport _pick from \"lodash/pick\";\r\nimport _isArray from \"lodash/isArray\";\r\nimport _merge from \"lodash/merge\";\r\nimport { AppContext } from \"../../App\";\r\nimport Routes from \"./Routes\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { getPageByPath, getPathByPage } from \"../utils/pathUtils\";\r\nimport ProblemPage from \"./problem/ProblemPage\";\r\nimport ProbEditPage from \"./problem/ProblemEditPage\";\r\nimport Loading from \"../common/Loading\";\r\nimport {\r\n  BLOG,\r\n  BOOK,\r\n  CHAPTER,\r\n  PROBLEM_CREATE,\r\n  PROBLEM_EDIT,\r\n  PROBLEM_PAGE,\r\n  PROGRAM,\r\n  SEARCH,\r\n  PERSONAL,\r\n  ABOUT\r\n} from \"../common/CONSULT\";\r\nimport ModalHint from \"../common/ModalHint\";\r\nimport SearchPage from \"./search/SearchPage\";\r\nimport ReportHint from \"../common/ReportHint\";\r\nimport LoginHint from \"../common/LoginHint\";\r\nimport ToastHint from \"../common/ToastHint\";\r\nimport { useMe } from \"../common/hooks\";\r\nimport BackToTop from \"../common/BackToTop\";\r\nimport Footer from \"../common/Footer\";\r\n\r\nconst ProblemEditPage = lazy(() => import(\"./problem/ProblemEditPage\"));\r\nconst ProblemCreatePage = lazy(() => import(\"./problem/ProblemCreatePage\"));\r\nconst Program = lazy(() => import(\"./program/Program\"));\r\nconst Blog = lazy(() => import(\"./blog/Blog\"));\r\nconst Book = lazy(() => import(\"./book/Book\"));\r\nconst Chapter = lazy(() => import(\"./book/Chapter\"));\r\nconst PersonalPage = lazy(() => import(\"./personalCenter/PersonalPage\"));\r\nconst Problem = lazy(() => import(\"./problem/Problem\"));\r\nconst AboutPage = lazy(() => import(\"./about/AboutPage\"));\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  min-height: ${document.body.clientHeight}px;\r\n  background-color: ${props => props.bgColor};\r\n`;\r\n\r\nconst PageBox = styled.div`\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`;\r\n\r\nconst PAGES = [\"home\", \"program\", \"blog\", \"book\"];\r\n\r\nconst iteratePageItems = (pageData, handleItem) => {\r\n  const pages = _get(pageData, \"pages\");\r\n\r\n  const pagesConfig = _pick(pages, PAGES);\r\n\r\n  _each(pagesConfig, (page, currentPage) => {\r\n    const rows = _get(page, \"rows\", []);\r\n    _each(rows, row => {\r\n      const grids = _get(row, \"grids\", []);\r\n      _each(grids, grid => {\r\n        _each(_keysIn(grid), objKey => {\r\n          const gValue = grid[objKey];\r\n          if (_isArray(gValue)) {\r\n            _each(gValue, (v, index) => {\r\n              handleItem(v, currentPage, row.index, grid.index, objKey, index);\r\n            });\r\n          } else if (gValue instanceof Object && gValue[0]) {\r\n            _each(gValue, (v, index) => {\r\n              handleItem(v, currentPage, row.index, grid.index, objKey, index);\r\n            });\r\n          }\r\n          // else if (gValue instanceof Object) {\r\n          //   handleItem(\r\n          //     gValue,\r\n          //     currentPage,\r\n          //     row.index,\r\n          //     grid.index,\r\n          //     objKey,\r\n          //     null\r\n          //   );\r\n          // }\r\n        });\r\n      });\r\n    });\r\n  });\r\n};\r\n\r\nconst mergeQueryItems = (pData, blogs, books, programs) => {\r\n  const pageData = _clone(pData);\r\n  iteratePageItems(\r\n    pData,\r\n    (item, page, rowIndex, gridIndex, objKey, itemIndex) => {\r\n      const typeName = _get(item, \"__typename\");\r\n      let queryItem = {};\r\n      switch (typeName) {\r\n        case \"Blog\":\r\n          queryItem = _find(blogs, blog => blog.id === item.id);\r\n          break;\r\n        case \"Book\":\r\n          queryItem = _find(books, book => book.id === item.id);\r\n          break;\r\n        case \"Program\":\r\n          queryItem = _find(programs, program => program.id === item.id);\r\n          break;\r\n      }\r\n      const newItem = _merge(item, queryItem);\r\n      const objPath = `pages.${page}.rows[${rowIndex}].grids[${gridIndex}].${objKey}`;\r\n      if (itemIndex >= 0) {\r\n        const path = objPath + `[${itemIndex}]`;\r\n\r\n        _set(pageData, path, newItem);\r\n      } else {\r\n        _set(pageData, objPath, newItem);\r\n      }\r\n    }\r\n  );\r\n  return pageData;\r\n};\r\n\r\nconst useAppPage = ({ pageForm, history }) => {\r\n  const { dataUrl, books, programs, blogs } = pageForm;\r\n  const [pageData, setPageData] = useState({});\r\n\r\n  console.log(\"pageForm______________________________AA\", pageData);\r\n  useEffect(() => {\r\n    getDataFromUrl(dataUrl, \"data.content\", data => {\r\n      setPageData(mergeQueryItems(data, blogs, books, programs));\r\n    });\r\n  }, []);\r\n\r\n  const onSwitchPage = page => {\r\n    history.push(getPathByPage(page));\r\n  };\r\n\r\n  const onGoTo = url => {\r\n    history.push(url);\r\n  };\r\n\r\n  return {\r\n    page: getPageByPath(),\r\n    onSwitchPage,\r\n    pageData,\r\n    onGoTo\r\n  };\r\n};\r\n\r\nconst _AppPage = ({\r\n  pageForm,\r\n  aboutCodes,\r\n  history,\r\n  location,\r\n  currentUser,\r\n  setAuthentication,\r\n  openedObj,\r\n  bgColor\r\n}) => {\r\n  const { page, onSwitchPage, pageData, onGoTo } = useAppPage({\r\n    pageForm,\r\n    history\r\n  });\r\n  const { head, pages } = pageData;\r\n  const commonProps = { onGoTo, history, location, currentUser };\r\n  return (\r\n    <Container bgColor={bgColor}>\r\n      <Header\r\n        currentPage={page}\r\n        onSwitchPage={onSwitchPage}\r\n        data={head || {}}\r\n        onGoTo={onGoTo}\r\n        openedObj={openedObj}\r\n      />\r\n      <PageBox>\r\n        <Routes\r\n          routes={[\r\n            {\r\n              path: `${SEARCH}:searchKeyword`,\r\n              component: <SearchPage {...commonProps} />\r\n            },\r\n            {\r\n              path: `${SEARCH}`,\r\n              component: <SearchPage {...commonProps} />\r\n            },\r\n            {\r\n              path: BLOG,\r\n              component: (\r\n                <BlogPage {...commonProps} page={_get(pages, \"blog\")} />\r\n              )\r\n            },\r\n            {\r\n              path: `${BLOG}:id`,\r\n              exact: true,\r\n              component: (\r\n                <Suspense fallback={<Loading />}>\r\n                  <Blog {...commonProps} />\r\n                </Suspense>\r\n              )\r\n            },\r\n            {\r\n              path: PROGRAM,\r\n              exact: true,\r\n              component: (\r\n                <ProgramPage {...commonProps} page={_get(pages, \"program\")} />\r\n              )\r\n            },\r\n            {\r\n              path: BOOK,\r\n              exact: true,\r\n              component: (\r\n                <BookPage {...commonProps} page={_get(pages, \"book\")} />\r\n              )\r\n            },\r\n            {\r\n              path: `${BOOK}:id`,\r\n              exact: true,\r\n              component: (\r\n                <Suspense fallback={<Loading />}>\r\n                  <Book {...commonProps} />\r\n                </Suspense>\r\n              )\r\n            },\r\n            {\r\n              path: `${CHAPTER}:id`,\r\n              exact: true,\r\n              component: (\r\n                <Suspense fallback={<Loading />}>\r\n                  <Chapter {...commonProps} />{\" \"}\r\n                </Suspense>\r\n              )\r\n            },\r\n            {\r\n              path: PROBLEM_CREATE,\r\n              exact: true,\r\n              component: (\r\n                <Suspense fallback={<Loading />}>\r\n                  <ProblemCreatePage {...commonProps} />\r\n                </Suspense>\r\n              )\r\n            },\r\n            {\r\n              path: `${PROBLEM_PAGE}:id`,\r\n              component: (\r\n                <Suspense fallback={<Loading />}>\r\n                  <Problem {...commonProps} />\r\n                </Suspense>\r\n              )\r\n            },\r\n            {\r\n              path: `${PROBLEM_EDIT}/:id`,\r\n              exact: true,\r\n              component: (\r\n                <Suspense fallback={<Loading />}>\r\n                  <ProblemEditPage {...commonProps} />\r\n                </Suspense>\r\n              )\r\n            },\r\n            {\r\n              path: PROBLEM_PAGE,\r\n              exact: true,\r\n              component: <ProblemPage {...commonProps} />\r\n            },\r\n            {\r\n              path: `${PROGRAM}:id`,\r\n              exact: true,\r\n              component: (\r\n                <Suspense fallback={<Loading />}>\r\n                  <Program {...commonProps} />\r\n                </Suspense>\r\n              )\r\n            },\r\n            {\r\n              path: `${PROGRAM}:id/:version`,\r\n              exact: true,\r\n              component: (\r\n                <Suspense fallback={<Loading />}>\r\n                  <Program {...commonProps} />\r\n                </Suspense>\r\n              )\r\n            },\r\n            {\r\n              path: `${PERSONAL}:page`,\r\n              exact: true,\r\n              component: (\r\n                <Suspense fallback={<Loading />}>\r\n                  <PersonalPage {...commonProps} />\r\n                </Suspense>\r\n              )\r\n            },\r\n            {\r\n              path: `${ABOUT}`,\r\n              exact: true,\r\n              component: (\r\n                <Suspense fallback={<Loading />}>\r\n                  <AboutPage {...commonProps} aboutCodes={aboutCodes} />\r\n                </Suspense>\r\n              )\r\n            },\r\n            {\r\n              path: \"\",\r\n              component: (\r\n                <HomePage {...commonProps} page={_get(pages, \"home\")} />\r\n              )\r\n            }\r\n          ]}\r\n        />\r\n      </PageBox>\r\n      <Footer />\r\n      {ModalHint.render()}\r\n      {ReportHint.render()}\r\n      {LoginHint.render(setAuthentication, currentUser)}\r\n      {ToastHint.render()}\r\n      <BackToTop />\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst AppPage = props => {\r\n  const { me } = useMe();\r\n  const [openedObj, setOpenedObj] = useState(null);\r\n  const { currentUser, setAuthentication, logout, history } = props;\r\n  const [bgColor, setGlobalBgColor] = useState(\"white\");\r\n  return (\r\n    <PageQuery>\r\n      {({ refetch, pageForm, aboutCodes, loading }) => {\r\n        return (\r\n          <AppContext.Provider\r\n            value={{\r\n              pageForm,\r\n              openedObj,\r\n              setOpenedObj,\r\n              currentUser: { ...me, ...currentUser },\r\n              setAuthentication,\r\n              logout,\r\n              bgColor,\r\n              setGlobalBgColor,\r\n              onGoTo: url => history.push(url)\r\n            }}\r\n          >\r\n            <_AppPage\r\n              refetch={refetch}\r\n              bgColor={bgColor}\r\n              loading={loading}\r\n              pageForm={pageForm}\r\n              aboutCodes={aboutCodes}\r\n              openedObj={openedObj}\r\n              {...props}\r\n              currentUser={{ ...currentUser, ...me }}\r\n            />\r\n          </AppContext.Provider>\r\n        );\r\n      }}\r\n    </PageQuery>\r\n  );\r\n};\r\n\r\nexport default withRouter(AppPage);\r\n","import { useEffect, useState } from \"react\";\r\nimport { SERVER_URL } from \"../config\";\r\nimport ApolloClient from \"apollo-boost\";\r\nimport axios from \"axios\";\r\nimport PersistStorage from \"../components/utils/PersistStorage\";\r\nimport { refreshCurrentPage } from \"../components/utils/pathUtils\";\r\n\r\nconst getAuthentication = async () => {\r\n  console.log(\"try to get authentication\");\r\n  const userInfo = PersistStorage.getItem(\"authentication\");\r\n  console.log(\"userInfo.................\", userInfo);\r\n  const expiredTime = PersistStorage.getItem(\"expiredTime\");\r\n  console.log(\"expiredTime................\", expiredTime);\r\n  if (\r\n    !userInfo ||\r\n    !expiredTime ||\r\n    parseInt(expiredTime) <= new Date().getTime()\r\n  ) {\r\n    return null;\r\n  }\r\n  try {\r\n    return userInfo;\r\n  } catch (e) {\r\n    console.log(\"error parsing cached authentication, reauthenticate\");\r\n  }\r\n};\r\n\r\nconst setAuthentication = async authUser => {\r\n  PersistStorage.setItem(\"authentication\", authUser);\r\n\r\n  PersistStorage.setItem(\r\n    \"expiredTime\",\r\n    (new Date().getTime() + authUser.expires_in * 1000).toString()\r\n  );\r\n  PersistStorage.setItem(\"username\", authUser.username);\r\n\r\n  await initialize();\r\n};\r\n\r\nconst refreshToken = async () => {\r\n  const { SERVER_URL } = this.props.appConfig;\r\n  console.log(\"props_____\", this.props);\r\n  console.log(\"try to refreshToken authentication\");\r\n  const authString = PersistStorage.getItem(\"authentication\");\r\n  console.log(\"refreshToken.................\", authString);\r\n  const expiredTime = PersistStorage.getItem(\"expiredTime\");\r\n  let refreshToken = null;\r\n  if (authString) {\r\n    refreshToken = JSON.parse(authString).refresh_token;\r\n  } else {\r\n    return null;\r\n  }\r\n  console.log(\"refreshToken.................\", refreshToken);\r\n  if (\r\n    refreshToken ||\r\n    (expiredTime && parseInt(expiredTime) <= new Date().getTime())\r\n  ) {\r\n    await axios\r\n      .post(SERVER_URL + \"/oauth/access_token\", {\r\n        grant_type: \"refresh_token\",\r\n        refresh_token: refreshToken\r\n      })\r\n      .then(async response => {\r\n        const beforeData = JSON.parse(authString);\r\n        console.log(\"beforeDatabeforeData\", beforeData);\r\n        const userInfo = response.data;\r\n        userInfo[\"username\"] = beforeData.username;\r\n        userInfo[\"roles\"] = beforeData.roles;\r\n        await setAuthentication(userInfo);\r\n        // document.location.assign(\"/user\");\r\n      })\r\n      .catch(error => {\r\n        alert(\"login error\");\r\n      });\r\n  }\r\n};\r\n\r\nconst initialize = async () => {\r\n  const userInfo = await getAuthentication();\r\n  const initParams = {\r\n    uri: SERVER_URL + \"/graphql\",\r\n    credentials: \"include\"\r\n  };\r\n\r\n  if (userInfo) {\r\n    initParams.headers = { Authorization: \"Bearer \" + userInfo.access_token };\r\n  }\r\n\r\n  initParams.onError = error => {\r\n    if (error.networkError && error.networkError.statusCode === 401) {\r\n      refreshToken();\r\n    }\r\n  };\r\n  const client = new ApolloClient(initParams);\r\n  return { client, userInfo };\r\n  // if (currentUser && window.location.pathname === \"/\") {\r\n  //   document.location.assign(\"/\");\r\n  // }\r\n};\r\n\r\nconst logout = async () => {\r\n  PersistStorage.removeItem(\"authentication\");\r\n  refreshCurrentPage(true);\r\n  // document.location.assign(\"/\");\r\n};\r\n\r\nconst useApp = () => {\r\n  const [apolloClient, setApolloClient] = useState(null);\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  useEffect(() => {\r\n    initialize().then(value => {\r\n      const { client, userInfo } = value;\r\n      setApolloClient(client);\r\n      setCurrentUser(userInfo);\r\n    });\r\n  }, []);\r\n\r\n  return { apolloClient, currentUser, setAuthentication, logout };\r\n};\r\n\r\nexport default useApp;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { ApolloProvider } from \"@apollo/react-hooks\";\r\nimport \"./App.css\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\nimport AppPage from \"./components/pages/AppPage\";\r\nimport useApp from \"./hooks/appHooks\";\r\n\r\nexport const AppContext = React.createContext({});\r\n\r\nfunction App() {\r\n  const { apolloClient, currentUser, setAuthentication, logout } = useApp();\r\n  window.sayOK = msg => alert(\"sayOk\");\r\n  return apolloClient ? (\r\n    <div className=\"App\">\r\n      <BrowserRouter>\r\n        <ApolloProvider client={apolloClient}>\r\n          {apolloClient && (\r\n            <AppPage\r\n              currentUser={currentUser}\r\n              setAuthentication={setAuthentication}\r\n              logout={logout}\r\n            />\r\n          )}\r\n        </ApolloProvider>\r\n      </BrowserRouter>\r\n    </div>\r\n  ) : null;\r\n}\r\n\r\nexport default App;\r\n","export const getEleById = id => {\r\n  return document.getElementById(id);\r\n};\r\n\r\nexport const clickEle = id => {\r\n  const ele = getEleById(id);\r\n  ele && ele.click();\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport styled from \"styled-components\";\r\nimport { Input } from \"semantic-ui-react\";\r\nimport Countdown from \"react-countdown\";\r\nimport { Button } from \"antd\";\r\nimport { useSendCaptcha } from \"../hooks\";\r\n\r\nimport ToastHint from \"../ToastHint\";\r\n\r\nconst Container = styled.div`\r\n  position: relative;\r\n`;\r\n\r\nconst CaptchaBox = styled.div`\r\n  position: absolute;\r\n  top: 0px;\r\n  bottom: 0px;\r\n  right: 0px;\r\n  display: flex;\r\n  margin: auto;\r\n  border-right: 1px solid\r\n    ${props => (props.isError ? \"#e0b4b4\" : \"rgba(34, 36, 38, 0.15)\")};\r\n  align-items: center;\r\n  border-radius: 0.28571429rem;\r\n`;\r\n\r\nconst Seconds = styled.div`\r\n  color: #cecece;\r\n  font-size: 14px;\r\n  margin-right: 6px;\r\n`;\r\n\r\nconst renderer = ({ hours, minutes, seconds, completed }) => {\r\n  if (completed) {\r\n    // Render a completed state\r\n    return <Button type={\"link\"}>验证码</Button>;\r\n  } else {\r\n    // Render a countdown\r\n    return <Seconds>{minutes * 60 + seconds}s</Seconds>;\r\n  }\r\n};\r\n\r\nconst CaptchaButton = ({\r\n  loading,\r\n  showCountDown,\r\n  onComplete,\r\n  onSendCaptcha,\r\n  count,\r\n  onValidate,\r\n  isError\r\n}) => {\r\n  return (\r\n    <CaptchaBox isError={isError}>\r\n      {showCountDown ? (\r\n        <Countdown\r\n          date={Date.now() + 1000 * 120}\r\n          renderer={renderer}\r\n          onComplete={onComplete}\r\n        />\r\n      ) : (\r\n        <Button\r\n          block={loading}\r\n          onClick={() => onValidate(onSendCaptcha)}\r\n          type={\"link\"}\r\n        >\r\n          {count > 1 ? \"重新获取\" : \"获取验证码\"}\r\n        </Button>\r\n      )}\r\n    </CaptchaBox>\r\n  );\r\n};\r\n\r\nconst CaptchaInput = ({\r\n  value,\r\n  captchaType,\r\n  actionType,\r\n  onChange,\r\n  placeholder,\r\n  onValidate,\r\n  state,\r\n  onUpdateState,\r\n  error,\r\n  onSetError\r\n}) => {\r\n  const { showCountdown = false, count = 0, loading = false } = state;\r\n  const { onSendCaptcha } = useSendCaptcha({\r\n    captchaType,\r\n    actionType,\r\n    onUpdateState,\r\n    count,\r\n    onCompleted: res => {\r\n      if (res && res.success) {\r\n        onUpdateState(\"showCountdown\", true);\r\n        ToastHint.showSuccess(\"验证码已发送\");\r\n      } else {\r\n        onSetError(res && res.message);\r\n        ToastHint.showFailure(\"验证码发送失败，请稍后重试！\");\r\n      }\r\n    },\r\n    onError: error => {\r\n      onSetError(\"获取验证码失败\");\r\n      ToastHint.showFailure(\"验证码发送失败，请稍后重试！\");\r\n    }\r\n  });\r\n\r\n  return (\r\n    <Input\r\n      defaultValue={value}\r\n      onChange={(e, { name, value }) => {\r\n        onChange(value);\r\n      }}\r\n      maxLength={6}\r\n      placeholder={placeholder}\r\n      action={\r\n        <CaptchaButton\r\n          isError={error}\r\n          loading={loading}\r\n          showCountDown={showCountdown}\r\n          onValidate={onValidate}\r\n          onComplete={() => onUpdateState(\"showCountdown\", false)}\r\n          onSendCaptcha={onSendCaptcha}\r\n          count={count}\r\n          actionPosition={\"right\"}\r\n        />\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default CaptchaInput;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _chunk from \"lodash/chunk\";\r\nimport _map from \"lodash/map\";\r\nimport Space from \"./Space\";\r\n\r\nconst RowBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n`;\r\nconst ItemBox = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 100%;\r\n  ${props => (props.itemWidth ? `width:${props.itemWidth}` : \" flex: 1;\")};\r\n`;\r\n\r\nconst Row = ({ row, children, isLastRow, columns, cGap, itemWidth }) => {\r\n  if (isLastRow) {\r\n    const rowLength = row.length;\r\n    for (let i = 0; i < columns - rowLength; i++) {\r\n      row.push({ id: Math.random(), isEmpty: true });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <RowBox>\r\n      {_map(row, item => {\r\n        return isLastRow ? (\r\n          <>\r\n            <ItemBox key={item.id} itemWidth={itemWidth}>\r\n              {!item.isEmpty ? children && children({ item, isLastRow }) : null}\r\n            </ItemBox>\r\n            {cGap && <Space width={cGap} />}\r\n          </>\r\n        ) : (\r\n          <>\r\n            <ItemBox key={item.id} itemWidth={itemWidth}>\r\n              {children && children({ item, isLastRow })}\r\n            </ItemBox>\r\n            {cGap && <Space width={cGap} />}\r\n          </>\r\n        );\r\n      })}\r\n    </RowBox>\r\n  );\r\n};\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst FlatList = ({\r\n  items,\r\n  columns = 3,\r\n  children,\r\n  rowClass,\r\n  className,\r\n  itemWidth,\r\n  rowGap,\r\n  columnGap,\r\n  gap\r\n}) => {\r\n  const rows = _chunk(items, columns);\r\n  const rGap = rowGap || gap;\r\n  const cGap = columnGap || gap;\r\n  return (\r\n    <Container className={className}>\r\n      {_map(rows, (row, index) => {\r\n        return (\r\n          <>\r\n            <Row\r\n              columns={columns}\r\n              isLastRow={index + 1 === rows.length}\r\n              className={rowClass}\r\n              key={\"row_\" + row.id}\r\n              row={row}\r\n              cGap={cGap}\r\n              children={children}\r\n              itemWidth={itemWidth}\r\n            />\r\n            {rGap && <Space height={rGap} />}\r\n          </>\r\n        );\r\n      })}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default FlatList;\r\n","const CURRENT_REPORT_PROPS = `\r\n  currentReport{\r\n     id\r\n     reportReason\r\n     items{\r\n       id\r\n     }\r\n  }\r\n`;\r\n\r\nconst CURRENT_RATING_PROPS = `\r\n            currentRating{\r\n              id\r\n              ratingCount\r\n              score\r\n              averageScore\r\n              isCurrentRating\r\n           }\r\n`;\r\n\r\nexport const TAG_PROPS = `\r\n        id\r\n        name\r\n        status\r\n        type\r\n        dateCreated\r\n        lastUpdated\r\n`;\r\n\r\nexport const TAG_LIST_PROPS = `\r\n        id\r\n        name\r\n        type\r\n`;\r\n\r\nexport const REPORT_LIST_PROPS = `\r\n        id\r\n        creator{\r\n            id\r\n            username\r\n        }\r\n        type\r\n        status\r\n        dateAccepted\r\n        acceptedRemark\r\n        dateCreated\r\n        lastUpdated\r\n        reportReason\r\n        items{\r\n          id\r\n           name\r\n        }\r\n`;\r\n\r\nexport const REPORT_PROPS = `\r\n      ${REPORT_LIST_PROPS}\r\n`;\r\n\r\nexport const REPORT_ITEM_PROPS = `\r\n        id\r\n        name\r\n        level\r\n        dateCreated\r\n        lastUpdated\r\n`;\r\n\r\nexport const SENSITIVE_WORD_PROPS = `\r\n        id\r\n        content\r\n        description\r\n        type\r\n        url\r\n        dateCreated\r\n        lastUpdated\r\n`;\r\n\r\nexport const BLOG_LIST_PROPS = `\r\n        id\r\n        creator{\r\n          id\r\n          username\r\n          avatar{\r\n            id\r\n            url\r\n          }\r\n        }\r\n        cover{\r\n          id\r\n          url\r\n        }\r\n        title\r\n        ${CURRENT_REPORT_PROPS}\r\n        charsCount\r\n        description\r\n        status\r\n        upCount\r\n        followerCount\r\n        downCount\r\n        commentCount\r\n        readCount\r\n        type\r\n        dateCreated\r\n        lastUpdated\r\n        \r\n`;\r\n\r\nexport const BLOG_PROPS = `\r\n        ${BLOG_LIST_PROPS}\r\n        contentUrl\r\n        currentUpped\r\n        currentFollowed\r\n        creator{\r\n           id\r\n           username\r\n           email\r\n           fullName\r\n           phone \r\n           avatar{\r\n             id\r\n             url\r\n           }         \r\n        }\r\n        tags{\r\n          id\r\n          name\r\n        }\r\n        ${CURRENT_REPORT_PROPS}\r\n`;\r\n\r\nexport const BLOG_COLLECTION_LIST_PROPS = `\r\n       id\r\n       name\r\n       descriptionUrl\r\n       dateCreated\r\n       lastUpdated\r\n`;\r\n\r\nexport const BLOG_COLLECTION_PROPS = `\r\n        ${BLOG_COLLECTION_LIST_PROPS}\r\n        creator{\r\n             id\r\n             username\r\n        }\r\n        cover{\r\n             id\r\n             url \r\n        }\r\n        tags{\r\n          id\r\n          name\r\n        }\r\n        \r\n`;\r\n\r\nexport const BOOK_LIST_PROPS = `\r\n          id\r\n          name\r\n          creator{\r\n             id\r\n             username\r\n             nickname\r\n           }\r\n           cover{\r\n             id\r\n             url \r\n           }\r\n           ${CURRENT_REPORT_PROPS}\r\n           status\r\n           charsCount\r\n           dateCreated\r\n           lastUpdated\r\n           upCount\r\n           downCount\r\n           commentCount\r\n           readCount\r\n           chapterCount\r\n`;\r\n\r\nexport const BOOK_PROPS = `\r\n           ${BOOK_LIST_PROPS}\r\n           descriptionUrl\r\n           tags{\r\n             id\r\n             name\r\n             type\r\n           }\r\n           chapters{\r\n              id\r\n              title\r\n           }\r\n           currentFollowed\r\n           currentUpped\r\n           currentRating{\r\n              id\r\n              averageScore\r\n              ratingCount\r\n              score\r\n              isCurrentRating\r\n           }\r\n`;\r\n\r\nexport const CHAPTER_LIST_PROPS = `\r\n            id\r\n            creator{\r\n              id\r\n              username\r\n            }\r\n           \r\n            title\r\n            dateCreated\r\n            lastUpdated\r\n            upCount\r\n            charsCount\r\n            downCount\r\n            commentCount\r\n            readCount\r\n            sortOrder\r\n            subtitle\r\n            status\r\n`;\r\n\r\nexport const CHAPTER_PROPS = `\r\n            ${CHAPTER_LIST_PROPS}   \r\n             book{\r\n              id\r\n              name\r\n              currentFollowed \r\n              cover{\r\n                id\r\n                url\r\n              }\r\n              chapters{\r\n                id\r\n                title\r\n              }\r\n              creator{\r\n                id\r\n                nickname\r\n           \r\n              }\r\n            }\r\n            contentUrl \r\n            currentUpped\r\n            currentFollowed\r\n             currentReport{\r\n                id\r\n                reportReason\r\n                items{\r\n                  id\r\n                }\r\n             }                  \r\n`;\r\n\r\nexport const COMMENT_LIST_PROPS = `\r\n            id\r\n            creator{\r\n              id\r\n              username\r\n            }\r\n            objId\r\n            content\r\n            type\r\n            status\r\n            upCount\r\n            downCount\r\n            dateCreated\r\n            lastUpdated\r\n`;\r\n\r\nexport const COMMENT_PROPS = `\r\n            ${COMMENT_LIST_PROPS}\r\n             parent{\r\n               id\r\n               objId\r\n               type\r\n             }\r\n            \r\n`;\r\n\r\nexport const PROGRAM_LIST_PROPS = `\r\n           id\r\n           creator{\r\n              id\r\n              username\r\n           }\r\n           cover{\r\n           id\r\n           url\r\n         }\r\n           name\r\n           code\r\n           descriptionUrl\r\n           status\r\n           upCount\r\n           followerCount\r\n           totalUsedCount\r\n           currentUpped\r\n           currentFollowed\r\n           dayUsedCount\r\n           dateCreated\r\n           lastUpdated\r\n           versionCount\r\n           averageScore\r\n           scoreCount\r\n           readCount\r\n           ${CURRENT_REPORT_PROPS}\r\n           currentVersion{\r\n             id\r\n             name\r\n             versionCode\r\n           }\r\n`;\r\n\r\nexport const PROGRAM_VERSION_PROPS = `\r\n       id\r\n       name\r\n       submitter{\r\n          id\r\n          username\r\n       }\r\n       versionCode\r\n       codeFile{\r\n         id\r\n         url\r\n       } \r\n       status\r\n       description\r\n       importType \r\n       dateCreated\r\n       lastUpdated\r\n`;\r\n\r\nexport const PROGRAM_PROPS = `\r\n        ${CURRENT_RATING_PROPS}\r\n        ${PROGRAM_LIST_PROPS}\r\n         countRecordUrl\r\n         testCode\r\n         currentVersion{\r\n            ${PROGRAM_VERSION_PROPS}\r\n         }\r\n         tags{\r\n          id\r\n          name\r\n         }\r\n         gitLinks{\r\n           id\r\n           gitType{\r\n             id\r\n             name\r\n             value\r\n           }\r\n           objType\r\n           objId\r\n           linkUrl\r\n           branch\r\n         }\r\n         dataUrl\r\n         descriptionUrl\r\n         helpVideo\r\n         helpDescription\r\n         \r\n`;\r\n\r\nexport const PROGRAM_COLLECTION_PROPS = `\r\n         id\r\n         name\r\n         descriptionUrl\r\n         dateCreated\r\n         lastUpdated\r\n         cover{\r\n           id\r\n           url\r\n         }\r\n     \r\n`;\r\n\r\nexport const PROBLEM_LIST_PROPS = `\r\n        id\r\n        title\r\n        creator{\r\n          id\r\n          nickname\r\n          username\r\n          avatar{\r\n            id\r\n            url\r\n          }\r\n        }\r\n        simpleDescription\r\n        upCount\r\n        readCount\r\n        followerCount\r\n        currentUpped\r\n        currentFollowed\r\n        type\r\n        status\r\n        objType\r\n        fixedDescription\r\n        dateSolved\r\n        dateCreated\r\n        lastUpdated\r\n        descriptionUrl\r\n        charsCount\r\n`;\r\n\r\nexport const PROBLEM_PROPS = `\r\n       ${PROBLEM_LIST_PROPS}\r\n       rejectedReason\r\n       title\r\n       \r\n`;\r\n\r\nexport const CATEGORY_LIST_PROPS = `\r\n       id\r\n       name\r\n       value\r\n       description\r\n       available\r\n       parent\r\n       dateCreated\r\n       lastUpdated\r\n`;\r\n\r\nexport const CATEGORY_PROPS = `\r\n       ${CATEGORY_LIST_PROPS}\r\n`;\r\n\r\nexport const PAGE_SETTINGS_LIST_PROPS = `\r\n     id\r\n     name\r\n     type\r\n     status\r\n     dateCreated\r\n     lastUpdated\r\n`;\r\n\r\nexport const PAGE_SETTINGS_PROPS = `\r\n   ${PAGE_SETTINGS_LIST_PROPS}\r\n   dataUrl\r\n   creator{\r\n     id\r\n     username\r\n   }\r\n   updateUser{\r\n     id\r\n     username\r\n   } \r\n   homeTags{\r\n     id\r\n     name\r\n     type\r\n   }\r\n   blogs{\r\n      id\r\n      title\r\n      readCount\r\n      upCount\r\n      dateCreated\r\n      lastUpdated\r\n      description\r\n      creator{\r\n         id\r\n         avatar{\r\n           id\r\n           url\r\n         }\r\n      }\r\n      cover{\r\n       id\r\n       url\r\n     }\r\n   }\r\n   books{\r\n     id\r\n     averageScore\r\n     name\r\n     dateCreated\r\n     lastUpdated\r\n     commentCount\r\n     creator{\r\n         id\r\n         avatar{\r\n           id\r\n           url\r\n         }\r\n      }\r\n     cover{\r\n       id\r\n       url\r\n     }\r\n   }\r\n   programs{\r\n     id\r\n     name\r\n     dateCreated\r\n     lastUpdated\r\n     averageScore\r\n     scoreCount\r\n     creator{\r\n         id\r\n         avatar{\r\n           id\r\n           url\r\n         }\r\n      }\r\n     cover{\r\n       id\r\n       url\r\n     }\r\n   }\r\n`;\r\n\r\nexport const IMAGE_PROPS = `\r\n   id\r\n   name\r\n   linkUrl\r\n   url\r\n   type\r\n   __typename\r\n   dateCreated\r\n   lastUpdated\r\n   imageFile{\r\n     id\r\n     url\r\n   }\r\n`;\r\n\r\nexport const OPERATE_RESULT = `\r\n  success\r\n  message\r\n`;\r\n\r\nconst COMMENT_COMMON_PROPS = `\r\n  id\r\n  creator{\r\n    id \r\n    username\r\n    nickname\r\n    avatar{\r\n      id\r\n      url\r\n    }\r\n  }\r\n  content\r\n  upCount\r\n  ${CURRENT_REPORT_PROPS}\r\n  commentObj{\r\n    id\r\n    name\r\n  }\r\n  objId\r\n  type\r\n  dateCreated\r\n  lastUpdated\r\n  currentUpped\r\n  repliedComment{\r\n    id\r\n    creator{\r\n    id \r\n    username\r\n    nickname\r\n    avatar{\r\n      id\r\n      url\r\n    }\r\n  }\r\n  }\r\n`;\r\n\r\nexport const COMMENT_ITEM_PROPS = `\r\n  ${COMMENT_COMMON_PROPS}\r\n  subCommentsCount\r\n  last3Comments{\r\n    ${COMMENT_COMMON_PROPS}\r\n  }\r\n`;\r\n\r\nexport const CODE_PROPS = `\r\n  id\r\n  type\r\n  name\r\n  value\r\n  description\r\n  dateCreated\r\n  lastUpdated\r\n  codeRank\r\n  parent{\r\n     id\r\n     name\r\n     value\r\n  }\r\n  available\r\n`;\r\n\r\nexport const FOLLOWER_LIST_PROPS = `\r\n   id\r\n   objId\r\n   objType\r\n   lastUpdated\r\n   followedObj{\r\n      name\r\n      url\r\n      imageUrl\r\n      data\r\n   }\r\n`;\r\n\r\nexport const USER_PROPS = `\r\n  id\r\n  username\r\n  nickname\r\n  email\r\n  fullName\r\n  phone\r\n  avatar{\r\n    id\r\n    url\r\n  }\r\n`;\r\n\r\nexport const UP_LIST_PROPS = `\r\n   id\r\n   objId\r\n   objType\r\n   lastUpdated\r\n   uppedObj{\r\n      name\r\n      url\r\n      imageUrl\r\n      data\r\n   }\r\n`;\r\n\r\nexport const PROGRAM_VERSION_LIST_PROPS = `\r\n   id\r\n   name\r\n   program{\r\n     id\r\n     name\r\n   }\r\n   submitter{\r\n     id\r\n     username\r\n   }\r\n   codeFile{\r\n     id\r\n     url\r\n   }\r\n   versionCode\r\n   status\r\n   description\r\n   importType\r\n   dateCreated\r\n   publishedDate\r\n   lastUpdated\r\n`;\r\n\r\nexport const PROGRAM_VERSION_PROPS_DETAIL = `\r\n   ${PROGRAM_VERSION_LIST_PROPS}\r\n   codeFile{\r\n     id\r\n     fileName\r\n     url\r\n   }\r\n   sysVersionCode\r\n`;\r\n\r\nexport const PROGRAM_DATA_PROPS = `\r\n  id\r\n  creator{\r\n    id\r\n    nickname\r\n  }\r\n  type\r\n  status\r\n  isLarge\r\n  isTest\r\n  data\r\n  largeDataUrl\r\n  dateCreated\r\n  lastUpdated\r\n`;\r\n","import React, { useEffect } from \"react\";\r\nimport Loading from \"./Loading\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div``;\r\n\r\nconst LoadingWrapper = ({ loading, children, onUpdateCount, count }) => {\r\n  useEffect(() => {\r\n    if (count) {\r\n      onUpdateCount && onUpdateCount(count);\r\n    }\r\n  }, [count]);\r\n  return loading ? (\r\n    <Loading />\r\n  ) : (\r\n    <Container className={\"loadingWrapper\"}>{children}</Container>\r\n  );\r\n};\r\n\r\nexport default LoadingWrapper;\r\n","import _find from \"lodash/find\";\r\n\r\nexport const getOptionByKey = (options, key, value) => {\r\n  if (options instanceof Array) {\r\n    return _find(options, o => o[key] === value);\r\n  }\r\n  return options[key];\r\n};\r\n\r\nexport const getValueByKey = (options, { valueKey = \"value\", key, value }) => {\r\n  if (options instanceof Array) {\r\n    const option = getOptionByKey(options, key, value);\r\n    return option[valueKey];\r\n  }\r\n  return getOptionByKey(options, key, value);\r\n};\r\n","import store from \"storejs\";\r\nclass PersistStorage {\r\n  static getItem(key) {\r\n    return store.get(key);\r\n  }\r\n\r\n  static getItemRO(key) {\r\n    return this.getItem(key) || {};\r\n  }\r\n\r\n  static setItem(key, data) {\r\n    store.set(key, data);\r\n    return data;\r\n  }\r\n\r\n  static removeItem(key) {\r\n    const data = this.getItem(key);\r\n    store.remove(key);\r\n    return data;\r\n  }\r\n}\r\n\r\nexport default PersistStorage;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useQuery } from \"@apollo/react-hooks\";\r\nimport LoadingWrapper from \"./LoadingWapper\";\r\nimport _get from \"lodash/get\";\r\n\r\nconst _QueryList = ({\r\n  gql,\r\n  dataKey,\r\n  dataPath,\r\n  countPath,\r\n  showLoading = true,\r\n  renderWhenLoading,\r\n  children,\r\n  searchFields,\r\n  limit,\r\n  currentPage,\r\n  onUpdateCurrentPage,\r\n  queryOptions = {},\r\n  onUpdateCount\r\n}) => {\r\n  const { loading, error, data, refetch, networkStatus } = useQuery(gql, {\r\n    variables: {\r\n      limit,\r\n      ...searchFields,\r\n      offset: (currentPage - 1) * limit\r\n    },\r\n    ...queryOptions\r\n  });\r\n  // 渲染自定义Loading\r\n  if (loading && renderWhenLoading && typeof renderWhenLoading === \"function\") {\r\n    return renderWhenLoading();\r\n  }\r\n\r\n  const items =\r\n    dataPath && countPath\r\n      ? _get(data, dataPath, [])\r\n      : _get(data, dataKey + \".items\", []);\r\n  const count =\r\n    dataPath && countPath\r\n      ? _get(data, countPath, [])\r\n      : _get(data, dataKey + \".count\", 0);\r\n\r\n  return (\r\n    <LoadingWrapper\r\n      loading={loading && showLoading}\r\n      count={count}\r\n      onUpdateCount={onUpdateCount}\r\n    >\r\n      {children({\r\n        loading,\r\n        error,\r\n        refetch,\r\n        items,\r\n        count,\r\n        currentPage,\r\n        paginationPages: parseInt((count / limit).toString()) + 1,\r\n        onUpdateCurrentPage\r\n      })}\r\n    </LoadingWrapper>\r\n  );\r\n};\r\n\r\nconst useQueryList = ({ initCurrentPage }) => {\r\n  const [currentPage, setCurrentPage] = useState(initCurrentPage);\r\n  return { currentPage, setCurrentPage };\r\n};\r\n\r\nconst QueryList = ({\r\n  gql,\r\n  dataKey,\r\n  dataPath,\r\n  countPath,\r\n  showLoading = true,\r\n  renderWhenLoading,\r\n  children,\r\n  searchFields,\r\n  limit = 10,\r\n  initCurrentPage = 1,\r\n  queryOptions,\r\n  onUpdateCount\r\n}) => {\r\n  const { currentPage, setCurrentPage } = useQueryList({ initCurrentPage });\r\n  return (\r\n    <_QueryList\r\n      gql={gql}\r\n      dataKey={dataKey}\r\n      dataPath={dataPath}\r\n      countPath={countPath}\r\n      children={children}\r\n      renderWhenLoading={renderWhenLoading}\r\n      searchFields={searchFields}\r\n      showLoading={showLoading}\r\n      limit={limit}\r\n      currentPage={currentPage}\r\n      queryOptions={queryOptions}\r\n      onUpdateCurrentPage={setCurrentPage}\r\n      onUpdateCount={onUpdateCount}\r\n    />\r\n  );\r\n};\r\n\r\nexport default QueryList;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport QueryList from \"./QueryList\";\r\nimport { Pagination } from \"semantic-ui-react\";\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst ContentBox = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst PaginationBox = styled.div``;\r\n\r\nconst PaginationQueryList = ({\r\n  showLoading = true,\r\n  limit = 10,\r\n  initCurrentPage = 1,\r\n  gql,\r\n  dataKey,\r\n  searchFields,\r\n  countPath,\r\n  dataPath,\r\n  renderWhenLoading,\r\n  renderPagination,\r\n  children,\r\n  paginationSize,\r\n  paginationSecondary,\r\n  hidePaginationInSinglePage = false,\r\n  queryOptions,\r\n  onUpdateCount\r\n}) => {\r\n  return (\r\n    <Container>\r\n      <QueryList\r\n        showLoading={showLoading}\r\n        gql={gql}\r\n        limit={limit}\r\n        countPath={countPath}\r\n        dataPath={dataPath}\r\n        dataKey={dataKey}\r\n        initCurrentPage={initCurrentPage}\r\n        searchFields={searchFields}\r\n        queryOptions={queryOptions}\r\n        renderWhenLoading={renderWhenLoading}\r\n        onUpdateCount={onUpdateCount}\r\n      >\r\n        {({\r\n          loading,\r\n          error,\r\n          refetch,\r\n          items,\r\n          count,\r\n          currentPage,\r\n          paginationPages,\r\n          onUpdateCurrentPage\r\n        }) => {\r\n          return (\r\n            <ContentBox>\r\n              {children && children({ loading, error, refetch, items, count })}\r\n              {hidePaginationInSinglePage && paginationPages === 1 ? null : (\r\n                <PaginationBox className={\"paginationWrapper\"}>\r\n                  {renderPagination ? (\r\n                    renderPagination({})\r\n                  ) : (\r\n                    <Pagination\r\n                      pointing\r\n                      secondary={paginationSecondary}\r\n                      size={paginationSize}\r\n                      activePage={currentPage}\r\n                      totalPages={count / limit}\r\n                      onPageChange={(event, { activePage }) => {\r\n                        onUpdateCurrentPage(activePage);\r\n                      }}\r\n                    />\r\n                  )}\r\n                </PaginationBox>\r\n              )}\r\n            </ContentBox>\r\n          );\r\n        }}\r\n      </QueryList>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default PaginationQueryList;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background-color: whitesmoke;\r\n  min-height: 160px;\r\n`;\r\n\r\nconst EmptyBox = styled.div`\r\n  font-weight: bold;\r\n  font-size: 16px;\r\n  opacity: 0.8;\r\n`;\r\n\r\nconst Empty = ({ text, children }) => {\r\n  return (\r\n    <Container>{children ? children : <EmptyBox>{text}</EmptyBox>}</Container>\r\n  );\r\n};\r\n\r\nexport default Empty;\r\n","import React, { useState, useReducer } from \"react\";\r\nimport _get from \"lodash/get\";\r\nimport ReportModal from \"./ReportModal\";\r\nimport LoginHint from \"./LoginHint\";\r\n\r\nconst _ReportHint = ({ onShow, setOnShow }) => {\r\n  const [variables, setVariables] = useState({});\r\n  const [config, setConfig] = useState({});\r\n  const [currentReport, setCurrentReport] = useState(null);\r\n  const [open, setOpen] = useState(false);\r\n  if (!onShow) {\r\n    setOnShow((reportType, objId, currentReport, rConfig) => {\r\n      setOpen(true);\r\n      setVariables({ objId, type: reportType, id: _get(currentReport, \"id\") });\r\n      setConfig(rConfig);\r\n      setCurrentReport(currentReport);\r\n    });\r\n  }\r\n  const onHide = () => {\r\n    setOpen(false);\r\n  };\r\n  const { title } = config;\r\n\r\n  return open ? (\r\n    <ReportModal\r\n      title={title}\r\n      {...variables}\r\n      open={open}\r\n      onHide={onHide}\r\n      currentReport={currentReport}\r\n      reportCallback={config.reportCallback}\r\n    />\r\n  ) : null;\r\n};\r\n\r\nclass ReportHint {\r\n  static onShow = null;\r\n\r\n  static setOnShow = onShowFnc => {\r\n    this.onShow = onShowFnc;\r\n  };\r\n  static hintComponent = (\r\n    <_ReportHint onShow={this.onShow} setOnShow={this.setOnShow} />\r\n  );\r\n  static render() {\r\n    return this.hintComponent;\r\n  }\r\n\r\n  static show(reportType, objId, currentReport, rConfig) {\r\n    LoginHint.checkLogin(() =>\r\n      this.onShow(reportType, objId, currentReport, rConfig)\r\n    );\r\n  }\r\n}\r\nexport default ReportHint;\r\n","// program\r\nexport const PROGRAM_STATUS = [\r\n  { label: \"创建中\", value: \"Draft\", bColor: \"green\" },\r\n  { label: \"待审核\", value: \"Awaiting\", bColor: \"red\" },\r\n  { label: \"已发布\", value: \"Published\", bColor: \"dodgerblue\" },\r\n  { label: \"已删除\", value: \"Archived\", bColor: \"gray\" }\r\n];\r\n\r\n// problem\r\nexport const PROBLEM_STATUS = [\r\n  { label: \"待审核\", value: \"Awaiting\", bColor: \"red\" },\r\n  { label: \"处理中\", value: \"Published\", bColor: \"coral\" },\r\n  { label: \"已采纳\", value: \"Accepted\", bColor: \"green\" },\r\n  { label: \"被拒绝\", value: \"Rejected\", bColor: \"orange\" },\r\n  { label: \"已删除\", value: \"Archived\", bColor: \"gray\" }\r\n];\r\n\r\n// programVersion\r\n\r\nexport const PROGRAM_VERSION_STATUS = [\r\n  { label: \"创建中\", value: \"Draft\", bColor: \"green\", updateText: \"\" },\r\n  { label: \"审核中\", value: \"Awaiting\", bColor: \"red\", updateText: \"还原\" },\r\n  {\r\n    label: \"已发布\",\r\n    value: \"Published\",\r\n    bColor: \"dodgerblue\",\r\n    updateText: \"发布\"\r\n  },\r\n  { label: \"已拒绝\", value: \"Rejected\", bColor: \"black\", updateText: \"拒绝\" },\r\n  { label: \"已删除\", value: \"Archived\", bColor: \"orange\", updateText: \"删除\" }\r\n];\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { AppContext } from \"../../App\";\r\nimport _toLower from \"lodash/toLower\";\r\n\r\nconst Container = styled.div`\r\n  cursor: pointer;\r\n`;\r\n\r\nconst getLinkUrl = (objId, objType) => {\r\n  return `/${_toLower(objType)}/${objId}`;\r\n};\r\n\r\nconst LinkToObject = ({ objId, objType, children }) => {\r\n  return (\r\n    <AppContext.Consumer>\r\n      {props => {\r\n        const { onGoTo } = props;\r\n        return (\r\n          <Container\r\n            onClick={e => {\r\n              e.stopPropagation();\r\n              onGoTo(getLinkUrl(objId, objType));\r\n            }}\r\n          >\r\n            {children}\r\n          </Container>\r\n        );\r\n      }}\r\n    </AppContext.Consumer>\r\n  );\r\n};\r\n\r\nexport default LinkToObject;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Avatar from \"../../pages/transformable/common/Avatar\";\r\nimport _get from \"lodash/get\";\r\nimport { Icon, Popup } from \"semantic-ui-react\";\r\nimport { _getByRank } from \"../../utils/utils\";\r\nimport { getOptionByKey } from \"../../utils/optionsUtils\";\r\nimport { PROBLEM_STATUS } from \"../OPTIONS\";\r\nimport { PROBLEM_TYPE } from \"../CONSULT\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-bottom: 26px;\r\n  box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.3);\r\n  padding: 10px 20px;\r\n  width: 100%;\r\n`;\r\n\r\nconst HeaderBox = styled.div`\r\n  width: 100%;\r\n  margin-bottom: 16px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  text-align: left;\r\n`;\r\n\r\nconst Header = ({ type, title, status }) => {\r\n  const { label, bColor } = getOptionByKey(PROBLEM_STATUS, \"value\", status);\r\n  return (\r\n    <HeaderBox>\r\n      <Title>{title}</Title>\r\n      <Status bColor={bColor}>{label}</Status>\r\n    </HeaderBox>\r\n  );\r\n};\r\n\r\nconst Status = styled.div`\r\n  background-color: ${props => props.bColor};\r\n  color: white;\r\n  width: 60px;\r\n  font-size: 14px;\r\n  line-height: 24px;\r\n  border-radius: 12px;\r\n  height: 24px;\r\n`;\r\n\r\nconst Content = styled.div`\r\n  margin-bottom: 16px;\r\n`;\r\n\r\nconst FooterBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 6px;\r\n`;\r\n\r\nconst FooterItem = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-right: 20px;\r\n`;\r\n\r\nconst Text = styled.div`\r\n  margin-left: 16px;\r\n`;\r\n\r\nconst Footer = ({ item }) => {\r\n  const typeOption = getOptionByKey(PROBLEM_TYPE, \"value\", item.type);\r\n  return (\r\n    <FooterBox>\r\n      <FooterItem>\r\n        <Avatar url={_get(item, \"creator.avatar.url\", \"\")} />\r\n        <Text>\r\n          {_getByRank(item.creator, [\"nickname\", \"username\"], \"-username-\")}\r\n        </Text>\r\n      </FooterItem>\r\n      <FooterItem>\r\n        <Icon name={\"calendar alternate outline\"} />\r\n        <Text>{_get(item, \"lastUpdated\", \"-date-\")}</Text>\r\n      </FooterItem>\r\n      <FooterItem>\r\n        <Icon name={\"heart outline\"} />\r\n        <Text>{_get(item, \"upCount\", \"-like-\")}</Text>\r\n      </FooterItem>\r\n      <FooterItem>\r\n        <Icon name={\"eye\"} />\r\n        <Text>{_get(item, \"readCount\", \"-read-\")}</Text>\r\n      </FooterItem>\r\n      <FooterItem>\r\n        <Popup\r\n          content={typeOption.label}\r\n          trigger={\r\n            <Icon\r\n              name={typeOption.value === \"Bug\" ? \"bug\" : \"envelope open\"}\r\n              style={{ color: typeOption.bgColor, fontSize: 16 }}\r\n            />\r\n          }\r\n        />\r\n      </FooterItem>\r\n    </FooterBox>\r\n  );\r\n};\r\n\r\nconst ContentText = styled.div`\r\n  text-align: left;\r\n`;\r\n\r\nconst ActionsBox = styled.div``;\r\n\r\nconst ProblemItem = ({ problem }) => {\r\n  const { id, type, title, simpleDescription, status } = problem;\r\n\r\n  return (\r\n    <Container>\r\n      <Header type={type} title={title} status={status} />\r\n      <Content>\r\n        <ContentText>{simpleDescription}</ContentText>\r\n      </Content>\r\n      <Footer item={problem} />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ProblemItem;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport \"braft-editor/dist/index.css\";\r\nimport BraftEditor from \"braft-editor\";\r\nimport { getDataFromUrl } from \"../utils/urlData\";\r\n\r\nconst useEditor = ({ value }) => {\r\n  const [defaultValue, setDefaultValue] = useState(null);\r\n  const [refreshKey, setRefresh] = useState(\"refresh\");\r\n  const onUpdateDefaultValue = content => {\r\n    setDefaultValue(BraftEditor.createEditorState(content));\r\n    setRefresh(Math.random.toString());\r\n  };\r\n  useEffect(() => {\r\n    getDataFromUrl(value, \"data.content\", onUpdateDefaultValue);\r\n  }, [defaultValue === null]);\r\n\r\n  return { defaultValue, refreshKey };\r\n};\r\n\r\nconst RichTextEditor = ({\r\n  placeholder,\r\n  disabled,\r\n  language = \"zh\",\r\n  fieldKey,\r\n  value,\r\n  onUpdateField\r\n}) => {\r\n  const { defaultValue, refreshKey } = useEditor({ value });\r\n  return (\r\n    <BraftEditor\r\n      key={refreshKey}\r\n      onChange={editorState => onUpdateField(fieldKey, editorState.toHTML())}\r\n      placeholder={placeholder}\r\n      className=\"my-editor\"\r\n      language={language}\r\n      readOnly={disabled}\r\n      defaultValue={defaultValue}\r\n    />\r\n  );\r\n};\r\n\r\nexport default RichTextEditor;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Icon } from \"semantic-ui-react\";\r\n\r\nconst Container = styled.div`\r\n  position: fixed;\r\n  left: 0;\r\n  right: 0;\r\n  top: 0;\r\n  bottom: 0;\r\n  margin: auto;\r\n  width: 260px;\r\n  height: 80px;\r\n  z-index: 100000;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 10px;\r\n  transition-duration: 200ms;\r\n  transition-timing-function: linear;\r\n  transition-property: transform;\r\n  transform: scaleX(${props => props.scale}) scaleY(${props => props.scale});\r\n`;\r\n\r\nconst ToastText = styled.div`\r\n  color: white;\r\n  font-size: 16px;\r\n  margin-left: 6px;\r\n`;\r\n\r\nconst _ToastHint = ({ onShow, setOnShow }) => {\r\n  const [config, setConfig] = useState({});\r\n  const [type, setType] = useState(\"\");\r\n  const [scale, setScale] = useState(1);\r\n  const [msg, setMsg] = useState(\"\");\r\n  if (!onShow) {\r\n    setOnShow((type, msg, rConfig) => {\r\n      setType(type);\r\n      setMsg(msg);\r\n      setConfig(rConfig);\r\n      // 2s后自动消失\r\n      const timerScale = setTimeout(() => {\r\n        setScale(1.2);\r\n        clearTimeout(timerScale);\r\n      }, 0);\r\n      // 2s后自动消失\r\n      const timer = setTimeout(() => {\r\n        setType(\"\");\r\n        setScale(1);\r\n        if (rConfig && rConfig.callback) {\r\n          rConfig.callback();\r\n        }\r\n        clearTimeout(timer);\r\n      }, 2000);\r\n    });\r\n  }\r\n  if (!type) {\r\n    return null;\r\n  }\r\n  return (\r\n    <Container scale={scale}>\r\n      <Icon\r\n        style={{ color: type === \"Success\" ? \"green\" : \"red\" }}\r\n        size={\"large\"}\r\n        name={\r\n          type === \"Success\" ? \"check circle outline\" : \"exclamation triangle\"\r\n        }\r\n      />\r\n      <ToastText>{msg}</ToastText>\r\n    </Container>\r\n  );\r\n};\r\n\r\nclass ToastHint {\r\n  static onShow = null;\r\n\r\n  static setOnShow = onShowFnc => {\r\n    this.onShow = onShowFnc;\r\n  };\r\n  static hintComponent = (\r\n    <_ToastHint onShow={this.onShow} setOnShow={this.setOnShow} />\r\n  );\r\n  static render() {\r\n    return this.hintComponent;\r\n  }\r\n\r\n  static show(type, msg, rConfig) {\r\n    this.onShow(type, msg, rConfig);\r\n  }\r\n\r\n  static showSuccess(msg, rConfig) {\r\n    this.show(\"Success\", msg, rConfig);\r\n  }\r\n\r\n  static showFailure(msg, rConfig) {\r\n    this.show(\"Failure\", msg, rConfig);\r\n  }\r\n}\r\n\r\nexport default ToastHint;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport BasicForm from \"../../common/BasicForm\";\r\nimport { Input, Button, Select } from \"semantic-ui-react\";\r\nimport RichTextEditor from \"../../common/RichTextEditor\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { SAVE_PROBLEM } from \"../../common/mutationGql\";\r\nimport _get from \"lodash/get\";\r\nimport { PROBLEM_EDIT } from \"../../common/CONSULT\";\r\nimport { useCopyUrlsToFields } from \"../../common/hooks\";\r\nimport PageTitle from \"../../common/PageTitle\";\r\n\r\nconst Container = styled.div``;\r\n\r\nconst PROBLEM_OPTIONS = [\r\n  { text: \"建议\", value: \"Advice\" },\r\n  { text: \"Bug\", value: \"Bug\" }\r\n];\r\n\r\nconst ProblemForm = ({\r\n  formData = { type: \"Advice\" },\r\n  loading,\r\n  history,\r\n  refetch,\r\n  isEdit\r\n}) => {\r\n  const { item: form } = useCopyUrlsToFields(formData, \"descriptionUrl\");\r\n  const [saveProblem, { data, loading: mLoading }] = useMutation(SAVE_PROBLEM, {\r\n    onCompleted: result => {\r\n      const id = _get(result, \"saveProblem.id\");\r\n      if (!formData) {\r\n        history.push(`${PROBLEM_EDIT}/${id}`);\r\n      } else {\r\n        history.push(`${PROBLEM_EDIT}/${id}`);\r\n      }\r\n    }\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <PageTitle\r\n        title={`${isEdit ? \"编辑\" : \"创建\"}-${form.title}`}\r\n        metaKeywords={`${form.title}`}\r\n      />\r\n      <BasicForm\r\n        key={form.description}\r\n        loading={loading || mLoading}\r\n        width={900}\r\n        formData={form}\r\n        onValue={() => {}}\r\n        items={[\r\n          {\r\n            label: \"标题\",\r\n            required: true,\r\n            fieldKey: \"title\",\r\n            placeholder: `请填写建议名称`,\r\n            renderControl: ({ value, onChange }) => (\r\n              <Input\r\n                value={value}\r\n                onChange={(e, { name, value }) => {\r\n                  onChange(value);\r\n                }}\r\n              />\r\n            )\r\n          },\r\n          {\r\n            label: \"类型\",\r\n            required: true,\r\n            fieldKey: \"type\",\r\n            renderControl: ({ value, onChange }) => (\r\n              <Select\r\n                disabled={isEdit}\r\n                options={PROBLEM_OPTIONS}\r\n                defaultValue={value}\r\n                onChange={(e, { name, value }) => {\r\n                  console.log(\"value____GGDSFSDFDS______\", value);\r\n                  onChange(value);\r\n                }}\r\n                placeholder={`请填写选择类型`}\r\n              />\r\n            )\r\n          },\r\n          {\r\n            label: \"描述\",\r\n            fieldKey: \"description\",\r\n            required: true,\r\n            placeholder: `请在此描述问题`,\r\n            renderControl: ({\r\n              item: { placeholder, fieldKey },\r\n              value,\r\n              onUpdateField\r\n            }) => {\r\n              return (\r\n                <RichTextEditor\r\n                  placeholder={placeholder}\r\n                  fieldKey={fieldKey}\r\n                  value={value}\r\n                  onUpdateField={onUpdateField}\r\n                />\r\n              );\r\n            }\r\n          }\r\n        ]}\r\n      >\r\n        {({ form, onValidate }) => {\r\n          return (\r\n            <Button\r\n              style={{ width: 200 }}\r\n              onClick={() => {\r\n                onValidate(() =>\r\n                  saveProblem({\r\n                    variables: {\r\n                      id: form.id,\r\n                      title: form.title,\r\n                      type: form.type,\r\n                      description: form.description\r\n                    }\r\n                  })\r\n                );\r\n              }}\r\n              color=\"teal\"\r\n            >\r\n              保存\r\n            </Button>\r\n          );\r\n        }}\r\n      </BasicForm>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProblemForm;\r\n","import React, { useEffect, useState, useReducer } from \"react\";\r\nimport {\r\n  Modal,\r\n  Header,\r\n  Icon,\r\n  Button,\r\n  Radio,\r\n  TextArea\r\n} from \"semantic-ui-react\";\r\nimport { useQuery } from \"react-apollo\";\r\nimport { GET_REPORT_ITEMS_GROUPS } from \"./queryGql\";\r\nimport _get from \"lodash/get\";\r\nimport _map from \"lodash/map\";\r\nimport _filter from \"lodash/filter\";\r\nimport _isEmpty from \"lodash/isEmpty\";\r\nimport styled from \"styled-components\";\r\nimport { useMutation } from \"react-apollo\";\r\nimport { SAVE_REPORT } from \"./mutationGql\";\r\nimport ModalHint from \"./ModalHint\";\r\nimport ToastHint from \"./ToastHint\";\r\n\r\nconst GroupItemBox = styled.div`\r\n  margin-bottom: 20px;\r\n  pointer-events: ${props => (props.disabled ? \"none\" : \"\")};\r\n`;\r\n\r\nconst GroupTitle = styled.div`\r\n  color: #99a2aa;\r\n  margin-bottom: 12px;\r\n`;\r\n\r\nconst GroupContent = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\nconst GroupItem = ({ group, ids, onUpdateItem, disabled }) => {\r\n  const { name, reportItems } = group;\r\n  return (\r\n    <GroupItemBox disabled={disabled}>\r\n      <GroupTitle>{name}</GroupTitle>\r\n      <GroupContent>\r\n        {_map(reportItems, item => {\r\n          const { id, name } = item;\r\n          const checked = ids.indexOf(id) >= 0;\r\n          return (\r\n            <Radio\r\n              key={\"report_item_\" + item.id}\r\n              type={\"radio\"}\r\n              label={name}\r\n              style={{ marginRight: 30 }}\r\n              value={id}\r\n              onClick={() => {\r\n                onUpdateItem(id, !checked);\r\n              }}\r\n              disabled={disabled}\r\n              checked={checked}\r\n            />\r\n          );\r\n        })}\r\n      </GroupContent>\r\n    </GroupItemBox>\r\n  );\r\n};\r\n\r\nconst InputReasonBox = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  pointer-events: ${props => (props.disabled ? \"none\" : \"\")};\r\n`;\r\n\r\nconst InputText = styled(TextArea)`\r\n  margin-top: 10px;\r\n  width: 100%;\r\n  padding: 6px;\r\n`;\r\n\r\nconst InputReason = ({ reason, onUpdateReason, disabled }) => {\r\n  const hasReasonAndDisabled = disabled && reason;\r\n  const [show, setShow] = useState(hasReasonAndDisabled);\r\n  if (disabled && !reason) {\r\n    return null;\r\n  }\r\n  return (\r\n    <InputReasonBox disabled={disabled}>\r\n      <Radio\r\n        type={\"radio\"}\r\n        label={\"其他\"}\r\n        disabled={disabled}\r\n        checked={show}\r\n        onChange={(e, { checked }) => {\r\n          setShow(checked);\r\n        }}\r\n        onClick={() => setShow(!show)}\r\n      />\r\n      {show && (\r\n        <InputText\r\n          disabled={disabled}\r\n          placeholder={\"请输入举报原因\"}\r\n          value={reason}\r\n          maxLength={\"255\"}\r\n          onChange={(e, { value }) => {\r\n            onUpdateReason(value);\r\n          }}\r\n        />\r\n      )}\r\n    </InputReasonBox>\r\n  );\r\n};\r\n\r\nconst PanelBox = styled.div``;\r\n\r\nconst ReportPanel = ({\r\n  groups,\r\n  disabled,\r\n  ids,\r\n  onUpdateItem,\r\n  reportReason,\r\n  onUpdateReason\r\n}) => {\r\n  return (\r\n    <PanelBox>\r\n      {_map(groups, g => {\r\n        return (\r\n          <GroupItem\r\n            key={\"report_items_group_\" + g.id}\r\n            disabled={disabled}\r\n            group={g}\r\n            ids={ids}\r\n            onUpdateItem={onUpdateItem}\r\n          />\r\n        );\r\n      })}\r\n      <InputReason\r\n        onUpdateReason={onUpdateReason}\r\n        reason={reportReason}\r\n        disabled={disabled}\r\n      />\r\n    </PanelBox>\r\n  );\r\n};\r\n\r\nconst useReport = ({ currentReport, onHide, reportCallback }) => {\r\n  const [report, setReport] = useState(currentReport);\r\n  const [reportReason, setReportReason] = useState(\r\n    _get(currentReport, \"reportReason\")\r\n  );\r\n  const [ids, setIds] = useState(\r\n    _map(_get(currentReport, \"items\", []), item => item.id)\r\n  );\r\n  const onUpdateItem = (id, isAdd) => {\r\n    if (isAdd) {\r\n      setIds([...ids, id]);\r\n    } else {\r\n      setIds(_filter(ids, i => i !== id));\r\n    }\r\n  };\r\n\r\n  const onUpdateReason = reason => {\r\n    setReportReason(reason);\r\n  };\r\n\r\n  const [onSaveReport, { loading: mLoading }] = useMutation(SAVE_REPORT, {\r\n    onCompleted: data => {\r\n      const report = _get(data, \"saveReport\");\r\n      setReport(report);\r\n      onHide && onHide();\r\n      reportCallback && reportCallback(report);\r\n      ToastHint.showSuccess(\"举报成功！\");\r\n    },\r\n    onError: () => ModalHint.error(\"举报失败\")\r\n  });\r\n\r\n  return {\r\n    ids,\r\n    report,\r\n    onSaveReport,\r\n    onUpdateItem,\r\n    reportReason,\r\n    onUpdateReason,\r\n    mLoading\r\n  };\r\n};\r\n\r\nconst _ReportModal = ({\r\n  title,\r\n  onHide,\r\n  currentReport,\r\n  reportCallback,\r\n  groups,\r\n  objId,\r\n  type\r\n}) => {\r\n  const {\r\n    report,\r\n    onSaveReport,\r\n    ids,\r\n    onUpdateItem,\r\n    reportReason,\r\n    onUpdateReason,\r\n    mLoading\r\n  } = useReport({\r\n    currentReport,\r\n    onHide,\r\n    reportCallback\r\n  });\r\n  return (\r\n    <Modal\r\n      style={{ top: 200 }}\r\n      centered={false}\r\n      closeIcon\r\n      open={true}\r\n      onClose={onHide}\r\n    >\r\n      <Header icon=\"info circle\" content={title} />\r\n      <Modal.Content>\r\n        <ReportPanel\r\n          ids={ids}\r\n          disabled={report}\r\n          groups={groups}\r\n          onUpdateItem={onUpdateItem}\r\n          onUpdateReason={onUpdateReason}\r\n          reportReason={reportReason}\r\n        />\r\n      </Modal.Content>\r\n      <Modal.Actions>\r\n        <Button\r\n          primary\r\n          loading={mLoading}\r\n          disabled={(_isEmpty(ids) && !reportReason) || report}\r\n          color=\"red\"\r\n          onClick={() =>\r\n            onSaveReport({\r\n              variables: { itemIds: ids, type, objId, reportReason }\r\n            })\r\n          }\r\n        >\r\n          {report ? \"已举报\" : \"提交\"}\r\n        </Button>\r\n      </Modal.Actions>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nconst ReportModal = ({\r\n  type,\r\n  objId,\r\n  title = \"请选择举报理由\",\r\n  currentReport,\r\n  onHide,\r\n  reportCallback\r\n}) => {\r\n  const { loading, error, data, refetch, networkStatus } = useQuery(\r\n    GET_REPORT_ITEMS_GROUPS,\r\n    {\r\n      variables: {\r\n        types: [\"REPORT_ITEM_GROUP\"],\r\n        sort: \"codeRank\",\r\n        order: \"desc\"\r\n      }\r\n    }\r\n  );\r\n  const groups = _get(data, \"codes.items\", []);\r\n  return (\r\n    <_ReportModal\r\n      title={title}\r\n      reportCallback={reportCallback}\r\n      currentReport={currentReport}\r\n      onHide={onHide}\r\n      groups={groups}\r\n      type={type}\r\n      objId={objId}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ReportModal;\r\n","import React from \"react\";\r\nimport { Dimmer, Loader, Image, Segment } from \"semantic-ui-react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div``;\r\n\r\nconst MaskBox = styled.div`\r\n  background-color: black;\r\n  opacity: 0.2;\r\n  position: absolute;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  z-index: 1000;\r\n`;\r\n\r\nconst Loading = ({ children, hasMask }) => {\r\n  const loader = <Loader>{children}</Loader>;\r\n  return hasMask ? (\r\n    <MaskBox>\r\n      <Dimmer active>{loader}</Dimmer>\r\n    </MaskBox>\r\n  ) : (\r\n    <Container>{loader}</Container>\r\n  );\r\n};\r\n\r\nexport default Loading;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Modal, Header, Icon, Button } from \"semantic-ui-react\";\r\n\r\nconst ErrorModal = ({\r\n  children,\r\n  open,\r\n  message,\r\n  errorTitle = \"错误请注意！\",\r\n  onHide\r\n}) => {\r\n  return (\r\n    <Modal\r\n      style={{ top: 200 }}\r\n      centered={false}\r\n      closeIcon\r\n      open={open}\r\n      onClose={onHide}\r\n    >\r\n      <Header icon=\"info circle\" content={errorTitle} />\r\n      <Modal.Content>\r\n        <p>{message}</p>\r\n      </Modal.Content>\r\n      <Modal.Actions>\r\n        <Button color=\"red\" onClick={onHide}>\r\n          <Icon name=\"remove\" /> 关闭\r\n        </Button>\r\n      </Modal.Actions>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default ErrorModal;\r\n","import React, { useEffect, useState, useReducer } from \"react\";\r\nimport ErrorModal from \"./ErrorModal\";\r\nimport _noop from \"lodash/noop\";\r\nimport _toLower from \"lodash/toLower\";\r\nimport _get from \"lodash/get\";\r\nimport styled from \"styled-components\";\r\nimport { Confirm } from \"semantic-ui-react\";\r\nconst ERROR = \"error\";\r\nconst INFO = \"info\";\r\nconst CONFIRM = \"info\";\r\n\r\nconst _ModalHint = ({ onShow, setOnShow }) => {\r\n  const [message, setMessage] = useState(\"\");\r\n  const [config, setConfig] = useState({});\r\n  const [type, dispatch] = useReducer((state, action) => {\r\n    return _toLower(action);\r\n  }, \"\");\r\n  if (!onShow) {\r\n    setOnShow((action, msg, mConfig) => {\r\n      dispatch(action);\r\n      setMessage(msg);\r\n      if (mConfig) {\r\n        setConfig(mConfig);\r\n      }\r\n    });\r\n  }\r\n  const onHide = () => {\r\n    dispatch(\"\");\r\n  };\r\n\r\n  const onOk = _get(config, \"onOk\", _noop);\r\n\r\n  const { title } = config;\r\n  switch (type) {\r\n    case ERROR:\r\n      return (\r\n        <ErrorModal\r\n          errorTitle={title}\r\n          open={!!type}\r\n          message={message}\r\n          onHide={onHide}\r\n        />\r\n      );\r\n    case INFO:\r\n    case CONFIRM:\r\n      return (\r\n        <Confirm\r\n          style={{ top: 300 }}\r\n          open={!!type}\r\n          header={{ content: _get(config, \"title\") }}\r\n          content={_get(config, \"content\")}\r\n          cancelButton={{ content: _get(config, \"cancelText\", \"取消\") }}\r\n          confirmButton={{\r\n            content: _get(config, \"okText\", \"确定\"),\r\n            loading: _get(config, \"loading\", false)\r\n          }}\r\n          onConfirm={() => onOk(onHide)}\r\n          onCancel={onHide}\r\n        />\r\n      );\r\n    default:\r\n      return null;\r\n  }\r\n};\r\n\r\nclass ModalHint {\r\n  static onShow = null;\r\n\r\n  static setOnShow = onShowFnc => {\r\n    this.onShow = onShowFnc;\r\n  };\r\n\r\n  static hintComponent = (\r\n    <_ModalHint onShow={this.onShow} setOnShow={this.setOnShow} />\r\n  );\r\n  static render() {\r\n    return this.hintComponent;\r\n  }\r\n\r\n  static error(msg, options, onOk) {\r\n    this.onShow(ERROR, msg, { ...options, onOk });\r\n  }\r\n  static info(msg) {}\r\n\r\n  static confirm(options, onOk) {\r\n    this.onShow(CONFIRM, \"\", { ...options, onOk });\r\n  }\r\n}\r\nexport default ModalHint;\r\n","import Helmet from \"react-helmet\";\r\nimport React from \"react\";\r\n\r\nconst PageTitle = ({ title, metaKeywords }) => (\r\n  <Helmet>\r\n    <title>{title + \"-LazyChun\"}</title>\r\n    <meta name=\"keywords\" content={metaKeywords} />\r\n  </Helmet>\r\n);\r\n\r\nexport default PageTitle;\r\n","import { PERSONAL, PERSONAL_PAGES } from \"../common/CONSULT\";\r\nimport _values from \"lodash/values\";\r\n\r\nexport const currentPath = () => {\r\n  return window.location.pathname;\r\n};\r\n\r\nexport const refreshCurrentPage = (isLogout = false) => {\r\n  const path = currentPath();\r\n  if (isLogout && path.indexOf(\"/personal/\") >= 0) {\r\n    document.location.assign(\"/\");\r\n  } else {\r\n    document.location.assign(path);\r\n  }\r\n};\r\nexport const isHomePath = () => {\r\n  const path = currentPath();\r\n  if (path === \"/\" || !path) {\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const getPageByPath = () => {\r\n  if (isHomePath()) {\r\n    return \"home\";\r\n  }\r\n  const path = currentPath();\r\n  switch (path) {\r\n    case \"/blog\":\r\n      return \"blog\";\r\n    case \"/program\":\r\n      return \"program\";\r\n    case \"/book\":\r\n      return \"book\";\r\n    case \"/problem\":\r\n      return \"problem\";\r\n    case \"/about\":\r\n      return \"about\";\r\n  }\r\n};\r\n\r\nexport const getPersonPage = () => {\r\n  const path = currentPath();\r\n  let page = PERSONAL_PAGES.USER_SETTINGS;\r\n  for (const value of _values(PERSONAL_PAGES)) {\r\n    if (path.indexOf(PERSONAL + value) >= 0) {\r\n      return value;\r\n    }\r\n  }\r\n  return page;\r\n};\r\n\r\nexport const getPathByPage = page => {\r\n  switch (page) {\r\n    case \"home\":\r\n      return \"\";\r\n    default:\r\n      return \"/\" + page;\r\n  }\r\n};\r\n","import { gql } from \"apollo-boost\";\r\n\r\nimport {\r\n  COMMENT_ITEM_PROPS,\r\n  PROBLEM_PROPS,\r\n  PROGRAM_DATA_PROPS,\r\n  PROGRAM_VERSION_LIST_PROPS,\r\n  PROGRAM_VERSION_PROPS_DETAIL,\r\n  REPORT_PROPS,\r\n  USER_PROPS\r\n} from \"./props\";\r\n\r\nexport const SAVE_PROBLEM = gql`\r\n    mutation ( $id: ID\r\n        $type: ProblemType!\r\n        $title: String!\r\n        $description:String!\r\n    ) {\r\n        saveProblem( \r\n           id: $id \r\n           type: $type\r\n           title: $title\r\n           description: $description\r\n        ) {\r\n           ${PROBLEM_PROPS}\r\n\r\n        }\r\n    }\r\n`;\r\n\r\nexport const SWITCH_UP = gql`\r\n  mutation($objId: ID!, $objType: ObjType!) {\r\n    switchUp(objId: $objId, objType: $objType)\r\n  }\r\n`;\r\nexport const SWITCH_FOLLOW = gql`\r\n  mutation($objId: ID!, $objType: ObjType!) {\r\n    switchFollower(objId: $objId, objType: $objType)\r\n  }\r\n`;\r\n\r\nexport const SAVE_COMMENT = gql`\r\n  mutation(\r\n    $id: ID\r\n    $type: CommentType!\r\n    $objId: String!\r\n    $parentId: ID\r\n    $repliedCommentId: ID\r\n    $content: String!\r\n  ) {\r\n    saveComment(\r\n      id: $id\r\n      type: $type\r\n      objId: $objId\r\n      parentId: $parentId\r\n      repliedCommentId: $repliedCommentId\r\n      content: $content\r\n    ) {\r\n      id\r\n    }\r\n  }\r\n`;\r\n\r\nexport const SAVE_COMMENT_FOR_DETAILS = gql`\r\n    mutation(\r\n        $id: ID\r\n        $type: CommentType!\r\n        $objId: String!\r\n        $parentId: ID\r\n        $repliedCommentId: ID\r\n        $content: String!\r\n    ) {\r\n        saveComment(\r\n            id: $id\r\n            type: $type\r\n            objId: $objId\r\n            parentId: $parentId\r\n            repliedCommentId: $repliedCommentId\r\n            content: $content\r\n        ) {\r\n            ${COMMENT_ITEM_PROPS}\r\n        }\r\n    }\r\n`;\r\n\r\nexport const SWITCH_UP_COMMENT = gql`\r\n  mutation($commentId: ID!) {\r\n    switchUpComment(commentId: $commentId) {\r\n      id\r\n      upCount\r\n      currentUpped\r\n    }\r\n  }\r\n`;\r\n\r\nexport const SAVE_REPORT = gql`\r\n  mutation ($id:ID,$objId:String!,$type:ReportType!,$reportReason:String,$itemIds:[ID!]!){\r\n      saveReport(id:$id,objId:$objId,type:$type,reportReason:$reportReason,itemIds:$itemIds){\r\n          ${REPORT_PROPS}\r\n      }\r\n  }\r\n`;\r\n\r\nexport const SAVE_RATING = gql`\r\n  mutation($objId: ID!, $type: RatingType!, $score: Int!) {\r\n    saveRating(objId: $objId, type: $type, score: $score) {\r\n      id\r\n      averageScore\r\n      ratingCount\r\n      score\r\n    }\r\n  }\r\n`;\r\n\r\nexport const SAVE_CURRENT_USER = gql`\r\n   mutation ($username:String!,$nickname:String,$fullName:String,$email:String,$phone:String,$avatarUrl:String){\r\n       saveCurrentUser(username:$username,nickname:$nickname,fullName:$fullName,email:$email,phone:$phone,avatarUrl:$avatarUrl){\r\n           ${USER_PROPS}\r\n       }\r\n   }\r\n`;\r\n\r\nexport const UPDATE_PROGRAM_STATUS = gql`\r\n  mutation($id: ID!, $status: ProgramStatus!) {\r\n    updateProgramStatus(id: $id, status: $status) {\r\n      success\r\n    }\r\n  }\r\n`;\r\n\r\nexport const SAVE_PROGRAM = gql`\r\n  mutation(\r\n    $id: ID\r\n    $name: String!\r\n    $code: String\r\n    $coverUrl: String\r\n    $data: String\r\n    $description: String\r\n    $tags: [String!]\r\n    $gitInputs: [GitInput!]\r\n    $helpVideo: String\r\n    $helpDescription: String\r\n  ) {\r\n    saveProgram(\r\n      id: $id\r\n      name: $name\r\n      code: $code\r\n      coverUrl: $coverUrl\r\n      data: $data\r\n      description: $description\r\n      tags: $tags\r\n      gitInputs: $gitInputs\r\n      helpVideo: $helpVideo\r\n      helpDescription: $helpDescription\r\n    ) {\r\n      id\r\n    }\r\n  }\r\n`;\r\n\r\nexport const GET_PROGRAM_VERSION = gql`\r\n  query($id: ID!) {\r\n    programVersion(id: $id) {\r\n      ${PROGRAM_VERSION_PROPS_DETAIL}\r\n    }\r\n  }\r\n`;\r\n\r\nexport const SAVE_PROGRAM_VERSION = gql`\r\n  mutation(\r\n    $id: ID\r\n    $name: String\r\n    $programId: ID!\r\n    $importType: ImportType\r\n    $codeUrl: String\r\n    $versionCode: String!\r\n    $description: String\r\n  ) {\r\n    saveProgramVersion(\r\n      id: $id\r\n      name: $name\r\n      programId: $programId\r\n      importType: $importType\r\n      codeUrl: $codeUrl\r\n      versionCode: $versionCode\r\n      description: $description\r\n    ) {\r\n      id\r\n    }\r\n  }\r\n`;\r\n\r\nexport const UPDATE_PROGRAM_VERSION_STATUS = gql`\r\n  mutation($id: ID!, $status: ProgramVersionStatus!) {\r\n    updateProgramVersionStatus(id: $id, status: $status) {\r\n      id\r\n    }\r\n  }\r\n`;\r\n\r\nexport const UNBIND_PHONE = gql`\r\n  mutation {\r\n    unbindPhone {\r\n      success\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const UNBIND_EMAIL = gql`\r\n  mutation {\r\n    unbindEmail {\r\n      success\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const READ_OBJ = gql`\r\n  mutation($objId: ID!, $objType: ObjType!) {\r\n    updateObjReadCount(objId: $objId, objType: $objType) {\r\n      success\r\n      message\r\n    }\r\n  }\r\n`;\r\n\r\nexport const SAVE_PROGRAM_DATA = gql`\r\n  mutation ($programId:ID!,$type:String,$isLarge:Boolean,$isOpened:Boolean,$data:String,$uniqueId:String){\r\n      saveProgramData(programId:$programId,type:$type,isLarge:$isLarge,isOpened:$isOpened,data:$data,uniqueId:$uniqueId){\r\n          ${PROGRAM_DATA_PROPS}\r\n      }\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Icon } from \"semantic-ui-react\";\r\nimport _get from \"lodash/get\";\r\n\r\nconst AvatarBox = styled.div`\r\n  border-radius: ${props => props.width / 2}px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: ${props => props.width}px;\r\n  height: ${props => props.width}px;\r\n  border: 1px solid grey;\r\n  background-color: #cecece;\r\n  .avatar_default_icon {\r\n    margin: 0 !important;\r\n  }\r\n  cursor: ${props => props.cursor};\r\n`;\r\n\r\nconst AvatarImg = styled.img`\r\n  border-radius: ${props => props.width / 2}px;\r\n  width: ${props => props.width}px;\r\n  height: ${props => props.width}px;\r\n`;\r\n\r\nconst Avatar = ({ url, width = 26, size = \"small\", cursor, avatar }) => {\r\n  const avatarUrl = url || _get(avatar, \"url\");\r\n  return (\r\n    <AvatarBox width={width} cursor={cursor}>\r\n      {avatarUrl ? (\r\n        <AvatarImg src={avatarUrl} width={width} />\r\n      ) : (\r\n        <Icon\r\n          className={\"avatar_default_icon\"}\r\n          name={\"user outline\"}\r\n          size={size}\r\n        />\r\n      )}\r\n    </AvatarBox>\r\n  );\r\n};\r\n\r\nexport default Avatar;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div`\r\n  width: ${props => (props.width ? props.width : \"2px\")};\r\n  height: ${props => (props.height ? props.height : \"2px\")};\r\n`;\r\n\r\nconst Space = ({ width, height }) => {\r\n  return <Container width={width} height={height} />;\r\n};\r\n\r\nexport default Space;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Modal, Button, Form, Input } from \"semantic-ui-react\";\r\nimport styled from \"styled-components\";\r\nimport BasicForm from \"../../common/BasicForm\";\r\nimport { clickEle } from \"../../utils/elementLink\";\r\nimport { SERVER_URL } from \"../../../config\";\r\nimport axios from \"axios\";\r\nimport { refreshCurrentPage } from \"../../utils/pathUtils\";\r\nimport LoginHint from \"../../common/LoginHint\";\r\nimport CaptchaInput from \"../../common/formFields/CaptchaInput\";\r\nimport { ACTION_TYPE, CAPTCHA_TYPE } from \"../../common/CONSULT\";\r\nimport _get from \"lodash/get\";\r\nimport _join from \"lodash/join\";\r\nimport isEmail from \"validator/lib/isEmail\";\r\nimport isPhone from \"validator/lib/isMobilePhone\";\r\n\r\nconst LOGIN_SPLIT_TAG = \"_#_\";\r\n\r\nexport const login = (username, password, setAuthentication) => {\r\n  return axios\r\n    .post(SERVER_URL + \"/login\", { username, password })\r\n    .then(response => {\r\n      setAuthentication(response.data);\r\n      refreshCurrentPage();\r\n    });\r\n};\r\n\r\nconst RegisterButton = styled.div`\r\n  cursor: pointer;\r\n  margin-top: 14px;\r\n  color: #4183c4;\r\n`;\r\n\r\nconst FooterBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst CaptchaLoginButton = styled.div`\r\n  cursor: pointer;\r\n  margin-top: 14px;\r\n  color: #4183c4;\r\n`;\r\n\r\nconst LoginModal = ({ open, onHide, children, setAuthentication }) => {\r\n  const [captchaLogin, setCaptchaLogin] = useState(false);\r\n  let form = {};\r\n  return (\r\n    <Modal\r\n      onClose={onHide}\r\n      open={!!open}\r\n      closeIcon={\"close\"}\r\n      trigger={children}\r\n      size={\"tiny\"}\r\n      style={{ top: \"300px\" }}\r\n    >\r\n      <Modal.Header>欢迎登录LazyChun</Modal.Header>\r\n      <Modal.Content>\r\n        {!captchaLogin ? (\r\n          <BasicForm\r\n            width={\"100%\"}\r\n            items={[\r\n              {\r\n                label: \"用户名\",\r\n                fieldKey: \"username\",\r\n                required: true,\r\n                placeholder: \"请输入用户名或手机号\"\r\n              },\r\n              {\r\n                label: \"密码\",\r\n                fieldKey: \"password\",\r\n                type: \"password\",\r\n                required: true,\r\n                placeholder: \"请输入密码\"\r\n              }\r\n            ]}\r\n          >\r\n            {({ form, onValidate, onAddErrors }) => {\r\n              return (\r\n                <div\r\n                  id={\"loginBtn\"}\r\n                  onClick={() =>\r\n                    onValidate(() => {\r\n                      login(\r\n                        form.username,\r\n                        form.password,\r\n                        setAuthentication\r\n                      ).catch(error => {\r\n                        console.error(error);\r\n                        onAddErrors({ username: \"用户名或密码不正确！\" });\r\n                      });\r\n                    })\r\n                  }\r\n                  style={{ visible: \"hidden\" }}\r\n                />\r\n              );\r\n            }}\r\n          </BasicForm>\r\n        ) : (\r\n          <BasicForm\r\n            width={\"100%\"}\r\n            items={[\r\n              {\r\n                label: \"邮箱|手机号\",\r\n                fieldKey: \"name\",\r\n                required: true,\r\n                placeholder: \"请输入邮箱或手机号\"\r\n              },\r\n              {\r\n                label: \"验证码\",\r\n                fieldKey: \"captchaCode\",\r\n                required: true,\r\n                placeholder: \"请输入密码\",\r\n                renderControl: ({\r\n                  value,\r\n                  onChange,\r\n                  onValidate,\r\n                  form,\r\n                  error,\r\n                  formItemState,\r\n                  onUpdateState,\r\n                  onSetError,\r\n                  setErrors\r\n                }) => (\r\n                  <CaptchaInput\r\n                    value={value}\r\n                    error={error}\r\n                    placeholder={\"请填写验证码\"}\r\n                    onChange={onChange}\r\n                    onSetError={onSetError}\r\n                    state={formItemState}\r\n                    onUpdateState={onUpdateState}\r\n                    onValidate={sendCaptcha => {\r\n                      const name = _get(form, \"name\");\r\n                      if (!name) {\r\n                        setErrors({ name: \"邮箱或手机号此处不能为空！\" });\r\n                        return;\r\n                      }\r\n                      if (!(isEmail(name) || isPhone(name))) {\r\n                        setErrors({\r\n                          name: \"您输入的邮箱或手机号格式不正确！\"\r\n                        });\r\n                        return;\r\n                      }\r\n                      const isNameEmail = isEmail(name);\r\n                      const captchaType = isNameEmail\r\n                        ? CAPTCHA_TYPE.EMAIL\r\n                        : CAPTCHA_TYPE.SMS;\r\n                      const actionType = isNameEmail\r\n                        ? ACTION_TYPE.BindEmail\r\n                        : ACTION_TYPE.BindPhoneNumber;\r\n                      onValidate(\r\n                        () =>\r\n                          sendCaptcha(\r\n                            _get(form, \"name\"),\r\n                            captchaType,\r\n                            actionType\r\n                          ),\r\n                        [\"name\"]\r\n                      );\r\n                    }}\r\n                  />\r\n                )\r\n              }\r\n            ]}\r\n          >\r\n            {({ form, onValidate, onAddErrors }) => {\r\n              return (\r\n                <div\r\n                  id={\"loginBtn\"}\r\n                  onClick={() => {\r\n                    const loginCaptcha = _join(\r\n                      [\r\n                        isEmail(form.name) ? \"email\" : \"phone\",\r\n                        form.name,\r\n                        form.captchaCode\r\n                      ],\r\n                      LOGIN_SPLIT_TAG\r\n                    );\r\n                    onValidate(() => {\r\n                      login(\r\n                        loginCaptcha,\r\n                        loginCaptcha,\r\n                        setAuthentication\r\n                      ).catch(error => {\r\n                        console.error(error);\r\n                        onAddErrors({ name: \"手机号邮箱或验证码不正确！\" });\r\n                      });\r\n                    });\r\n                  }}\r\n                  style={{ visible: \"hidden\" }}\r\n                />\r\n              );\r\n            }}\r\n          </BasicForm>\r\n        )}\r\n        <FooterBox>\r\n          <CaptchaLoginButton onClick={() => setCaptchaLogin(!captchaLogin)}>\r\n            {captchaLogin ? \"密码登录\" : \"验证码登录\"}\r\n          </CaptchaLoginButton>\r\n          <RegisterButton onClick={() => LoginHint.showRegister()}>\r\n            注册\r\n          </RegisterButton>\r\n        </FooterBox>\r\n      </Modal.Content>\r\n      <Modal.Actions>\r\n        <Button\r\n          content=\"登录\"\r\n          labelPosition=\"right\"\r\n          icon=\"checkmark\"\r\n          onClick={() => {\r\n            clickEle(\"loginBtn\");\r\n          }}\r\n          positive\r\n        />\r\n      </Modal.Actions>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default LoginModal;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Modal, Button, Form, Input } from \"semantic-ui-react\";\r\nimport styled from \"styled-components\";\r\nimport { refreshCurrentPage } from \"../../utils/pathUtils\";\r\nimport { gql } from \"apollo-boost\";\r\nimport BasicForm from \"../../common/BasicForm\";\r\nimport { clickEle } from \"../../utils/elementLink\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { OPERATE_RESULT } from \"../../common/props\";\r\nimport _get from \"lodash/get\";\r\nimport _split from \"lodash/split\";\r\nimport ModalHint from \"../../common/ModalHint\";\r\nimport CaptchaInput from \"../../common/formFields/CaptchaInput\";\r\nimport isEmail from \"validator/lib/isEmail\";\r\nimport { ACTION_TYPE, CAPTCHA_TYPE } from \"../../common/CONSULT\";\r\nimport isPhone from \"validator/lib/isMobilePhone\";\r\nimport ToastHint from \"../../common/ToastHint\";\r\nimport { login } from \"./LoginModal\";\r\n\r\nconst REGISTER_USER = gql`\r\n    mutation ($username:String!,$password:String!,$phone:String,$email:String,$verificationCode:String){\r\n        registerUser(username:$username,password:$password,phone:$phone,email:$email,verificationCode:$verificationCode) {\r\n            ${OPERATE_RESULT}\r\n        }\r\n    }\r\n`;\r\n\r\nconst RegisterModal = ({ children, open, onHide, setAuthentication }) => {\r\n  let form = {};\r\n  const [registerUser, { data, loading }] = useMutation(REGISTER_USER, {\r\n    onCompleted: ({ registerUser: { success, message } }) => {\r\n      if (success) {\r\n        const [username, password] = _split(message, \":\");\r\n        ToastHint.showSuccess(\"注册成功，自动登录中！\");\r\n        login(username, password, setAuthentication).catch(error => {\r\n          ToastHint.showFailure(\"自动登录失败\", {\r\n            callback: () => refreshCurrentPage()\r\n          });\r\n        });\r\n      }\r\n    },\r\n    onError: error => ModalHint.error(error.toString())\r\n  });\r\n  console.log(\"isEmail________________________\", isEmail(\"1299362885@qq.com\"));\r\n  console.log(\"isEmail________________________form\", isEmail(form.name || \"\"));\r\n  return (\r\n    <Modal\r\n      onClose={onHide}\r\n      open={open}\r\n      closeIcon={\"close\"}\r\n      trigger={children}\r\n      size={\"tiny\"}\r\n      style={{ top: \"300px\" }}\r\n    >\r\n      <Modal.Header>欢迎注册为LazyChun用户</Modal.Header>\r\n      <Modal.Content>\r\n        <BasicForm\r\n          loading={loading}\r\n          width={\"100%\"}\r\n          formData={form}\r\n          items={[\r\n            {\r\n              label: \"用户名\",\r\n              fieldKey: \"username\",\r\n              required: true,\r\n              placeholder: \"请输入用户名(1-20个字符)\"\r\n            },\r\n            {\r\n              label: \"邮箱|手机号\",\r\n              fieldKey: \"name\",\r\n              required: true,\r\n              placeholder: \"请输入邮箱或手机号\"\r\n            },\r\n            {\r\n              label: \"验证码\",\r\n              fieldKey: \"captchaCode\",\r\n              required: true,\r\n              placeholder: \"请输入密码\",\r\n              renderControl: ({\r\n                value,\r\n                onChange,\r\n                onValidate,\r\n                form,\r\n                error,\r\n                formItemState,\r\n                onUpdateState,\r\n                onSetError,\r\n                setErrors\r\n              }) => (\r\n                <CaptchaInput\r\n                  value={value}\r\n                  error={error}\r\n                  placeholder={\"请填写验证码\"}\r\n                  onChange={onChange}\r\n                  onSetError={onSetError}\r\n                  state={formItemState}\r\n                  onUpdateState={onUpdateState}\r\n                  onValidate={sendCaptcha => {\r\n                    const name = _get(form, \"name\");\r\n                    if (!name) {\r\n                      setErrors({ name: \"邮箱或手机号此处不能为空！\" });\r\n                      return;\r\n                    }\r\n                    if (!(isEmail(name) || isPhone(name))) {\r\n                      setErrors({\r\n                        name: \"您输入的邮箱或手机号格式不正确！\"\r\n                      });\r\n                      return;\r\n                    }\r\n                    const isNameEmail = isEmail(name);\r\n                    const captchaType = isNameEmail\r\n                      ? CAPTCHA_TYPE.EMAIL\r\n                      : CAPTCHA_TYPE.SMS;\r\n                    const actionType = isNameEmail\r\n                      ? ACTION_TYPE.BindEmail\r\n                      : ACTION_TYPE.BindPhoneNumber;\r\n                    onValidate(\r\n                      () =>\r\n                        sendCaptcha(\r\n                          _get(form, \"name\"),\r\n                          captchaType,\r\n                          actionType\r\n                        ),\r\n                      [\"name\"]\r\n                    );\r\n                  }}\r\n                />\r\n              )\r\n            },\r\n            {\r\n              label: \"密码\",\r\n              fieldKey: \"password\",\r\n              required: true,\r\n              placeholder: \"请输入密码\",\r\n              renderControl: ({ value, onChange }) => (\r\n                <Input\r\n                  type=\"password\"\r\n                  autoComplete=\"new-password\"\r\n                  placeholder={\"请输入密码\"}\r\n                  defaultValue={value}\r\n                  onChange={(e, { name, value }) => {\r\n                    onChange(value);\r\n                  }}\r\n                />\r\n              )\r\n            },\r\n            {\r\n              label: \"确认密码\",\r\n              fieldKey: \"confirmPassword\",\r\n              required: true,\r\n              placeholder: \"请再次输入密码\",\r\n              renderControl: ({ value, onChange }) => (\r\n                <Input\r\n                  autoComplete=\"new-password\"\r\n                  type=\"password\"\r\n                  placeholder={\"请再次输入密码\"}\r\n                  defaultValue={value}\r\n                  onChange={(e, { name, value }) => {\r\n                    onChange(value);\r\n                  }}\r\n                />\r\n              )\r\n            }\r\n          ]}\r\n        >\r\n          {({ form, onValidate, onAddErrors }) => {\r\n            return (\r\n              <div\r\n                id={\"registerBtn\"}\r\n                onClick={() =>\r\n                  onValidate(() => {\r\n                    if (form.confirmPassword !== form.password) {\r\n                      onAddErrors({\r\n                        confirmPassword: \"确认密码与输入的密码不一致！\"\r\n                      });\r\n                      return;\r\n                    }\r\n\r\n                    const variablesProps = isEmail(form.name || \"\")\r\n                      ? { email: form.name }\r\n                      : { phone: form.name };\r\n\r\n                    registerUser({\r\n                      variables: {\r\n                        username: form.username,\r\n                        password: form.password,\r\n                        verificationCode: form.captchaCode,\r\n                        ...variablesProps\r\n                      }\r\n                    }).then(data => {\r\n                      const result = _get(data, \"data.registerUser\", {});\r\n                      const { success, message } = result;\r\n                      if (!success) {\r\n                        const splits = _split(message, \":\");\r\n                        const errors = { [splits[0]]: splits[1] };\r\n                        onAddErrors(errors);\r\n                      }\r\n                    });\r\n                  })\r\n                }\r\n                style={{ visible: \"hidden\" }}\r\n              />\r\n            );\r\n          }}\r\n        </BasicForm>\r\n      </Modal.Content>\r\n      <Modal.Actions>\r\n        <Button\r\n          content=\"注册并登录\"\r\n          labelPosition=\"right\"\r\n          icon=\"checkmark\"\r\n          onClick={() => {\r\n            clickEle(\"registerBtn\");\r\n          }}\r\n          positive\r\n        />\r\n      </Modal.Actions>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default RegisterModal;\r\n","import React, { useState, useReducer } from \"react\";\r\nimport _get from \"lodash/get\";\r\nimport LoginModal from \"../pages/login/LoginModal\";\r\nimport RegisterModal from \"../pages/login/RegisterModal\";\r\n\r\nconst _LoginHint = ({ onShow, setOnShow }) => {\r\n  const [type, setType] = useState(null);\r\n  const [config, setConfig] = useState({});\r\n  if (!onShow) {\r\n    setOnShow((rConfig, type) => {\r\n      setType(type);\r\n      setConfig(rConfig);\r\n    });\r\n  }\r\n\r\n  const onHide = () => {\r\n    setType(null);\r\n  };\r\n\r\n  switch (type) {\r\n    case \"Login\":\r\n      return (\r\n        <LoginModal\r\n          open={type}\r\n          onHide={onHide}\r\n          setAuthentication={config.setAuthentication}\r\n        />\r\n      );\r\n    case \"Register\":\r\n      return (\r\n        <RegisterModal\r\n          open={type}\r\n          onHide={onHide}\r\n          setAuthentication={config.setAuthentication}\r\n        />\r\n      );\r\n    default:\r\n      return null;\r\n  }\r\n};\r\n\r\nclass LoginHint {\r\n  static onShow = null;\r\n  static setAuthentication = null;\r\n  static currentUser;\r\n\r\n  static setOnShow = onShowFnc => {\r\n    this.onShow = onShowFnc;\r\n  };\r\n\r\n  static hintComponent = (\r\n    <_LoginHint onShow={this.onShow} setOnShow={this.setOnShow} />\r\n  );\r\n\r\n  static render(setAuthentication, currentUser) {\r\n    if (!this.currentUser) {\r\n      this.currentUser = currentUser;\r\n    }\r\n    if (!this.setAuthentication) {\r\n      this.setAuthentication = setAuthentication;\r\n    }\r\n    return this.hintComponent;\r\n  }\r\n\r\n  static show(rConfig) {\r\n    this.onShow(\r\n      { setAuthentication: this.setAuthentication, ...rConfig },\r\n      \"Login\",\r\n      this.setAuthentication\r\n    );\r\n  }\r\n\r\n  static showRegister(rConfig) {\r\n    this.onShow(\r\n      { setAuthentication: this.setAuthentication, ...rConfig },\r\n      \"Register\"\r\n    );\r\n  }\r\n\r\n  static checkLogin(callback, rConfig) {\r\n    if (!this.currentUser) {\r\n      this.show(rConfig);\r\n    } else {\r\n      callback && callback();\r\n    }\r\n  }\r\n}\r\n\r\nexport default LoginHint;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport ProblemForm from \"./ProblemForm\";\r\nimport { GET_PROBLEM } from \"../../common/queryGql\";\r\nimport { getRouteId } from \"../../utils/routeUtils\";\r\nimport PageItem from \"../QueryItem\";\r\nimport PageTitle from \"../../common/PageTitle\";\r\n\r\nconst Container = styled.div`\r\n  margin-top: 40px;\r\n`;\r\n\r\nconst ProblemEditPage = ({ history }) => {\r\n  return (\r\n    <Container>\r\n      <PageItem id={getRouteId()} itemPath={\"problem\"} gql={GET_PROBLEM}>\r\n        {({ loading, refetch, item }) => {\r\n          return (\r\n            <ProblemForm\r\n              isEdit={true}\r\n              history={history}\r\n              refetch={refetch}\r\n              formData={item}\r\n              loading={loading}\r\n            />\r\n          );\r\n        }}\r\n      </PageItem>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ProblemEditPage;\r\n","import _get from \"lodash/get\";\r\nimport _isEmpty from \"lodash/isEmpty\";\r\nimport _slice from \"lodash/slice\";\r\nimport _head from \"lodash/head\";\r\n\r\nexport const _getByRank = (item, arrPaths = [], defaultValue = \"-\") => {\r\n    if (_isEmpty(arrPaths)) {\r\n        return defaultValue;\r\n    }\r\n    const value = _get(item, _head(arrPaths));\r\n    if (value) {\r\n        return value;\r\n    }\r\n    return _getByRank(item, _slice(arrPaths, 1, arrPaths.length));\r\n};\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","module.exports = {\r\n  SERVER_URL: process.env.REACT_APP_SERVER_URL\r\n};\r\n"],"sourceRoot":""}