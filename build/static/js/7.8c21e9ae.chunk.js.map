{"version":3,"sources":["components/pages/personalCenter/Empty.js","components/pages/personalCenter/pages/Menus.js","components/pages/personalCenter/pages/Header.js","components/common/formFields/BindPhoneInput.js","components/common/formFields/BindEmailInput.js","components/pages/personalCenter/pages/userSettings/BindPhoneModal.js","components/pages/personalCenter/pages/userSettings/BindEmailModal.js","components/common/formFields/ImageInput.js","components/common/formFields/ResetPasswordInput.js","components/pages/personalCenter/pages/userSettings/ResetPasswordModal.js","components/pages/personalCenter/pages/userSettings/UserSettings.js","components/pages/personalCenter/pages/PageTabs.js","components/pages/personalCenter/pages/program/segaments/UpdateStatusButton.js","components/pages/personalCenter/pages/program/segaments/ProgramItem.js","components/pages/personalCenter/pages/program/segaments/MyPrograms.js","components/common/item/ProgramItem.js","components/pages/personalCenter/pages/program/segaments/FollowPrograms.js","components/pages/personalCenter/pages/program/segaments/CreateProgramButton.js","components/pages/personalCenter/pages/program/Program.js","components/pages/personalCenter/pages/FollowsQuery.js","components/pages/personalCenter/pages/FollowItemWrapper.js","components/pages/personalCenter/pages/book/Book.js","components/common/Avatar.js","components/common/item/BlogItem.js","components/pages/personalCenter/pages/blog/Blog.js","components/pages/personalCenter/pages/chapter/segaments/BookmarkItem.js","components/pages/personalCenter/pages/chapter/Chapter.js","components/pages/personalCenter/pages/comment/segaments/RepliedComment.js","components/pages/personalCenter/pages/comment/segaments/CommentObj.js","components/pages/personalCenter/pages/comment/segaments/CommentItem.js","components/pages/personalCenter/pages/comment/segaments/RelatedComments.js","components/pages/personalCenter/pages/comment/segaments/MyComments.js","components/pages/personalCenter/pages/comment/Comment.js","components/pages/personalCenter/pages/BookListItem.js","components/pages/personalCenter/pages/ObjItem.js","components/pages/personalCenter/pages/follower/segaments/AllFollowers.js","components/pages/personalCenter/pages/follower/segaments/ProgramFollowers.js","components/pages/personalCenter/pages/follower/segaments/BlogFollowers.js","components/pages/personalCenter/pages/follower/Follower.js","components/pages/personalCenter/pages/up/UpsQuery.js","components/pages/personalCenter/pages/up/Ups.js","components/pages/personalCenter/pages/up/segaments/AllUps.js","components/pages/personalCenter/pages/up/segaments/ProgramUps.js","components/pages/personalCenter/pages/up/segaments/BlogUps.js","components/pages/personalCenter/pages/up/segaments/BookUps.js","components/pages/personalCenter/pages/up/segaments/ChapterUps.js","components/pages/personalCenter/pages/up/segaments/CommentUps.js","components/pages/personalCenter/pages/up/Up.js","components/pages/personalCenter/pages/problem/segaments/FollowProblems.js","components/pages/personalCenter/pages/problem/segaments/MyProblems.js","components/pages/personalCenter/pages/problem/segaments/CreateProblemButton.js","components/pages/personalCenter/pages/problem/Problem.js","components/common/formFields/TagsInput.js","components/pages/personalCenter/pages/program/create/ProgramCreate.js","components/common/formFields/FileInput.js","components/pages/personalCenter/pages/program/eidt/EditVersionForm.js","components/pages/personalCenter/pages/program/eidt/EditModal.js","components/pages/personalCenter/pages/program/eidt/EditModalTrigger.js","components/pages/personalCenter/pages/program/eidt/CurrentVersion.js","components/common/formFields/GitsInput.js","components/pages/personalCenter/pages/program/eidt/ProgramEditForm.js","components/pages/personalCenter/pages/program/eidt/ProgramVerson.js","components/pages/personalCenter/pages/program/eidt/ProgramVersions.js","components/pages/personalCenter/pages/program/eidt/ProgramEdit.js","components/pages/personalCenter/PersonalPage.js","components/common/Styles.js","components/utils/jsonUtils.js","components/common/comment/segaments/CommentActions.js","components/common/RefetchHandle.js","components/common/item/BookItem.js"],"names":["Container","styled","div","Empty","Title","PersonalHead","Menu","Item","MenuItem","label","name","page","onSwitchPage","iconName","className","onClick","active","indexOf","Icon","Menus","commonProps","secondary","style","width","vertical","height","PERSONAL_PAGES","PROGRAM","BLOG","BOOK","CHAPTER","PROBLEM","COMMENT","UP","FOLLOWER","USER_SETTINGS","Header","title","TextField","props","hasValue","BindPhoneInput","value","placeholder","onBindCompleted","onBind","useMutation","UNBIND_PHONE","onCompleted","unbindPhone","success","message","ToastHint","showSuccess","showFailure","onError","onUnbindPhone","loading","data","ModalHint","confirm","content","onHide","then","type","color","BindEmailInput","UNBIND_EMAIL","unbindEmail","onUnbindEmail","ButtonBox","BindPhoneModal","open","onRefetch","useBindPhone","res","mLoading","onBindPhone","Modal","top","size","closeIcon","onClose","Content","BasicForm","items","required","fieldKey","rules","phone","renderControl","onChange","Input","defaultValue","e","onValidate","form","error","formItemState","onUpdateState","onSetError","CaptchaInput","captchaType","CAPTCHA_TYPE","SMS","actionType","ACTION_TYPE","BindPhoneNumber","state","sendCaptcha","_get","onAddErrors","Button","marginTop","captchaCode","BindEmailModal","useBindEmail","onBindEmail","isEmail","isCaptcha","EMAIL","BindEmail","email","isAvatar","beforeUpload","file","isJpgOrPng","isLt2M","UploadBox","IconBox","ImageInput","isTmp","useFileInput","imageUrl","actionUrl","handleChange","uploadButton","LoadingOutlined","PictureOutlined","listType","showUploadList","action","src","alt","borderRadius","ResetPasswordInput","onReset","ResetPasswordModal","options","push","text","useResetPassword","onResetPassword","formData","length","Select","disabled","console","log","setErrors","isPhone","autoComplete","password","confirmPassword","UserSettings","useState","showBindPhoneModal","setShowBindPhoneModal","showBindEmailModal","setShowBindEmailModal","showResetPasswordModal","setResetPasswordModal","useMe","me","refetch","SAVE_CURRENT_USER","onSaveCurrentUser","useSettings","avatarUrl","variables","username","nickname","fullName","Loading","Segment","TabCount","PageTabs","tabs","initTab","children","renderActions","useTabs","_head","currentTab","onSwitchTab","onUpdateTabCount","countState","attached","tabular","_map","tab","key","position","UpdateButton","UpdateStatusButton","status","onUpdateProgramStatus","buttonText","actionStatus","successMsg","errorMsg","useUpdateButton","Cover","img","ActionsWrapper","Status","bColor","ContentRow","Code","ContentFooter","DateFields","VersionCount","CountItemBox","useProgramItem","programItem","program","setProgram","useUpdateProgramStatus","programId","id","onUpdateStatusCompleted","CurrentVersionBox","CurrentVersion","currentVersion","versionCode","ProgramItem","noActions","onEdit","onLinkTo","onToProgram","dateCreated","lastUpdated","upCount","followerCount","code","url","cover","versionCount","getOptionByKey","PROGRAM_STATUS","Popup","trigger","Space","basic","_MyPrograms","onGoTo","refreshKey","PersistStorage","getItem","MY_PROGRAMS_REFRESH","useEffect","setItem","item","MyPrograms","currentUser","PaginationQueryList","gql","GET_PROGRAMS","searchFields","creatorId","hidePaginationInSinglePage","paginationSize","paginationSecondary","dataKey","limit","onUpdateCount","count","Name","Footer","RatingCount","scoreCount","averageScore","Rating","defaultRating","maxRating","FollowPrograms","GET_FOLLOWERS","types","OBJ_TYPES","userId","sort","order","FlatList","columns","followDataToJson","followedObj","LinkToObject","objType","objId","CreateButton","CreateProgramButton","circular","PERSONAL_PROGRAM_CREATE","PROGRAM_TABS","PageContent","Program","FollowsQuery","queryLimit","refetchNow","emptyText","beforeRefetch","isLastRow","refetchFollows","RefetchHandle","refetchOnce","ItemWrapper","RemoveBox","FollowItemWrapper","onSwitchFollowCompleted","popupContent","useSwitchFollow","onSwitchCompleted","currentFollowed","unFollowed","onSwitchFollow","BooksWrapper","Book","book","BookItem","onToBook","AvatarBox","cursor","AvatarImg","Avatar","avatar","isLastOne","ImageBox","CoverImage","FooterBox","FooterItem","Text","ContentBox","Description","BlogItem","description","BlogsWrapper","Blog","blog","MAIN_RED","LeftBox","RightBox","ChapterName","BookName","UpdatedDate","RemoveButton","BookmarkItem","chapter","bookId","stopPropagation","ChaptersWrapper","Chapter","markedChanged","refetchId","CommentName","ReplyText","RepliedComment","repliedComment","creator","_getByRank","CommentObj","commentObj","UserInfoBox","InfoLeftBox","UserInfo","ContentInfo","CommentItem","currentUpped","currentReport","CommentActions","commentId","RelatedComments","GET_COMMENTS","isUserRelated","index","MyComments","isUserQuery","COMMENT_TABS","Comment","Author","Intro","DateCreated","BookListItem","intro","ObjItem","obj","follower","getObjByObjType","dataObj","AllFollowers","ProgramFollowers","BlogFollowers","FOLLOWER_TABS","Follower","UpsQuery","GET_UPS","Ups","uppedObj","AllUps","ProgramUps","BlogUps","BookUps","ChapterUps","CommentUps","UP_TABS","Up","FollowProblems","problem","ProblemItem","MyProblems","GET_PROBLEMS","statuses","CreateProblemButton","PROBLEM_CREATE","PROBLEM_TABS","Problem","TagsContainer","TagsInput","formItemProps","addTitle","onUpdateField","maxTags","tags","setTags","inputVisible","setInputVisible","inputValue","setInputValue","editInputIndex","setEditInputIndex","editInputValue","setEditInputValue","saveEditInputRef","useRef","saveInputRef","current","focus","removeTag","removedTag","removedTags","_filter","tag","showInput","handleInputChange","target","handleInputConfirm","trimValue","_trim","newTags","handleEditInputChange","handleEditInputConfirm","useTagsInput","tagsInput","map","ref","onBlur","onPressEnter","isLongTag","tagElem","closable","aria-disabled","onDoubleClick","preventDefault","slice","PlusOutlined","ProgramCreate","SAVE_PROGRAM","result","Math","random","toString","PERSONAL_PROGRAM_EDIT","saveProgram","RichTextEditor","coverUrl","Dragger","Upload","setLoading","fileUrl","setFileUrl","onClear","info","callback","reader","FileReader","addEventListener","readAsDataURL","getBase64","originFileObj","ossFileUrl","SERVER_URL","FileInput","multiple","fileData","accept","fileListProps","fileList","fileName","maxCount","onRemove","fileType","isSuchType","InboxOutlined","EditVersionForm","initValue","onCloseModal","SAVE_PROGRAM_VERSION","saveProgramVersion","oldCodeUrl","importType","setAccept","onUpdateAcceptTypeImportType","useEditVersion","IMPORT_TYPE","OnlyJs","OnlyHtml","TextArea","codeUrl","_endsWith","ModalContentBox","EditModal","programVersionId","refetchProgram","saveLoading","setSaveLoading","dimmer","GET_PROGRAM_VERSION","autoLoading","itemPath","Actions","negative","positive","clickEle","EditModalTrigger","editProgramVersionId","show","setShow","VersionBox","VersionText","EditButton","NewButton","AllVersion","AntButton","onShowVersions","LabelContent","Label","GitsInput","gitInputs","useQuery","GET_GIT_TYPES","offset","networkStatus","inputs","setInputs","gitLinks","git","gitInput","_find","i","gitTypeId","linkUrl","newGitInputs","g","LabelBox","React","memo","useRefresh","refresh","onRefresh","Promise","useReducer","dispatch","showEditModal","onShowEditModal","onCloseEditModal","useEditForm","helpVideo","helpDescription","prevProps","nextProps","ContentContainer","SubTitle","span","OperationsContainer","Head","Date","Creator","HeadRight","StatusBox","bgColor","StatusLabel","statusItem","PROGRAM_VERSION_STATUS","s","ProgramVersion","totalCount","submitter","codeFile","mutation","UPDATE_PROGRAM_VERSION_STATUS","onUpdateStatus","to","SlideHeader","ProgramVersions","GET_PROGRAM_VERSIONS","icon","resolveProgramForm","t","gitType","branch","descriptionUrl","ProgramEdit","_split","getRouteLastValue","PROGRAM_EDIT","visible","setVisible","useProgramEdit","Sidebar","Pushable","as","animation","direction","inverted","Pusher","GET_PROGRAM","sidebarVisible","PagePanel","MenusBox","usePersonalPage","getPersonPage","PERSONAL","PROGRAM_CREATE","getPageByName","PersonalPage","follow","str","JSON","parse","DateText","ReplyButton","MainActionsBox","ReportButton","ThumbsUp","UpCount","onReply","uCount","setUCount","report","setReport","cUpped","setCUpped","SWITCH_UP_COMMENT","switchUpComment","useCommentActions","ReportHint","reportCallback"],"mappings":"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","file":"static/js/7.8c21e9ae.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div``;\r\n\r\nconst Empty = () => {\r\n  return <Container>请先登录，再访问个人中心！</Container>;\r\n};\r\n\r\nexport default Empty;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { PERSONAL_PAGES } from \"../../../common/CONSULT\";\r\nimport { Icon, Menu } from \"semantic-ui-react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Title = styled.div`\r\n  font-size: 18px;\r\n  color: #99a2aa;\r\n  font-weight: bold;\r\n  height: 40px;\r\n  line-height: 40px;\r\n`;\r\n\r\nconst PersonalHead = styled(Menu.Item)`\r\n  border-bottom: 1px solid rgba(34, 36, 38, 0.15) !important;\r\n  margin-bottom: 0 !important;\r\n`;\r\n\r\nconst MenuItem = ({ label, name, page, onSwitchPage, iconName }) => {\r\n  return (\r\n    <Menu.Item\r\n      className={\"menu_item\"}\r\n      onClick={() => onSwitchPage(name)}\r\n      active={page.indexOf(name) >= 0}\r\n      name={name}\r\n    >\r\n      <Icon name={iconName} /> {label}\r\n    </Menu.Item>\r\n  );\r\n};\r\n\r\nconst Menus = ({ commonProps }) => {\r\n  return (\r\n    <Menu secondary style={{ width: 180 }} vertical>\r\n      <PersonalHead style={{ height: 60 }}>\r\n        <Title>个人中心</Title>\r\n      </PersonalHead>\r\n      <MenuItem\r\n        {...commonProps}\r\n        iconName={\"th\"}\r\n        name={PERSONAL_PAGES.PROGRAM}\r\n        label={\"工具\"}\r\n      />\r\n      <MenuItem\r\n        {...commonProps}\r\n        name={PERSONAL_PAGES.BLOG}\r\n        label={\"博客\"}\r\n        iconName={\"blogger\"}\r\n      />\r\n      <MenuItem\r\n        {...commonProps}\r\n        name={PERSONAL_PAGES.BOOK}\r\n        label={\"书架\"}\r\n        iconName={\"industry\"}\r\n      />\r\n      <MenuItem\r\n        {...commonProps}\r\n        name={PERSONAL_PAGES.CHAPTER}\r\n        label={\"书签\"}\r\n        iconName={\"bookmark\"}\r\n      />\r\n      <MenuItem\r\n        {...commonProps}\r\n        name={PERSONAL_PAGES.PROBLEM}\r\n        label={\"建议\"}\r\n        iconName={\"sign-out\"}\r\n      />\r\n      <MenuItem\r\n        {...commonProps}\r\n        name={PERSONAL_PAGES.COMMENT}\r\n        label={\"评论\"}\r\n        iconName={\"comments\"}\r\n      />\r\n      <MenuItem\r\n        {...commonProps}\r\n        name={PERSONAL_PAGES.UP}\r\n        label={\"喜欢\"}\r\n        iconName={\"heart\"}\r\n      />\r\n      <MenuItem\r\n        {...commonProps}\r\n        name={PERSONAL_PAGES.FOLLOWER}\r\n        label={\"收藏\"}\r\n        iconName={\"star\"}\r\n      />\r\n      <MenuItem\r\n        {...commonProps}\r\n        iconName={\"user md\"}\r\n        name={PERSONAL_PAGES.USER_SETTINGS}\r\n        label={\"我的\"}\r\n      />\r\n    </Menu>\r\n  );\r\n};\r\n\r\nexport default Menus;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n  margin-bottom: 30px;\r\n  display: flex;\r\n  padding: 0 20px;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n`;\r\n\r\nconst Header = ({ title }) => {\r\n  return (\r\n    <Container>\r\n      <Title>{title}</Title>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport styled from \"styled-components\";\r\nimport { Button } from \"antd\";\r\nimport { MAIN_RED } from \"../Styles\";\r\nimport ModalHint from \"../ModalHint\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { UNBIND_PHONE } from \"../mutationGql\";\r\nimport ToastHint from \"../ToastHint\";\r\n\r\nconst TextField = styled.div`\r\n  color: ${props => (props.hasValue ? \"\" : \"#cecece\")};\r\n`;\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`;\r\n\r\nconst BindPhoneInput = ({\r\n  value,\r\n  placeholder = \"您还未绑定任何手机哦！\",\r\n  onBindCompleted,\r\n  onBind\r\n}) => {\r\n  const [onUnbindPhone, { data, loading }] = useMutation(UNBIND_PHONE, {\r\n    onCompleted: ({unbindPhone:{success, message}}) => {\r\n      if(success){\r\n        onBindCompleted && onBindCompleted();\r\n        ToastHint.showSuccess(\"解绑成功\");\r\n      }else{\r\n        ToastHint.showFailure(message)\r\n      }\r\n    },\r\n    onError: () => {\r\n      ToastHint.showFailure(\"解绑失败\");\r\n    }\r\n  });\r\n  return (\r\n    <Container>\r\n      <TextField hasValue={value}>{value ? value : placeholder}</TextField>\r\n      {value ? (\r\n        <Button\r\n          onClick={() =>\r\n            ModalHint.confirm(\r\n              {\r\n                title: \"解绑手机\",\r\n                loading,\r\n                content: \"您确定要与该手机解绑？\"\r\n              },\r\n              onHide => {\r\n                onUnbindPhone().then(() => {\r\n                  onHide();\r\n                });\r\n              }\r\n            )\r\n          }\r\n          type={\"link\"}\r\n          style={{ color: \"grey\" }}\r\n        >\r\n          解绑手机\r\n        </Button>\r\n      ) : (\r\n        <Button type={\"link\"} onClick={onBind}>\r\n          绑定手机\r\n        </Button>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BindPhoneInput;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Button } from \"antd\";\r\nimport { MAIN_RED } from \"../Styles\";\r\nimport ModalHint from \"../ModalHint\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { UNBIND_EMAIL } from \"../mutationGql\";\r\nimport ToastHint from \"../ToastHint\";\r\n\r\nconst TextField = styled.div`\r\n  color: ${props => (props.hasValue ? \"\" : \"#cecece\")};\r\n`;\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`;\r\n\r\nconst BindEmailInput = ({\r\n  value,\r\n  placeholder = \"您还未绑定任何邮箱哦！\",\r\n  onBindCompleted,\r\n  onBind\r\n}) => {\r\n  const [onUnbindEmail, { data, loading }] = useMutation(UNBIND_EMAIL, {\r\n    onCompleted: ({unbindEmail:{success,message}}) => {\r\n      if(success){\r\n        onBindCompleted && onBindCompleted();\r\n        ToastHint.showSuccess(\"解绑成功\");\r\n      }else{\r\n        ToastHint.showFailure(message);\r\n      }\r\n\r\n    },\r\n    onError: () => {\r\n      ToastHint.showFailure(\"解绑失败\");\r\n    }\r\n  });\r\n  return (\r\n    <Container>\r\n      <TextField hasValue={value}>{value ? value : placeholder}</TextField>\r\n      {value ? (\r\n        <Button\r\n          type={\"link\"}\r\n          onClick={() =>\r\n            ModalHint.confirm(\r\n              {\r\n                title: \"解绑邮箱\",\r\n                content: \"您确定要与该邮箱解绑？\",\r\n                loading\r\n              },\r\n              onHide =>\r\n                onUnbindEmail().then(() => {\r\n                  onHide();\r\n                })\r\n            )\r\n          }\r\n          style={{ color: \"grey\" }}\r\n        >\r\n          解绑邮箱\r\n        </Button>\r\n      ) : (\r\n        <Button type={\"link\"} onClick={onBind}>\r\n          绑定邮箱\r\n        </Button>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BindEmailInput;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Button, Header, Icon, Input, Modal } from \"semantic-ui-react\";\r\nimport BasicForm from \"../../../../common/BasicForm\";\r\nimport ToastHint from \"../../../../common/ToastHint\";\r\nimport { useBindPhone, useSendCaptcha } from \"../../../../common/hooks\";\r\nimport { ACTION_TYPE, CAPTCHA_TYPE } from \"../../../../common/CONSULT\";\r\nimport CaptchaInput from \"../../../../common/formFields/CaptchaInput\";\r\nimport _get from \"lodash/get\";\r\n\r\nconst ButtonBox = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\nconst BindPhoneModal = ({ open, onHide, title, onRefetch }) => {\r\n  const { loading: mLoading, onBindPhone } = useBindPhone({\r\n    onCompleted: res => {\r\n      if (res.success) {\r\n        onHide();\r\n        onRefetch();\r\n        ToastHint.showSuccess(\"绑定电话成功\");\r\n      } else {\r\n        ToastHint.showFailure(\"绑定失败\");\r\n      }\r\n    },\r\n    onError: () => {\r\n      ToastHint.showFailure(\"绑定失败\");\r\n    }\r\n  });\r\n  return (\r\n    <Modal\r\n      style={{ top: 300 }}\r\n      size={\"mini\"}\r\n      closeIcon\r\n      open={open}\r\n      onClose={onHide}\r\n    >\r\n      <Header content={title} />\r\n      <Modal.Content>\r\n        <BasicForm\r\n          loading={mLoading}\r\n          items={[\r\n            {\r\n              label: \"手机\",\r\n              required: true,\r\n              fieldKey: \"phone\",\r\n              rules: { phone: true },\r\n              placeholder: `请填写手机号`,\r\n              renderControl: ({ value, onChange }) => (\r\n                <Input\r\n                  defaultValue={value}\r\n                  onChange={(e, { name, value }) => {\r\n                    onChange(value);\r\n                  }}\r\n                  placeholder={\"请填写手机号\"}\r\n                />\r\n              )\r\n            },\r\n            {\r\n              label: \"验证码\",\r\n              required: true,\r\n              fieldKey: \"captchaCode\",\r\n              placeholder: `请填写昵称`,\r\n              renderControl: ({\r\n                value,\r\n                onChange,\r\n                onValidate,\r\n                form,\r\n                error,\r\n                formItemState,\r\n                onUpdateState,\r\n                onSetError\r\n              }) => (\r\n                <CaptchaInput\r\n                  value={value}\r\n                  error={error}\r\n                  placeholder={\"请填写验证码\"}\r\n                  captchaType={CAPTCHA_TYPE.SMS}\r\n                  actionType={ACTION_TYPE.BindPhoneNumber}\r\n                  onChange={onChange}\r\n                  state={formItemState}\r\n                  onSetError={onSetError}\r\n                  onUpdateState={onUpdateState}\r\n                  onValidate={sendCaptcha =>\r\n                    onValidate(() => sendCaptcha(_get(form, \"phone\")), [\r\n                      \"phone\"\r\n                    ])\r\n                  }\r\n                />\r\n              )\r\n            }\r\n          ]}\r\n        >\r\n          {({ form, onValidate, onAddErrors }) => {\r\n            return (\r\n              <ButtonBox>\r\n                <Button\r\n                  loading={mLoading}\r\n                  style={{ width: 200, marginTop: 20 }}\r\n                  onClick={() => {\r\n                    onValidate(() => onBindPhone(form.phone, form.captchaCode));\r\n                  }}\r\n                  color=\"teal\"\r\n                >\r\n                  绑定\r\n                </Button>\r\n              </ButtonBox>\r\n            );\r\n          }}\r\n        </BasicForm>\r\n      </Modal.Content>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default BindPhoneModal;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Button, Header, Icon, Input, Modal } from \"semantic-ui-react\";\r\nimport BasicForm from \"../../../../common/BasicForm\";\r\nimport ToastHint from \"../../../../common/ToastHint\";\r\nimport { useBindEmail } from \"../../../../common/hooks\";\r\nimport { ACTION_TYPE, CAPTCHA_TYPE } from \"../../../../common/CONSULT\";\r\nimport CaptchaInput from \"../../../../common/formFields/CaptchaInput\";\r\nimport _get from \"lodash/get\";\r\n\r\nconst ButtonBox = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\nconst BindEmailModal = ({ open, onHide, title, onRefetch }) => {\r\n  const { loading: mLoading, onBindEmail } = useBindEmail({\r\n    onCompleted: res => {\r\n      if (res.success) {\r\n        onHide();\r\n        onRefetch();\r\n        ToastHint.showSuccess(\"绑定邮箱成功\");\r\n      } else {\r\n        ToastHint.showFailure(\"绑定失败\");\r\n      }\r\n    },\r\n    onError: () => {\r\n      ToastHint.showFailure(\"绑定失败\");\r\n    }\r\n  });\r\n  return (\r\n    <Modal\r\n      size={\"mini\"}\r\n      style={{ top: 300 }}\r\n      closeIcon\r\n      open={open}\r\n      onClose={onHide}\r\n    >\r\n      <Header content={title} />\r\n      <Modal.Content>\r\n        <BasicForm\r\n          loading={mLoading}\r\n          items={[\r\n            {\r\n              label: \"邮箱\",\r\n              required: true,\r\n              fieldKey: \"email\",\r\n              placeholder: `请填邮箱地址！`,\r\n              rules: { isEmail: true },\r\n              renderControl: ({ value, onChange }) => (\r\n                <Input\r\n                  defaultValue={value}\r\n                  onChange={(e, { name, value }) => {\r\n                    onChange(value);\r\n                  }}\r\n                  placeholder={\"请填邮箱地址！\"}\r\n                />\r\n              )\r\n            },\r\n            {\r\n              label: \"验证码\",\r\n              required: true,\r\n              fieldKey: \"captchaCode\",\r\n              rules: { isCaptcha: true },\r\n              placeholder: `请填写验证码`,\r\n              renderControl: ({\r\n                value,\r\n                onChange,\r\n                onValidate,\r\n                form,\r\n                error,\r\n                formItemState,\r\n                onUpdateState,\r\n                onSetError\r\n              }) => (\r\n                <CaptchaInput\r\n                  value={value}\r\n                  error={error}\r\n                  placeholder={\"请填写验证码\"}\r\n                  captchaType={CAPTCHA_TYPE.EMAIL}\r\n                  actionType={ACTION_TYPE.BindEmail}\r\n                  onChange={onChange}\r\n                  onSetError={onSetError}\r\n                  state={formItemState}\r\n                  onUpdateState={onUpdateState}\r\n                  onValidate={sendCaptcha =>\r\n                    onValidate(() => sendCaptcha(_get(form, \"email\")), [\r\n                      \"email\"\r\n                    ])\r\n                  }\r\n                />\r\n              )\r\n            }\r\n          ]}\r\n        >\r\n          {({ form, onValidate }) => {\r\n            return (\r\n              <ButtonBox>\r\n                <Button\r\n                  loading={mLoading}\r\n                  style={{ width: 200, marginTop: 20 }}\r\n                  onClick={() => {\r\n                    onValidate(() => onBindEmail(form.email, form.captchaCode));\r\n                  }}\r\n                  color=\"teal\"\r\n                >\r\n                  绑定\r\n                </Button>\r\n              </ButtonBox>\r\n            );\r\n          }}\r\n        </BasicForm>\r\n      </Modal.Content>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default BindEmailModal;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { message, Upload } from \"antd\";\r\nimport styled from \"styled-components\";\r\nimport { useFileInput } from \"../hooks\";\r\nimport { LoadingOutlined, PictureOutlined } from \"@ant-design/icons\";\r\nimport { Icon } from \"semantic-ui-react\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  .uploader {\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    > .ant-upload {\r\n   \r\n      border-radius: ${props => (props.isAvatar ? \"50%\" : \"\")}\r\n      width: ${props => (props.width ? props.width : \"128px\")};\r\n      height: ${props => (props.height ? props.height : \"128px\")};\r\n    }\r\n  }\r\n`;\r\n\r\nfunction beforeUpload(file) {\r\n  const isJpgOrPng = file.type === \"image/jpeg\" || file.type === \"image/png\";\r\n  if (!isJpgOrPng) {\r\n    message.error(\"You can only upload JPG/PNG file!\");\r\n  }\r\n  const isLt2M = file.size / 1024 / 1024 < 2;\r\n  if (!isLt2M) {\r\n    message.error(\"Image must smaller than 2MB!\");\r\n  }\r\n  return isJpgOrPng && isLt2M;\r\n}\r\n\r\nconst UploadBox = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`;\r\n\r\nconst IconBox = styled.div`\r\n  font-size: 30px;\r\n`;\r\n\r\nconst ImageInput = ({ isTmp, onChange, value, width, height, isAvatar }) => {\r\n  const { loading, imageUrl, actionUrl, handleChange } = useFileInput({\r\n    isTmp,\r\n    value,\r\n    onChange\r\n  });\r\n  const uploadButton = (\r\n    <UploadBox>\r\n      <IconBox>\r\n        {loading ? (\r\n          <LoadingOutlined />\r\n        ) : isAvatar ? (\r\n          <Icon size={\"big\"} name={\"user outline\"} />\r\n        ) : (\r\n          <PictureOutlined />\r\n        )}\r\n      </IconBox>\r\n      {!isAvatar && <div style={{ marginTop: 2 }}>上传</div>}\r\n    </UploadBox>\r\n  );\r\n  return (\r\n    <Container width={width} height={height} isAvatar={isAvatar}>\r\n      <Upload\r\n        name=\"file\"\r\n        listType=\"picture-card\"\r\n        className=\"uploader\"\r\n        showUploadList={false}\r\n        action={actionUrl}\r\n        beforeUpload={beforeUpload}\r\n        onChange={handleChange}\r\n      >\r\n        {imageUrl ? (\r\n          <img\r\n            src={imageUrl}\r\n            alt=\"avatar\"\r\n            style={{\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n              borderRadius: isAvatar ? \"50%\" : \"\"\r\n            }}\r\n          />\r\n        ) : (\r\n          uploadButton\r\n        )}\r\n      </Upload>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ImageInput;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Button } from \"antd\";\r\n\r\nconst TextField = styled.div``;\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`;\r\n\r\nconst ResetPasswordInput = ({ onReset }) => {\r\n  return (\r\n    <Container>\r\n      <TextField>********</TextField>\r\n      <Button type={\"link\"} onClick={onReset}>\r\n        重置密码\r\n      </Button>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ResetPasswordInput;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Button, Header, Icon, Input, Modal, Select } from \"semantic-ui-react\";\r\nimport BasicForm from \"../../../../common/BasicForm\";\r\nimport ToastHint from \"../../../../common/ToastHint\";\r\nimport { useResetPassword } from \"../../../../common/hooks\";\r\nimport { ACTION_TYPE, CAPTCHA_TYPE } from \"../../../../common/CONSULT\";\r\nimport CaptchaInput from \"../../../../common/formFields/CaptchaInput\";\r\nimport _get from \"lodash/get\";\r\nimport isEmail from \"validator/lib/isEmail\";\r\nimport isPhone from \"validator/lib/isMobilePhone\";\r\nconst ButtonBox = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\nconst ResetPasswordModal = ({\r\n  email,\r\n  phone,\r\n  open,\r\n  onHide,\r\n  title,\r\n  onRefetch\r\n}) => {\r\n  let options = [];\r\n  if (email) {\r\n    options.push({ text: email, value: email });\r\n  }\r\n  if (phone) {\r\n    options.push({ text: phone, value: phone });\r\n  }\r\n  const { loading: mLoading, onResetPassword } = useResetPassword({\r\n    onCompleted: res => {\r\n      if (res.success) {\r\n        onHide();\r\n        onRefetch();\r\n        ToastHint.showSuccess(\"重置密码成功\");\r\n      } else {\r\n        ToastHint.showFailure(\"重置密码失败\");\r\n      }\r\n    },\r\n    onError: () => {\r\n      ToastHint.showFailure(\"重置密码失败\");\r\n    }\r\n  });\r\n  return (\r\n    <Modal\r\n      style={{ top: 300 }}\r\n      size={\"mini\"}\r\n      closeIcon\r\n      open={open}\r\n      onClose={onHide}\r\n    >\r\n      <Header content={title} />\r\n      <Modal.Content>\r\n        <BasicForm\r\n          loading={mLoading}\r\n          formData={{ name: email || phone }}\r\n          items={[\r\n            {\r\n              label:\r\n                options.length > 1 ? \"选择 邮箱|手机\" : email ? \"邮箱\" : \"手机\",\r\n              required: true,\r\n              fieldKey: \"name\",\r\n              renderControl: ({ value, onChange }) => (\r\n                <Select\r\n                  disabled={options.length <= 1}\r\n                  options={options}\r\n                  defaultValue={value}\r\n                  onChange={(e, { name, value }) => {\r\n                    console.log(\"value____GGDSFSDFDS______\", value);\r\n                    onChange(value);\r\n                  }}\r\n                  placeholder={`请填写邮箱或手机号`}\r\n                />\r\n              )\r\n            },\r\n            {\r\n              label: \"验证码\",\r\n              required: true,\r\n              fieldKey: \"captchaCode\",\r\n              renderControl: ({\r\n                value,\r\n                onChange,\r\n                onValidate,\r\n                form,\r\n                error,\r\n                formItemState,\r\n                onUpdateState,\r\n                onSetError,\r\n                setErrors\r\n              }) => (\r\n                <CaptchaInput\r\n                  value={value}\r\n                  error={error}\r\n                  placeholder={\"请填写验证码\"}\r\n                  captchaType={\r\n                    isEmail(_get(form, \"name\", \"\"))\r\n                      ? CAPTCHA_TYPE.EMAIL\r\n                      : CAPTCHA_TYPE.SMS\r\n                  }\r\n                  actionType={\r\n                    isEmail(_get(form, \"name\", \"\"))\r\n                      ? ACTION_TYPE.BindEmail\r\n                      : ACTION_TYPE.BindPhoneNumber\r\n                  }\r\n                  onChange={onChange}\r\n                  state={formItemState}\r\n                  onSetError={onSetError}\r\n                  onUpdateState={onUpdateState}\r\n                  onValidate={sendCaptcha => {\r\n                    const name = _get(form, \"name\");\r\n                    if (!name) {\r\n                      setErrors({ name: \"邮箱或手机号此处不能为空！\" });\r\n                      return;\r\n                    }\r\n                    if (!(isEmail(name) || isPhone(name))) {\r\n                      setErrors({\r\n                        name: \"您输入的邮箱或手机号格式不正确！\"\r\n                      });\r\n                      return;\r\n                    }\r\n                    onValidate(() => sendCaptcha(_get(form, \"name\")), [\"name\"]);\r\n                  }}\r\n                />\r\n              )\r\n            },\r\n            {\r\n              label: \"新密码\",\r\n              required: true,\r\n              fieldKey: \"password\",\r\n              renderControl: ({ value, onChange }) => (\r\n                <Input\r\n                  type={\"password\"}\r\n                  autoComplete=\"new-password\"\r\n                  defaultValue={value}\r\n                  onChange={(e, { name, value }) => {\r\n                    onChange(value);\r\n                  }}\r\n                  placeholder={`请填写新密码`}\r\n                />\r\n              )\r\n            },\r\n            {\r\n              label: \"确认新密码\",\r\n              required: true,\r\n              fieldKey: \"confirmPassword\",\r\n              renderControl: ({ value, onChange }) => (\r\n                <Input\r\n                  type={\"password\"}\r\n                  autoComplete=\"new-password\"\r\n                  defaultValue={value}\r\n                  onChange={(e, { name, value }) => {\r\n                    onChange(value);\r\n                  }}\r\n                  placeholder={`请填写新密码`}\r\n                />\r\n              )\r\n            }\r\n          ]}\r\n        >\r\n          {({ form, onValidate, onAddErrors }) => {\r\n            return (\r\n              <ButtonBox>\r\n                <Button\r\n                  loading={mLoading}\r\n                  style={{ width: 200, marginTop: 20 }}\r\n                  onClick={() => {\r\n                    onValidate(() => {\r\n                      if (form.password !== form.confirmPassword) {\r\n                        onAddErrors({\r\n                          confirmPassword: \"确认密码与输入的新密码不一致！\"\r\n                        });\r\n                        return;\r\n                      }\r\n                      onResetPassword(\r\n                        form.name,\r\n                        isEmail(form.name)\r\n                          ? CAPTCHA_TYPE.EMAIL\r\n                          : CAPTCHA_TYPE.SMS,\r\n                        form.password,\r\n                        form.captchaCode\r\n                      );\r\n                    });\r\n                  }}\r\n                  color=\"teal\"\r\n                >\r\n                  重置\r\n                </Button>\r\n              </ButtonBox>\r\n            );\r\n          }}\r\n        </BasicForm>\r\n      </Modal.Content>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default ResetPasswordModal;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useMe } from \"../../../../common/hooks\";\r\nimport BasicForm from \"../../../../common/BasicForm\";\r\nimport { Button, Input } from \"semantic-ui-react\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { SAVE_CURRENT_USER } from \"../../../../common/mutationGql\";\r\nimport ToastHint from \"../../../../common/ToastHint\";\r\nimport Loading from \"../../../../common/Loading\";\r\nimport Header from \"../Header\";\r\nimport BindPhoneInput from \"../../../../common/formFields/BindPhoneInput\";\r\nimport BindEmailInput from \"../../../../common/formFields/BindEmailInput\";\r\nimport BindPhoneModal from \"./BindPhoneModal\";\r\nimport BindEmailModal from \"./BindEmailModal\";\r\nimport ImageInput from \"../../../../common/formFields/ImageInput\";\r\nimport _get from \"lodash/get\";\r\nimport ResetPasswordInput from \"../../../../common/formFields/ResetPasswordInput\";\r\nimport ResetPasswordModal from \"./ResetPasswordModal\";\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst useSettings = () => {\r\n  const [showBindPhoneModal, setShowBindPhoneModal] = useState(false);\r\n  const [showBindEmailModal, setShowBindEmailModal] = useState(false);\r\n  const [showResetPasswordModal, setResetPasswordModal] = useState(false);\r\n  const { me, loading, refetch } = useMe();\r\n  const [onSaveCurrentUser, {}] = useMutation(SAVE_CURRENT_USER, {\r\n    onCompleted: () => {\r\n      //refetch && refetch();\r\n      ToastHint.showSuccess(\"保存成功！\");\r\n    },\r\n    onError: error => {\r\n      console.log(\"errorGGGG__________________________\", error);\r\n      ToastHint.showFailure(\"保存失败！\");\r\n    }\r\n  });\r\n  return {\r\n    me,\r\n    loading,\r\n    refetch,\r\n    onSaveCurrentUser,\r\n    showBindPhoneModal,\r\n    setShowBindPhoneModal,\r\n    showBindEmailModal,\r\n    setShowBindEmailModal,\r\n    showResetPasswordModal,\r\n    setResetPasswordModal\r\n  };\r\n};\r\n\r\nconst UserSettings = () => {\r\n  const {\r\n    me,\r\n    loading,\r\n    refetch,\r\n    onSaveCurrentUser,\r\n    showBindPhoneModal,\r\n    setShowBindPhoneModal,\r\n    showBindEmailModal,\r\n    setShowBindEmailModal,\r\n    showResetPasswordModal,\r\n    setResetPasswordModal\r\n  } = useSettings();\r\n  if (!me) {\r\n    return <Loading />;\r\n  }\r\n  return (\r\n    <Container>\r\n      <Header title={\"个人信息\"} />\r\n      <BasicForm\r\n        loading={loading}\r\n        width={400}\r\n        formData={{ ...me, avatarUrl: _get(me, \"avatar.url\") }}\r\n        items={[\r\n          {\r\n            label: \"头像\",\r\n            fieldKey: \"avatarUrl\",\r\n            placeholder: `请填写用户名`,\r\n            renderControl: ({ value, onChange }) => (\r\n              <ImageInput\r\n                isAvatar\r\n                value={value}\r\n                onChange={onChange}\r\n                width={120}\r\n                height={120}\r\n              />\r\n            )\r\n          },\r\n          {\r\n            label: \"用户名\",\r\n            required: true,\r\n            fieldKey: \"username\",\r\n            placeholder: `请填写用户名`,\r\n            renderControl: ({ value, onChange }) => (\r\n              <Input\r\n                defaultValue={value}\r\n                onChange={(e, { name, value }) => {\r\n                  onChange(value);\r\n                }}\r\n              />\r\n            )\r\n          },\r\n          {\r\n            label: \"昵称\",\r\n            required: true,\r\n            fieldKey: \"nickname\",\r\n            placeholder: `请填写昵称`,\r\n            renderControl: ({ value, onChange }) => (\r\n              <Input\r\n                defaultValue={value}\r\n                onChange={(e, { name, value }) => {\r\n                  onChange(value);\r\n                }}\r\n              />\r\n            )\r\n          },\r\n          {\r\n            label: \"手机号\",\r\n            fieldKey: \"phone\",\r\n            placeholder: `请填写昵称`,\r\n            renderControl: ({ value, onChange }) => (\r\n              <BindPhoneInput\r\n                value={value}\r\n                onBindCompleted={refetch}\r\n                onBind={() => setShowBindPhoneModal(true)}\r\n              />\r\n            )\r\n          },\r\n          {\r\n            label: \"邮箱\",\r\n            fieldKey: \"email\",\r\n            placeholder: `请填写邮箱`,\r\n            renderControl: ({ value, onChange }) => (\r\n              <BindEmailInput\r\n                value={value}\r\n                onBindCompleted={refetch}\r\n                onBind={() => setShowBindEmailModal(true)}\r\n              />\r\n            )\r\n          },\r\n          {\r\n            label: \"密码\",\r\n            fieldKey: \"password\",\r\n            renderControl: ({ value, onChange }) => (\r\n              <ResetPasswordInput onReset={() => setResetPasswordModal(true)} />\r\n            )\r\n          }\r\n        ]}\r\n      >\r\n        {({ form, onValidate }) => {\r\n          return (\r\n            <Button\r\n              style={{ width: 200, marginTop: 20 }}\r\n              onClick={() => {\r\n                onValidate(() =>\r\n                  onSaveCurrentUser({\r\n                    variables: {\r\n                      username: form.username,\r\n                      nickname: form.nickname,\r\n                      email: form.email,\r\n                      fullName: form.fullName,\r\n                      phone: form.phone,\r\n                      avatarUrl: form.avatarUrl\r\n                    }\r\n                  })\r\n                );\r\n              }}\r\n              color=\"teal\"\r\n            >\r\n              保存\r\n            </Button>\r\n          );\r\n        }}\r\n      </BasicForm>\r\n      <BindPhoneModal\r\n        title={\"绑定电话\"}\r\n        open={showBindPhoneModal}\r\n        onRefetch={refetch}\r\n        onHide={() => setShowBindPhoneModal(false)}\r\n      />\r\n      <BindEmailModal\r\n        title={\"绑定邮箱\"}\r\n        onRefetch={refetch}\r\n        open={showBindEmailModal}\r\n        onHide={() => setShowBindEmailModal(false)}\r\n      />\r\n      <ResetPasswordModal\r\n        title={\"重置密码\"}\r\n        email={me.email}\r\n        phone={me.phone}\r\n        open={showResetPasswordModal}\r\n        onRefetch={refetch}\r\n        onHide={() => setResetPasswordModal(false)}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default UserSettings;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Icon, Menu, Segment } from \"semantic-ui-react\";\r\nimport styled from \"styled-components\";\r\nimport _map from \"lodash/map\";\r\nimport { useTabs } from \"../../../common/hooks\";\r\nimport _head from \"lodash/head\";\r\n\r\nconst MenuItem = styled(Menu.Item)``;\r\n\r\nconst Content = styled(Segment)`\r\n  min-height: 200px;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  padding: 0 20px;\r\n`;\r\n\r\nconst TabCount = styled.div``;\r\n\r\nconst PageTabs = ({ tabs, initTab, children, renderActions }) => {\r\n  const { currentTab, onSwitchTab, onUpdateTabCount, countState } = useTabs({\r\n    initTab: initTab || _head(tabs)\r\n  });\r\n  return (\r\n    <Container>\r\n      <Menu attached=\"top\" tabular>\r\n        {_map(tabs, tab => {\r\n          const { name, label } = tab;\r\n          return (\r\n            <MenuItem\r\n              key={name}\r\n              name={name}\r\n              onClick={() => onSwitchTab(tab)}\r\n              active={tab.name === currentTab.name}\r\n            >\r\n              {label}\r\n              {countState && countState[name] && (\r\n                <TabCount>({countState[name]})</TabCount>\r\n              )}\r\n            </MenuItem>\r\n          );\r\n        })}\r\n        {renderActions && (\r\n          <Menu.Menu position=\"right\">\r\n            <Menu.Item>{renderActions({ currentTab })}</Menu.Item>\r\n          </Menu.Menu>\r\n        )}\r\n      </Menu>\r\n      <Content attached=\"bottom\">\r\n        {children && children({ currentTab, onSwitchTab, onUpdateTabCount })}\r\n      </Content>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default PageTabs;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Button } from \"semantic-ui-react\";\r\n\r\nconst UpdateButton = styled(Button)``;\r\n\r\nconst useUpdateButton = ({ onUpdateProgramStatus, status }) => {\r\n  let buttonText = \"发布\";\r\n  let actionStatus = \"Awaiting\";\r\n  let color = \"google plus\";\r\n  let successMsg = \"\";\r\n  let errorMsg = \"\";\r\n  switch (status) {\r\n    case \"Draft\":\r\n      buttonText = \"发布\";\r\n      actionStatus = \"Awaiting\";\r\n      color = \"green\";\r\n      successMsg = \"发布成功\";\r\n      errorMsg = \"发布失败\";\r\n      break;\r\n    case \"Awaiting\":\r\n      buttonText = \"撤回\";\r\n      actionStatus = \"Draft\";\r\n      successMsg = \"撤回成功\";\r\n      errorMsg = \"撤回失败\";\r\n      break;\r\n    default:\r\n      buttonText = \"\";\r\n      actionStatus = \"\";\r\n  }\r\n\r\n  return { buttonText, actionStatus, color, successMsg, errorMsg };\r\n};\r\n\r\nconst UpdateStatusButton = ({ status, onUpdateProgramStatus }) => {\r\n  const {\r\n    buttonText,\r\n    actionStatus,\r\n    color,\r\n    successMsg,\r\n    errorMsg\r\n  } = useUpdateButton({\r\n    status,\r\n    onUpdateProgramStatus\r\n  });\r\n  return buttonText ? (\r\n    <UpdateButton\r\n      color={color}\r\n      onClick={() => onUpdateProgramStatus(actionStatus, successMsg, errorMsg)}\r\n    >\r\n      {buttonText}\r\n    </UpdateButton>\r\n  ) : null;\r\n};\r\n\r\nexport default UpdateStatusButton;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { getOptionByKey } from \"../../../../../utils/optionsUtils\";\r\nimport { PROGRAM_STATUS } from \"../../../../../common/OPTIONS\";\r\nimport { Icon, Popup, Button } from \"semantic-ui-react\";\r\nimport { useUpdateProgramStatus } from \"../../../../../common/hooks\";\r\nimport UpdateStatusButton from \"./UpdateStatusButton\";\r\nimport Space from \"../../../../../common/Space\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 26px;\r\n  box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.3);\r\n  padding-right: 10px;\r\n`;\r\n\r\nconst Cover = styled.img`\r\n  width: 200px; \r\n  height: 140px;\r\n`;\r\n\r\nconst Header = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 10px;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n`;\r\n\r\nconst Content = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 10px 10px;\r\n  flex: 1;\r\n  height: 140px;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst ActionsWrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst Status = styled.div`\r\n  background-color: ${props => props.bColor};\r\n  color: white;\r\n  width: 80px;\r\n  font-size: 16px;\r\n  line-height: 28px;\r\n  border-radius: 20px;\r\n  height: 28px;\r\n`;\r\n\r\nconst ContentRow = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst Code = styled.div`\r\n  font-size: 14px;\r\n  color: gray;\r\n`;\r\n\r\nconst ContentFooter = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst DateFields = styled.div`\r\n  color: #cecece;\r\n  margin-left: 30px;\r\n`;\r\n\r\nconst VersionCount = styled.div`\r\n  color: gray;\r\n  margin-left: 20px;\r\n`;\r\n\r\nconst CountItemBox = styled.div`\r\n  color: gray;\r\n  margin-left: 20px;\r\n`;\r\n\r\nconst useProgramItem = ({ programItem }) => {\r\n  const [program, setProgram] = useState(programItem);\r\n  const { mLoading, onUpdateProgramStatus } = useUpdateProgramStatus({\r\n    programId: program.id,\r\n    onUpdateStatusCompleted: status => {\r\n      setProgram({ ...program, status });\r\n    }\r\n  });\r\n  return { program, mLoading, onUpdateProgramStatus };\r\n};\r\n\r\nconst CurrentVersionBox = styled.div`\r\n  margin-left: 40px;\r\n  border: 1px solid lightskyblue;\r\n  color: darkgray;\r\n  padding: 2px 6px;\r\n`;\r\n\r\nconst CurrentVersion = ({ currentVersion }) => {\r\n  if (!currentVersion) {\r\n    return null;\r\n  }\r\n  const { id, name, versionCode } = currentVersion;\r\n  return (\r\n    <CurrentVersionBox>\r\n      当前版本：{name}&nbsp;&nbsp;&nbsp;&nbsp;{versionCode}\r\n    </CurrentVersionBox>\r\n  );\r\n};\r\n\r\nconst ProgramItem = ({\r\n  program: programItem,\r\n  noActions,\r\n  onLinkTo,\r\n  onEdit,\r\n  onToProgram\r\n}) => {\r\n  const { program, onUpdateProgramStatus, mLoading } = useProgramItem({\r\n    programItem\r\n  });\r\n  const {\r\n    id,\r\n    dateCreated,\r\n    lastUpdated,\r\n    upCount,\r\n    followerCount,\r\n    name,\r\n    status,\r\n    code,\r\n    cover: { url },\r\n    currentVersion,\r\n    versionCount\r\n  } = program;\r\n  const { label, bColor } = getOptionByKey(PROGRAM_STATUS, \"value\", status);\r\n  return (\r\n    <Container>\r\n      <Cover src={url} />\r\n      <Content>\r\n        <Header>\r\n          <Title>{name}</Title>\r\n        </Header>\r\n        <ContentRow>\r\n          <Code>编号：{code}</Code>\r\n          <VersionCount>版本数：{versionCount}</VersionCount>\r\n          <Popup\r\n            content={\"喜欢人数\"}\r\n            trigger={\r\n              <CountItemBox>\r\n                <Icon name={\"heart\"} />\r\n                {upCount}\r\n              </CountItemBox>\r\n            }\r\n          />\r\n\r\n          <Popup\r\n            content={\"收藏人数\"}\r\n            trigger={\r\n              <CountItemBox>\r\n                <Icon name={\"star\"} />\r\n                {followerCount}\r\n              </CountItemBox>\r\n            }\r\n          />\r\n          <CurrentVersion currentVersion={currentVersion} />\r\n        </ContentRow>\r\n        <ContentFooter>\r\n          <Status bColor={bColor}>{label}</Status>\r\n          <DateFields>创建时间：{dateCreated}</DateFields>\r\n          <DateFields>更新时间：{lastUpdated}</DateFields>\r\n        </ContentFooter>\r\n      </Content>\r\n      {noActions ? null : (\r\n        <ActionsWrapper>\r\n          <UpdateStatusButton\r\n            status={status}\r\n            onUpdateProgramStatus={onUpdateProgramStatus}\r\n          />\r\n          <Space width={\"10px\"} />\r\n          <Button size={\"mini\"} basic color=\"teal\" onClick={onEdit}>\r\n            编辑\r\n          </Button>\r\n          <Space width={\"10px\"} />\r\n          {programItem.currentVersion && (\r\n            <Button size={\"mini\"} basic color=\"blue\" onClick={onToProgram}>\r\n              查看\r\n            </Button>\r\n          )}\r\n        </ActionsWrapper>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ProgramItem;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport PaginationQueryList from \"../../../../../common/PaginationQueryList\";\r\nimport { GET_PROGRAMS } from \"../../../../../common/queryGql\";\r\nimport _map from \"lodash/map\";\r\nimport ProgramItem from \"./ProgramItem\";\r\nimport Empty from \"../../../../../common/Empty\";\r\nimport PersistStorage from \"../../../../../utils/PersistStorage\";\r\nimport { MY_PROGRAMS_REFRESH } from \"../../../../../common/CONSULT\";\r\nimport isEmpty from \"validator/es/lib/isEmpty\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  padding: 12px 14px;\r\n  min-height: 200px;\r\n`;\r\n\r\nconst _MyPrograms = ({ items, onGoTo, refetch }) => {\r\n  // 及时刷新我的\r\n  const refreshKey = PersistStorage.getItem(MY_PROGRAMS_REFRESH);\r\n  useEffect(() => {\r\n    if (refreshKey !== \"refresh\") {\r\n      refetch && refetch();\r\n    } else {\r\n      PersistStorage.setItem(MY_PROGRAMS_REFRESH, \"refresh\");\r\n    }\r\n  }, [refreshKey !== \"refresh\"]);\r\n  return (\r\n    <Container>\r\n      {_map(items, item => {\r\n        return (\r\n          <ProgramItem\r\n            key={\"my_program_\" + item.id}\r\n            program={item}\r\n            onEdit={() => onGoTo(`/personal/programEdit${item.id}`)}\r\n            onToProgram={() => onGoTo(`/program/${item.id}`)}\r\n          />\r\n        );\r\n      })}\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst MyPrograms = ({ currentUser, onGoTo, onUpdateTabCount }) => {\r\n  if (!currentUser.id) {\r\n    return <Empty text={\"请先登录，再操作哦！\"} />;\r\n  }\r\n  return (\r\n    <PaginationQueryList\r\n      gql={GET_PROGRAMS}\r\n      searchFields={{\r\n        creatorId: currentUser.id\r\n      }}\r\n      hidePaginationInSinglePage={true}\r\n      paginationSize={\"mini\"}\r\n      paginationSecondary={true}\r\n      dataKey={\"programs\"}\r\n      limit={10}\r\n      onUpdateCount={onUpdateTabCount}\r\n    >\r\n      {({ loading, count, items, refetch }) => {\r\n        if (count <= 0) {\r\n          return <Empty text={\"你还没创建任何工具哦！\"} />;\r\n        }\r\n        return <_MyPrograms items={items} refetch={refetch} onGoTo={onGoTo} />;\r\n      }}\r\n    </PaginationQueryList>\r\n  );\r\n};\r\n\r\nexport default MyPrograms;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Rating } from \"semantic-ui-react\";\r\n\r\nconst Container = styled.div`\r\n  &:hover {\r\n    .cover_img {\r\n      box-shadow: 0 8px 20px #bbb;\r\n    }\r\n    .program_name {\r\n      color: #fb6b84;\r\n      font-size: 16px;\r\n    }\r\n  }\r\n`;\r\n\r\nconst Cover = styled.img`\r\n  width: 240px;\r\n  height: 140px;\r\n`;\r\n\r\nconst Name = styled.div`\r\n  margin-top: 4px;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  text-align: left;\r\n  margin-bottom: 4px;\r\n`;\r\n\r\nconst Footer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst RatingCount = styled.div`\r\n  .rating {\r\n    pointer-events: none;\r\n    ::selection {\r\n      color: transparent;\r\n    }\r\n  }\r\n`;\r\n\r\nconst ProgramItem = ({ program }) => {\r\n  const {\r\n    id,\r\n    cover: { url },\r\n    name,\r\n    scoreCount = 0,\r\n    averageScore = 0\r\n  } = program;\r\n  return (\r\n    <Container>\r\n      <Cover className={\"cover_img\"} src={url} />\r\n      <Name className={\"program_name\"}>{name}</Name>\r\n      <Footer>\r\n        <Rating disabled defaultRating={averageScore} maxRating={5} />\r\n        <RatingCount>{scoreCount}</RatingCount>\r\n      </Footer>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ProgramItem;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport PaginationQueryList from \"../../../../../common/PaginationQueryList\";\r\nimport { GET_FOLLOWERS } from \"../../../../../common/queryGql\";\r\nimport { OBJ_TYPES } from \"../../../../../common/CONSULT\";\r\nimport FlatList from \"../../../../../common/FlatList\";\r\nimport ProgramItem from \"../../../../../common/item/ProgramItem\";\r\nimport { followDataToJson } from \"../../../../../utils/jsonUtils\";\r\nimport Empty from \"../../../../../common/Empty\";\r\nimport LinkToObject from \"../../../../../common/LinkToObject\";\r\n\r\nconst Container = styled.div``;\r\n\r\nconst FollowPrograms = ({ currentUser, onUpdateTabCount }) => {\r\n  return (\r\n    <PaginationQueryList\r\n      hidePaginationInSinglePage={true}\r\n      gql={GET_FOLLOWERS}\r\n      searchFields={{\r\n        types: [OBJ_TYPES.PROGRAM],\r\n        userId: currentUser.id,\r\n        sort: \"lastUpdated\",\r\n        order: \"desc\"\r\n      }}\r\n      paginationSize={\"mini\"}\r\n      dataKey={\"followers\"}\r\n      limit={10}\r\n      onUpdateCount={onUpdateTabCount}\r\n    >\r\n      {({ loading, count, items, refetch }) => {\r\n        if (count <= 0) {\r\n          return <Empty text={\"你还没收藏任何工具哦！\"} />;\r\n        }\r\n        return (\r\n          <Container>\r\n            <FlatList items={items} columns={4}>\r\n              {({ item }) => {\r\n                const program = followDataToJson(item.followedObj);\r\n                return (\r\n                  <LinkToObject objType={OBJ_TYPES.PROGRAM} objId={program.id}>\r\n                    <ProgramItem program={program} />\r\n                  </LinkToObject>\r\n                );\r\n              }}\r\n            </FlatList>\r\n          </Container>\r\n        );\r\n      }}\r\n    </PaginationQueryList>\r\n  );\r\n};\r\n\r\nexport default FollowPrograms;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Button, Icon } from \"semantic-ui-react\";\r\nimport styled from \"styled-components\";\r\nimport { PERSONAL_PROGRAM_CREATE } from \"../../../../../common/CONSULT\";\r\nconst CreateButton = styled(Button)``;\r\n\r\nconst CreateProgramButton = ({ onGoTo }) => {\r\n  return (\r\n    <CreateButton\r\n      size={\"mini\"}\r\n      basic\r\n      circular\r\n      color=\"blue\"\r\n      onClick={() => onGoTo(PERSONAL_PROGRAM_CREATE)}\r\n    >\r\n      <Icon name={\"plus\"} />\r\n      添加工具\r\n    </CreateButton>\r\n  );\r\n};\r\n\r\nexport default CreateProgramButton;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport PageTabs from \"../PageTabs\";\r\nimport Header from \"../Header\";\r\nimport MyPrograms from \"./segaments/MyPrograms\";\r\nimport FollowPrograms from \"./segaments/FollowPrograms\";\r\nimport CreateProgramButton from \"./segaments/CreateProgramButton\";\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst PROGRAM_TABS = [\r\n  { name: \"Follow\", label: \"收藏工具\" },\r\n  { name: \"My\", label: \"我的工具\" }\r\n];\r\n\r\nconst PageContent = ({ currentTab, currentUser, onGoTo, onUpdateTabCount }) => {\r\n  switch (currentTab.name) {\r\n    case \"Follow\":\r\n      return (\r\n        <FollowPrograms\r\n          currentUser={currentUser}\r\n          onUpdateTabCount={count => onUpdateTabCount(currentTab.name, count)}\r\n        />\r\n      );\r\n    case \"My\":\r\n      return (\r\n        <MyPrograms\r\n          currentUser={currentUser}\r\n          onGoTo={onGoTo}\r\n          onUpdateTabCount={count => onUpdateTabCount(currentTab.name, count)}\r\n        />\r\n      );\r\n  }\r\n};\r\n\r\nconst Program = ({ currentUser, onGoTo }) => {\r\n  return (\r\n    <Container>\r\n      <Header title={\"工具\"} />\r\n      <PageTabs\r\n        tabs={PROGRAM_TABS}\r\n        renderActions={() => <CreateProgramButton onGoTo={onGoTo} />}\r\n      >\r\n        {({ currentTab, onUpdateTabCount }) => {\r\n          return (\r\n            <PageContent\r\n              currentTab={currentTab}\r\n              currentUser={currentUser}\r\n              onGoTo={onGoTo}\r\n              onUpdateTabCount={onUpdateTabCount}\r\n            />\r\n          );\r\n        }}\r\n      </PageTabs>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Program;\r\n","import React from \"react\";\r\nimport PaginationQueryList from \"../../../common/PaginationQueryList\";\r\nimport { GET_FOLLOWERS } from \"../../../common/queryGql\";\r\nimport FlatList from \"../../../common/FlatList\";\r\nimport RefetchHandle from \"../../../common/RefetchHandle\";\r\nimport Empty from \"../../../common/Empty\";\r\n\r\nconst FollowsQuery = ({\r\n  userId,\r\n  type,\r\n  types,\r\n  children,\r\n  columns = 4,\r\n  queryLimit = 10,\r\n  refetchNow,\r\n  emptyText,\r\n  beforeRefetch\r\n}) => {\r\n  return (\r\n    <PaginationQueryList\r\n      hidePaginationInSinglePage={true}\r\n      gql={GET_FOLLOWERS}\r\n      searchFields={{\r\n        types: types ? types : [type],\r\n        userId: userId,\r\n        sort: \"lastUpdated\",\r\n        order: \"desc\",\r\n        limit: queryLimit\r\n      }}\r\n      paginationSize={\"mini\"}\r\n      dataKey={\"followers\"}\r\n      limit={queryLimit}\r\n    >\r\n      {({ loading, count, items, refetch }) => {\r\n        if (count <= 0) {\r\n          return <Empty text={emptyText} />;\r\n        }\r\n        return (\r\n          <div>\r\n            <FlatList items={items} columns={columns}>\r\n              {({ item, isLastRow }) => {\r\n                return children({ item, refetchFollows: refetch, isLastRow });\r\n              }}\r\n            </FlatList>\r\n            <RefetchHandle\r\n              refetch={() => {\r\n                beforeRefetch && beforeRefetch();\r\n                refetch();\r\n              }}\r\n              refetchOnce={refetchNow}\r\n            />\r\n          </div>\r\n        );\r\n      }}\r\n    </PaginationQueryList>\r\n  );\r\n};\r\n\r\nexport default FollowsQuery;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useSwitchFollow } from \"../../../common/hooks\";\r\nimport { OBJ_TYPES } from \"../../../common/CONSULT\";\r\nimport { Icon, Popup } from \"semantic-ui-react\";\r\n\r\nconst ItemWrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  flex-direction: column;\r\n  &:hover {\r\n    .remove_btn {\r\n      visibility: visible;\r\n    }\r\n  }\r\n`;\r\n\r\nconst RemoveBox = styled.div`\r\n  color: gray;\r\n  display: flex;\r\n  width: 100%;\r\n  justify-content: flex-end;\r\n  visibility: hidden;\r\n  cursor: pointer;\r\n  margin-bottom: 4px;\r\n  &:hover {\r\n    color: lightskyblue;\r\n  }\r\n`;\r\n\r\nconst FollowItemWrapper = ({\r\n  objId,\r\n  onSwitchFollowCompleted,\r\n  successMsg = \"\",\r\n  errorMsg = \"\",\r\n  popupContent,\r\n  children\r\n}) => {\r\n  const { onSwitchFollow, mLoading } = useSwitchFollow({\r\n    objId: objId,\r\n    objType: OBJ_TYPES.BOOK,\r\n    onSwitchCompleted: onSwitchFollowCompleted,\r\n    currentFollowed: true,\r\n    successMsg: { unFollowed: successMsg },\r\n    errorMsg: { unFollowed: errorMsg }\r\n  });\r\n\r\n  return (\r\n    <ItemWrapper>\r\n      <RemoveBox className={\"remove_btn\"}>\r\n        <Popup\r\n          content={popupContent}\r\n          trigger={\r\n            <Icon loading={mLoading} onClick={onSwitchFollow} name={\"close\"} />\r\n          }\r\n        />\r\n      </RemoveBox>\r\n      {children}\r\n    </ItemWrapper>\r\n  );\r\n};\r\n\r\nexport default FollowItemWrapper;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Header from \"../Header\";\r\nimport FollowsQuery from \"../FollowsQuery\";\r\nimport { BOOK, OBJ_TYPES } from \"../../../../common/CONSULT\";\r\nimport BookItem from \"../../../../common/item/BookItem\";\r\nimport { followDataToJson } from \"../../../../utils/jsonUtils\";\r\nimport FollowItemWrapper from \"../FollowItemWrapper\";\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst BooksWrapper = styled.div`\r\n  padding: 0 22px;\r\n`;\r\n\r\nconst Book = ({ currentUser, onGoTo }) => {\r\n  return (\r\n    <Container>\r\n      <Header title={\"书架\"} />\r\n      <BooksWrapper>\r\n        <FollowsQuery\r\n          emptyText={\"您的书架还是空的哦！\"}\r\n          userId={currentUser.id}\r\n          type={OBJ_TYPES.BOOK}\r\n          columns={6}\r\n        >\r\n          {({ item, refetchFollows }) => {\r\n            const book = followDataToJson(item.followedObj);\r\n            return (\r\n              <FollowItemWrapper\r\n                objId={book.id}\r\n                popupContent={\"移出书架\"}\r\n                onSwitchFollowCompleted={refetchFollows}\r\n                successMsg={\"移出书架成功！\"}\r\n                errorMsg={\"移出书架失败！\"}\r\n              >\r\n                <BookItem\r\n                  size={0.8}\r\n                  book={book}\r\n                  onToBook={() => onGoTo(`${BOOK}${book.id}`)}\r\n                />\r\n              </FollowItemWrapper>\r\n            );\r\n          }}\r\n        </FollowsQuery>\r\n      </BooksWrapper>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Book;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Icon } from \"semantic-ui-react\";\r\nimport _get from \"lodash/get\";\r\n\r\nconst AvatarBox = styled.div`\r\n  border-radius: ${props => props.width / 2}px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: ${props => props.width}px;\r\n  height: ${props => props.width}px;\r\n  border: 1px solid grey;\r\n  background-color: #cecece;\r\n  .avatar_default_icon {\r\n    margin: 0 !important;\r\n  }\r\n  cursor: ${props => props.cursor};\r\n`;\r\n\r\nconst AvatarImg = styled.img`\r\n  border-radius: ${props => props.width / 2}px;\r\n  width: ${props => props.width}px;\r\n  height: ${props => props.width}px;\r\n`;\r\n\r\nconst Avatar = ({ url, width = 26, size = \"small\", cursor, avatar }) => {\r\n  const avatarUrl = url || _get(avatar, \"url\");\r\n  return (\r\n    <AvatarBox width={width} cursor={cursor}>\r\n      {avatarUrl ? (\r\n        <AvatarImg src={avatarUrl} width={width} />\r\n      ) : (\r\n        <Icon\r\n          className={\"avatar_default_icon\"}\r\n          name={\"user outline\"}\r\n          size={size}\r\n        />\r\n      )}\r\n    </AvatarBox>\r\n  );\r\n};\r\n\r\nexport default Avatar;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _get from \"lodash/get\";\r\nimport { Icon } from \"semantic-ui-react\";\r\nimport { BLOG } from \"../CONSULT\";\r\nimport Avatar from \"../Avatar\";\r\n\r\nconst Container = styled.div`\r\n  position: relative;\r\n  display: flex;\r\n  cursor: pointer;\r\n  &:hover {\r\n  }\r\n  width: 100%;\r\n  margin-bottom: 18px;\r\n  padding-bottom: 10px;\r\n  border-bottom: 1px solid ${props => (props.isLastOne ? \"none\" : \"#cecece\")};\r\n`;\r\n\r\nconst ImageBox = styled.div`\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst CoverImage = styled.img``;\r\n\r\nconst Cover = ({ url }) => {\r\n  return (\r\n    <ImageBox>\r\n      <CoverImage src={url} width={240} height={160} />\r\n    </ImageBox>\r\n  );\r\n};\r\n\r\nconst FooterBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 6px;\r\n`;\r\n\r\nconst FooterItem = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-right: 20px;\r\n`;\r\n\r\nconst Text = styled.div`\r\n  margin-left: 16px;\r\n`;\r\n\r\nconst Footer = ({ item }) => {\r\n  return (\r\n    <FooterBox>\r\n      <FooterItem>\r\n        <Avatar url={_get(item, \"creator.avatar.url\", \"\")} />\r\n        <Text>{_get(item, \"creator.username\", \"-username-\")}</Text>\r\n      </FooterItem>\r\n      <FooterItem>\r\n        <Icon name={\"calendar alternate outline\"} />\r\n        <Text>{_get(item, \"dateCreated\", \"-date-\")}</Text>\r\n      </FooterItem>\r\n      <FooterItem>\r\n        <Icon name={\"heart outline\"} />\r\n        <Text>{_get(item, \"upCount\", \"-like-\")}</Text>\r\n      </FooterItem>\r\n      <FooterItem>\r\n        <Icon name={\"eye\"} />\r\n        <Text>{_get(item, \"readCount\", \"-read-\")}</Text>\r\n      </FooterItem>\r\n    </FooterBox>\r\n  );\r\n};\r\n\r\nconst ContentBox = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  padding-left: 6px;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  font-size: 18px;\r\n  color: #333333;\r\n`;\r\n\r\nconst Description = styled.div`\r\n  flex: 1;\r\n`;\r\n\r\nconst BlogItem = ({ item, onGoTo, isLastOne, width }) => {\r\n  const { id, cover, title, description } = item;\r\n  return (\r\n    <Container\r\n      isLastOne={isLastOne}\r\n      style={{ width }}\r\n      onClick={() => onGoTo && onGoTo(`${BLOG}${id}`)}\r\n    >\r\n      <Cover url={_get(cover, \"url\")} />\r\n      <ContentBox>\r\n        <Title>{title}</Title>\r\n        <Description>{description}</Description>\r\n        <Footer item={item} />\r\n      </ContentBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BlogItem;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Header from \"../Header\";\r\nimport FollowsQuery from \"../FollowsQuery\";\r\nimport { OBJ_TYPES } from \"../../../../common/CONSULT\";\r\nimport FollowItemWrapper from \"../FollowItemWrapper\";\r\nimport { followDataToJson } from \"../../../../utils/jsonUtils\";\r\nimport BlogItem from \"../../../../common/item/BlogItem\";\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst BlogsWrapper = styled.div`\r\n  width: 100%;\r\n  padding: 0 22px;\r\n`;\r\n\r\nconst Blog = ({ currentUser, onGoTo }) => {\r\n  return (\r\n    <Container>\r\n      <Header title={\"博客\"} />\r\n      <BlogsWrapper>\r\n        <FollowsQuery\r\n          userId={currentUser.id}\r\n          emptyText={\"您还没收藏过任何博客呢！\"}\r\n          type={OBJ_TYPES.BLOG}\r\n          columns={1}\r\n        >\r\n          {({ item, refetchFollows, isLastRow }) => {\r\n            const blog = followDataToJson(item.followedObj);\r\n            return (\r\n              <FollowItemWrapper\r\n                objId={blog.id}\r\n                popupContent={\"取关博客\"}\r\n                onSwitchFollowCompleted={refetchFollows}\r\n                successMsg={\"取关博客成功！\"}\r\n                errorMsg={\"取关博客失败！\"}\r\n              >\r\n                <BlogItem\r\n                  width={800}\r\n                  item={blog}\r\n                  onGoTo={onGoTo}\r\n                  isLastOne={isLastRow}\r\n                />\r\n              </FollowItemWrapper>\r\n            );\r\n          }}\r\n        </FollowsQuery>\r\n      </BlogsWrapper>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Blog;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { BOOK, CHAPTER, OBJ_TYPES } from \"../../../../../common/CONSULT\";\r\nimport { Icon } from \"semantic-ui-react\";\r\nimport { MAIN_RED } from \"../../../../../common/Styles\";\r\nimport { useSwitchFollow } from \"../../../../../common/hooks\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  min-width: 660px;\r\n  margin-bottom: 10px;\r\n  cursor: pointer;\r\n  border-bottom: 1px solid #cecece;\r\n  padding: 10px 0px;\r\n  &:hover {\r\n    border-bottom: 1px solid pink;\r\n    .chapter_name {\r\n      color: ${MAIN_RED};\r\n    }\r\n  }\r\n`;\r\n\r\nconst LeftBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\nconst RightBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst ChapterName = styled.div`\r\n  font-size: 20px;\r\n  font-weight: bolder;\r\n  margin-right: 20px;\r\n`;\r\n\r\nconst BookName = styled.div`\r\n  cursor: pointer;\r\n  color: gray;\r\n  &:hover {\r\n    color: lightskyblue;\r\n  }\r\n`;\r\n\r\nconst UpdatedDate = styled.div`\r\n  font-size: 12px;\r\n  color: #cecece;\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst RemoveButton = styled(Icon)`\r\n  color: gray;\r\n  &:hover {\r\n    color: lightcoral;\r\n  }\r\n`;\r\n\r\nconst BookmarkItem = ({ chapter, onGoTo, refetchFollows, noActions }) => {\r\n  const { onSwitchFollow } = useSwitchFollow({\r\n    currentFollowed: true,\r\n    objId: chapter.id,\r\n    objType: OBJ_TYPES.CHAPTER,\r\n    onSwitchCompleted: () => refetchFollows && refetchFollows(),\r\n    successMsg: { unFollowed: \"删除书签成功！\" },\r\n    errorMsg: { unFollowed: \"删除书签失败！\" }\r\n  });\r\n  const {\r\n    id,\r\n    title,\r\n    lastUpdated,\r\n    book: { id: bookId, name }\r\n  } = chapter;\r\n  return (\r\n    <Container onClick={() => (onGoTo ? onGoTo(`${CHAPTER}${id}`) : null)}>\r\n      <LeftBox>\r\n        <ChapterName className={\"chapter_name\"}>{title}</ChapterName>\r\n        <BookName\r\n          onClick={e => {\r\n            onGoTo(`${BOOK}${bookId}`);\r\n            e.stopPropagation();\r\n          }}\r\n        >\r\n          [{name}]\r\n        </BookName>\r\n      </LeftBox>\r\n      <RightBox>\r\n        <UpdatedDate>{lastUpdated}</UpdatedDate>\r\n        {!noActions && (\r\n          <RemoveButton\r\n            onClick={e => {\r\n              onSwitchFollow();\r\n              e.stopPropagation();\r\n            }}\r\n            name={\"trash alternate outline\"}\r\n          />\r\n        )}\r\n      </RightBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BookmarkItem;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Header from \"../Header\";\r\nimport FollowsQuery from \"../FollowsQuery\";\r\nimport { OBJ_TYPES } from \"../../../../common/CONSULT\";\r\nimport { followDataToJson } from \"../../../../utils/jsonUtils\";\r\nimport BookmarkItem from \"./segaments/BookmarkItem\";\r\nimport PersistStorage from \"../../../../utils/PersistStorage\";\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst ChaptersWrapper = styled.div`\r\n  padding: 0 22px;\r\n`;\r\n\r\nconst Chapter = ({ currentUser, onGoTo }) => {\r\n  const markedChanged = PersistStorage.getItem(\"markChanged\");\r\n  return (\r\n    <Container>\r\n      <Header title={\"书签\"} />\r\n      <ChaptersWrapper>\r\n        <FollowsQuery\r\n          refetchId={\"personal_chapter_refetch\"}\r\n          userId={currentUser.id}\r\n          emptyText={\"没有书签哦！\"}\r\n          type={OBJ_TYPES.CHAPTER}\r\n          columns={1}\r\n          refetchNow={markedChanged}\r\n          beforeRefetch={() => PersistStorage.setItem(\"markChanged\", false)}\r\n        >\r\n          {({ item, refetchFollows }) => {\r\n            const chapter = followDataToJson(item.followedObj);\r\n            return (\r\n              <BookmarkItem\r\n                chapter={chapter}\r\n                onGoTo={onGoTo}\r\n                refetchFollows={refetchFollows}\r\n              />\r\n            );\r\n          }}\r\n        </FollowsQuery>\r\n      </ChaptersWrapper>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Chapter;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { _getByRank } from \"../../../../../utils/utils\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-left: 8px;\r\n`;\r\n\r\nconst CommentName = styled.div`\r\n  color: gray;\r\n  margin-left: 6px;\r\n  font-size: 16px;\r\n  cursor: pointer;\r\n  &:hover {\r\n    color: lightskyblue;\r\n  }\r\n`;\r\n\r\nconst ReplyText = styled.div``;\r\n\r\nconst RepliedComment = ({ repliedComment }) => {\r\n  if (!repliedComment) {\r\n    return null;\r\n  }\r\n  const { creator } = repliedComment;\r\n  return (\r\n    <Container>\r\n      <ReplyText>回复</ReplyText>\r\n      <CommentName>\r\n        @{_getByRank(creator, [\"nickname\", \"username\"])}\r\n      </CommentName>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default RepliedComment;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div`\r\n  visibility: hidden;\r\n  color: #cecece;\r\n`;\r\n\r\nconst CommentObj = ({ commentObj }) => {\r\n  const { id, name } = commentObj;\r\n  return <Container className={\"comment_obj\"}>[{name}]</Container>;\r\n};\r\n\r\nexport default CommentObj;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _get from \"lodash/get\";\r\n\r\nimport CommentActions from \"../../../../../common/comment/segaments/CommentActions\";\r\nimport Avatar from \"../../../../../common/Avatar\";\r\nimport { _getByRank } from \"../../../../../utils/utils\";\r\nimport RepliedComment from \"./RepliedComment\";\r\nimport LinkToObject from \"../../../../../common/LinkToObject\";\r\nimport CommentObj from \"./CommentObj\";\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  margin-bottom: 24px;\r\n  padding-bottom: 10px;\r\n  &:hover {\r\n    .comment_obj {\r\n      visibility: visible;\r\n    }\r\n  }\r\n  border-bottom: 1px solid\r\n    ${props => (props.isLastOne ? \"transparent\" : \"#e5e9ef\")};\r\n`;\r\n\r\nconst AvatarBox = styled.div`\r\n  width: 80px;\r\n`;\r\n\r\nconst ContentBox = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n`;\r\n\r\nconst UserInfoBox = styled.div`\r\n  margin-bottom: 10px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst Name = styled.div`\r\n  color: #6d757a;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  text-align: left;\r\n  cursor: pointer;\r\n  &:hover {\r\n    color: lightskyblue;\r\n  }\r\n`;\r\n\r\nconst InfoLeftBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst UserInfo = ({ creator, repliedComment, commentObj }) => {\r\n  return (\r\n    <UserInfoBox>\r\n      <InfoLeftBox>\r\n        <Name>{_getByRank(creator, [\"nickname\", \"username\"])}</Name>\r\n        <RepliedComment repliedComment={repliedComment} />\r\n      </InfoLeftBox>\r\n      <CommentObj  commentObj={commentObj} />\r\n    </UserInfoBox>\r\n  );\r\n};\r\n\r\nconst ContentInfo = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  margin-bottom: 10px;\r\n`;\r\n\r\nconst Content = styled.div`\r\n  text-align: left;\r\n`;\r\n\r\nconst CommentItem = ({ item, isLastOne }) => {\r\n  const {\r\n    creator,\r\n    content,\r\n    dateCreated,\r\n    id,\r\n    objId,\r\n    type,\r\n    currentUpped,\r\n    upCount,\r\n    currentReport,\r\n    commentObj,\r\n    repliedComment\r\n  } = item;\r\n  return (\r\n    <LinkToObject objId={objId} objType={type}>\r\n      <Container isLastOne={isLastOne}>\r\n        <AvatarBox>\r\n          <Avatar\r\n            size={\"large\"}\r\n            width={50}\r\n            avatar={_get(creator, \"avatar.url\")}\r\n          />\r\n        </AvatarBox>\r\n        <ContentBox>\r\n          <ContentInfo>\r\n            <UserInfo\r\n              creator={creator}\r\n              repliedComment={repliedComment}\r\n              commentObj={commentObj}\r\n            />\r\n            <Content>{content}</Content>\r\n            <CommentActions\r\n              dateCreated={dateCreated}\r\n              currentUpped={currentUpped}\r\n              upCount={upCount}\r\n              commentId={id}\r\n              currentReport={currentReport}\r\n            />\r\n          </ContentInfo>\r\n        </ContentBox>\r\n      </Container>\r\n    </LinkToObject>\r\n  );\r\n};\r\n\r\nexport default CommentItem;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport PaginationQueryList from \"../../../../../common/PaginationQueryList\";\r\nimport { GET_COMMENTS } from \"../../../../../common/queryGql\";\r\nimport _map from \"lodash/map\";\r\nimport CommentItem from \"./CommentItem\";\r\nimport LoadingWrapper from \"../../../../../common/LoadingWapper\";\r\nimport Empty from \"../../../../../common/Empty\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  padding: 12px 14px;\r\n  min-height: 200px;\r\n`;\r\n\r\nconst RelatedComments = ({ currentUser }) => {\r\n  return (\r\n    <PaginationQueryList\r\n      gql={GET_COMMENTS}\r\n      searchFields={{\r\n        isUserRelated: true\r\n      }}\r\n      paginationSize={\"mini\"}\r\n      paginationSecondary={true}\r\n      dataKey={\"comments\"}\r\n      hidePaginationInSinglePage={true}\r\n      limit={20}\r\n    >\r\n      {({ loading, count, items, refetch }) => {\r\n        if (count <= 0) {\r\n          return <Empty text={\"找不到相关评论！\"} />;\r\n        }\r\n        return (\r\n          <Container>\r\n            <LoadingWrapper loading={loading}>\r\n              {_map(items, (item, index) => {\r\n                return (\r\n                  <CommentItem\r\n                    key={\"related_comment_\" + item.id}\r\n                    item={item}\r\n                    isLastOne={index + 1 === items.length}\r\n                  />\r\n                );\r\n              })}\r\n            </LoadingWrapper>\r\n          </Container>\r\n        );\r\n      }}\r\n    </PaginationQueryList>\r\n  );\r\n};\r\n\r\nexport default RelatedComments;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport PaginationQueryList from \"../../../../../common/PaginationQueryList\";\r\nimport { GET_COMMENTS } from \"../../../../../common/queryGql\";\r\nimport _map from \"lodash/map\";\r\nimport CommentItem from \"./CommentItem\";\r\nimport LoadingWrapper from \"../../../../../common/LoadingWapper\";\r\nimport Empty from \"../../../../../common/Empty\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  padding: 12px 14px;\r\n  min-height: 200px;\r\n`;\r\n\r\nconst MyComments = ({ currentUser }) => {\r\n  return (\r\n    <PaginationQueryList\r\n      gql={GET_COMMENTS}\r\n      searchFields={{\r\n        isUserQuery: true,\r\n        creatorId: currentUser.id\r\n      }}\r\n      hidePaginationInSinglePage={true}\r\n      paginationSize={\"mini\"}\r\n      paginationSecondary={true}\r\n      dataKey={\"comments\"}\r\n      limit={20}\r\n    >\r\n      {({ loading, count, items, refetch }) => {\r\n        if (count <= 0) {\r\n          return <Empty text={\"您还未评论过呢！\"} />;\r\n        }\r\n        return (\r\n          <Container>\r\n            <LoadingWrapper loading={loading}>\r\n              {_map(items, (item, index) => {\r\n                return (\r\n                  <CommentItem\r\n                    key={\"my_comment_\" + item.id}\r\n                    item={item}\r\n                    isLastOne={index + 1 === items.length}\r\n                  />\r\n                );\r\n              })}\r\n            </LoadingWrapper>\r\n          </Container>\r\n        );\r\n      }}\r\n    </PaginationQueryList>\r\n  );\r\n};\r\n\r\nexport default MyComments;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Header from \"../Header\";\r\nimport PageTabs from \"../PageTabs\";\r\nimport RelatedComments from \"./segaments/RelatedComments\";\r\nimport MyComments from \"./segaments/MyComments\";\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst COMMENT_TABS = [\r\n  { name: \"Related\", label: \"与我相关\" },\r\n  { name: \"My\", label: \"我的评论\" }\r\n];\r\n\r\nconst PageContent = ({ currentTab, currentUser }) => {\r\n  switch (currentTab.name) {\r\n    case \"Related\":\r\n      return <RelatedComments currentUser={currentUser} />;\r\n    case \"My\":\r\n      return <MyComments currentUser={currentUser} />;\r\n  }\r\n};\r\n\r\nconst Comment = ({ currentUser }) => {\r\n  return (\r\n    <Container>\r\n      <Header title={\"评论\"} />\r\n      <PageTabs tabs={COMMENT_TABS}>\r\n        {({ currentTab }) => {\r\n          return (\r\n            <PageContent currentUser={currentUser} currentTab={currentTab} />\r\n          );\r\n        }}\r\n      </PageTabs>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Comment;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport BookItem from \"../../../common/item/BookItem\";\r\nimport { _getByRank } from \"../../../utils/utils\";\r\n\r\nconst Container = styled.div`\r\n  border-bottom: 1px solid\r\n    ${props => (props.isLastOne ? \"transparent\" : \"#cecece\")};\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst ContentBox = styled.div`\r\n  height: 160px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-bottom: 30px;\r\n  margin-left: 6px;\r\n`;\r\n\r\nconst Author = styled.div`\r\n  font-size: 14px;\r\n  color: gray;\r\n  text-align: left;\r\n  margin-bottom: 10px;\r\n`;\r\n\r\nconst Intro = styled.div`\r\n  flex: 1;\r\n  text-align: left;\r\n`;\r\n\r\nconst DateCreated = styled.div`\r\n  text-align: left;\r\n  color: gray;\r\n  font-size: 12px;\r\n`;\r\nconst BookListItem = ({ book, isLastOne }) => {\r\n  const { creator, intro, dateCreated } = book;\r\n  return (\r\n    <Container isLastOne={isLastOne}>\r\n      <BookItem size={0.7} book={book} />\r\n      <ContentBox>\r\n        <Author>\r\n          作者：&nbsp;&nbsp;&nbsp;&nbsp;\r\n          {_getByRank(creator, [\"nickname\", \"username\"])}\r\n        </Author>\r\n        <Intro>描述：&nbsp;&nbsp;&nbsp;&nbsp;{intro}</Intro>\r\n        <DateCreated>\r\n          创建时间：&nbsp;&nbsp;&nbsp;&nbsp;{dateCreated}\r\n        </DateCreated>\r\n      </ContentBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BookListItem;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { OBJ_TYPES } from \"../../../common/CONSULT\";\r\nimport ProgramItem from \"./program/segaments/ProgramItem\";\r\nimport BlogItem from \"../../../common/item/BlogItem\";\r\nimport LinkToObject from \"../../../common/LinkToObject\";\r\nimport CommentItem from \"./comment/segaments/CommentItem\";\r\nimport BookmarkItem from \"./chapter/segaments/BookmarkItem\";\r\nimport BookListItem from \"./BookListItem\";\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n  padding: 20px 40px;\r\n`;\r\n\r\nconst getObjByObjType = ({ objType, obj, follower, isLastOne }) => {\r\n  switch (objType) {\r\n    case OBJ_TYPES.PROGRAM:\r\n      return <ProgramItem program={obj} noActions={true} />;\r\n    case OBJ_TYPES.BLOG:\r\n      return <BlogItem item={obj} isLastOne={isLastOne} />;\r\n    case OBJ_TYPES.COMMENT:\r\n      return <CommentItem item={obj} isLastOne={isLastOne} />;\r\n    case OBJ_TYPES.CHAPTER:\r\n      return <BookmarkItem chapter={obj} noActions={true} />;\r\n    case OBJ_TYPES.BOOK:\r\n      return <BookListItem book={obj} isLastOne={isLastOne} />;\r\n  }\r\n};\r\n\r\nconst ObjItem = ({ objType, obj, dataObj, isLastOne }) => {\r\n  const content = getObjByObjType({ objType, obj, dataObj, isLastOne });\r\n  return (\r\n    <Container>\r\n      <LinkToObject objId={obj.id} objType={objType}>\r\n        {content}\r\n      </LinkToObject>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ObjItem;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport PaginationQueryList from \"../../../../../common/PaginationQueryList\";\r\n\r\nimport _map from \"lodash/map\";\r\nimport FollowsQuery from \"../../FollowsQuery\";\r\nimport { OBJ_TYPES } from \"../../../../../common/CONSULT\";\r\nimport ObjItem from \"../../ObjItem\";\r\nimport { followDataToJson } from \"../../../../../utils/jsonUtils\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  padding: 12px 14px;\r\n  min-height: 200px;\r\n`;\r\n\r\nconst AllFollowers = ({ currentUser }) => {\r\n  return (\r\n    <FollowsQuery\r\n      columns={1}\r\n      queryLimit={20}\r\n      userId={currentUser.id}\r\n      emptyText={\"您的关注为空哦！\"}\r\n      types={[OBJ_TYPES.PROGRAM, OBJ_TYPES.BLOG]}\r\n    >\r\n      {({ item }) => {\r\n        const obj = followDataToJson(item.followedObj);\r\n        console.log(\"obj______________________\", obj);\r\n        return <ObjItem obj={obj} objType={item.objType} />;\r\n      }}\r\n    </FollowsQuery>\r\n  );\r\n};\r\n\r\nexport default AllFollowers;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport FollowsQuery from \"../../FollowsQuery\";\r\nimport { OBJ_TYPES } from \"../../../../../common/CONSULT\";\r\nimport { followDataToJson } from \"../../../../../utils/jsonUtils\";\r\nimport ObjItem from \"../../ObjItem\";\r\n\r\nconst ProgramFollowers = ({ currentUser }) => {\r\n  return (\r\n    <FollowsQuery\r\n      columns={1}\r\n      queryLimit={20}\r\n      userId={currentUser.id}\r\n      emptyText={\"没找到相关工具呢！\"}\r\n      types={[OBJ_TYPES.PROGRAM]}\r\n    >\r\n      {({ item }) => {\r\n        const obj = followDataToJson(item.followedObj);\r\n        return <ObjItem obj={obj} objType={item.objType} />;\r\n      }}\r\n    </FollowsQuery>\r\n  );\r\n};\r\n\r\nexport default ProgramFollowers;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport FollowsQuery from \"../../FollowsQuery\";\r\nimport { OBJ_TYPES } from \"../../../../../common/CONSULT\";\r\nimport { followDataToJson } from \"../../../../../utils/jsonUtils\";\r\nimport ObjItem from \"../../ObjItem\";\r\n\r\nconst BlogFollowers = ({ currentUser }) => {\r\n  return (\r\n    <FollowsQuery\r\n      columns={1}\r\n      queryLimit={20}\r\n      userId={currentUser.id}\r\n      types={[OBJ_TYPES.BLOG]}\r\n      emptyText={\"没找到相关博客呢！\"}\r\n    >\r\n      {({ item }) => {\r\n        const obj = followDataToJson(item.followedObj);\r\n        return <ObjItem obj={obj} objType={item.objType} />;\r\n      }}\r\n    </FollowsQuery>\r\n  );\r\n};\r\n\r\nexport default BlogFollowers;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport PageTabs from \"../PageTabs\";\r\nimport Header from \"../Header\";\r\nimport { OBJ_TYPES } from \"../../../../common/CONSULT\";\r\nimport AllFollowers from \"./segaments/AllFollowers\";\r\nimport ProgramFollowers from \"./segaments/ProgramFollowers\";\r\nimport BlogFollowers from \"./segaments/BlogFollowers\";\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst FOLLOWER_TABS = [\r\n  { name: \"All\", label: \"全部\" },\r\n  { name: OBJ_TYPES.PROGRAM, label: \"工具\" },\r\n  { name: OBJ_TYPES.BLOG, label: \"博客\" }\r\n];\r\n\r\nconst PageContent = ({ currentTab, currentUser }) => {\r\n  switch (currentTab.name) {\r\n    case \"All\":\r\n      return <AllFollowers currentUser={currentUser} />;\r\n    case OBJ_TYPES.PROGRAM:\r\n      return <ProgramFollowers currentUser={currentUser} />;\r\n    case OBJ_TYPES.BLOG:\r\n      return <BlogFollowers currentUser={currentUser} />;\r\n  }\r\n};\r\n\r\nconst Follower = ({ currentUser }) => {\r\n  return (\r\n    <Container>\r\n      <Header title={\"收藏\"} />\r\n      <PageTabs tabs={FOLLOWER_TABS}>\r\n        {({ currentTab }) => {\r\n          return (\r\n            <PageContent currentTab={currentTab} currentUser={currentUser} />\r\n          );\r\n        }}\r\n      </PageTabs>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Follower;\r\n","import React from \"react\";\r\nimport PaginationQueryList from \"../../../../common/PaginationQueryList\";\r\nimport FlatList from \"../../../../common/FlatList\";\r\nimport RefetchHandle from \"../../../../common/RefetchHandle\";\r\nimport { GET_UPS } from \"../../../../common/queryGql\";\r\nimport Empty from \"../../../../common/Empty\";\r\n\r\nconst UpsQuery = ({\r\n  userId,\r\n  type,\r\n  types,\r\n  children,\r\n  columns = 4,\r\n  queryLimit = 20,\r\n  refetchNow,\r\n  beforeRefetch,\r\n  emptyText\r\n}) => {\r\n  return (\r\n    <PaginationQueryList\r\n      hidePaginationInSinglePage={true}\r\n      gql={GET_UPS}\r\n      searchFields={{\r\n        types: types ? types : [type],\r\n        userId: userId,\r\n        sort: \"lastUpdated\",\r\n        order: \"desc\",\r\n        limit: queryLimit\r\n      }}\r\n      paginationSize={\"mini\"}\r\n      dataKey={\"ups\"}\r\n      limit={queryLimit}\r\n    >\r\n      {({ loading, count, items, refetch }) => {\r\n        if (count <= 0) {\r\n          return <Empty text={emptyText} />;\r\n        }\r\n        return (\r\n          <div>\r\n            <FlatList items={items} columns={columns}>\r\n              {({ item, isLastRow }) => {\r\n                return children({ item, refetchFollows: refetch, isLastRow });\r\n              }}\r\n            </FlatList>\r\n            <RefetchHandle\r\n              refetch={() => {\r\n                beforeRefetch && beforeRefetch();\r\n                refetch();\r\n              }}\r\n              refetchOnce={refetchNow}\r\n            />\r\n          </div>\r\n        );\r\n      }}\r\n    </PaginationQueryList>\r\n  );\r\n};\r\n\r\nexport default UpsQuery;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport UpsQuery from \"./UpsQuery\";\r\nimport { followDataToJson } from \"../../../../utils/jsonUtils\";\r\nimport ObjItem from \"../ObjItem\";\r\n\r\nconst Ups = ({ currentUser, types, type, emptyText }) => {\r\n  return (\r\n    <UpsQuery\r\n      userId={currentUser.id}\r\n      emptyText={emptyText}\r\n      columns={1}\r\n      types={types}\r\n      type={type}\r\n    >\r\n      {({ item, isLastRow }) => {\r\n        const obj = followDataToJson(item.uppedObj);\r\n        return (\r\n          <ObjItem obj={obj} objType={item.objType} isLastOne={isLastRow} />\r\n        );\r\n      }}\r\n    </UpsQuery>\r\n  );\r\n};\r\n\r\nexport default Ups;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { OBJ_TYPES } from \"../../../../../common/CONSULT\";\r\nimport Ups from \"../Ups\";\r\n\r\nconst AllUps = ({ currentUser }) => {\r\n  return (\r\n    <Ups\r\n      types={[\r\n        OBJ_TYPES.PROGRAM,\r\n        OBJ_TYPES.BLOG,\r\n        OBJ_TYPES.BOOK,\r\n        OBJ_TYPES.CHAPTER,\r\n        OBJ_TYPES.COMMENT\r\n      ]}\r\n      emptyText={\"您还没有喜欢的东西呢！\"}\r\n      currentUser={currentUser}\r\n    />\r\n  );\r\n};\r\n\r\nexport default AllUps;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { OBJ_TYPES } from \"../../../../../common/CONSULT\";\r\nimport Ups from \"../Ups\";\r\n\r\nconst ProgramUps = ({ currentUser }) => {\r\n  return (\r\n    <Ups\r\n      type={OBJ_TYPES.PROGRAM}\r\n      currentUser={currentUser}\r\n      emptyText={\"没找到相关的工具！\"}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ProgramUps;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { OBJ_TYPES } from \"../../../../../common/CONSULT\";\r\nimport Ups from \"../Ups\";\r\n\r\nconst BlogUps = ({ currentUser }) => {\r\n  return (\r\n    <Ups\r\n      type={OBJ_TYPES.BLOG}\r\n      currentUser={currentUser}\r\n      emptyText={\"没找到相关的博客！\"}\r\n    />\r\n  );\r\n};\r\n\r\nexport default BlogUps;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { OBJ_TYPES } from \"../../../../../common/CONSULT\";\r\nimport Ups from \"../Ups\";\r\n\r\nconst BookUps = ({ currentUser }) => {\r\n  return (\r\n    <Ups\r\n      type={OBJ_TYPES.BOOK}\r\n      currentUser={currentUser}\r\n      emptyText={\"没找到相关的书籍！\"}\r\n    />\r\n  );\r\n};\r\n\r\nexport default BookUps;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { OBJ_TYPES } from \"../../../../../common/CONSULT\";\r\nimport Ups from \"../Ups\";\r\n\r\nconst ChapterUps = ({ currentUser }) => {\r\n  return (\r\n    <Ups\r\n      type={OBJ_TYPES.CHAPTER}\r\n      currentUser={currentUser}\r\n      emptyText={\"没找到相关的章节！\"}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ChapterUps;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { OBJ_TYPES } from \"../../../../../common/CONSULT\";\r\nimport Ups from \"../Ups\";\r\n\r\nconst CommentUps = ({ currentUser }) => {\r\n  return (\r\n    <Ups\r\n      type={OBJ_TYPES.COMMENT}\r\n      currentUser={currentUser}\r\n      emptyText={\"没找到相关的评论！\"}\r\n    />\r\n  );\r\n};\r\n\r\nexport default CommentUps;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport PageTabs from \"../PageTabs\";\r\nimport { OBJ_TYPES } from \"../../../../common/CONSULT\";\r\nimport Header from \"../Header\";\r\nimport AllUps from \"./segaments/AllUps\";\r\nimport ProgramUps from \"./segaments/ProgramUps\";\r\nimport BlogUps from \"./segaments/BlogUps\";\r\nimport BookUps from \"./segaments/BookUps\";\r\nimport ChapterUps from \"./segaments/ChapterUps\";\r\nimport CommentUps from \"./segaments/CommentUps\";\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst UP_TABS = [\r\n  { name: \"All\", label: \"全部\" },\r\n  { name: OBJ_TYPES.PROGRAM, label: \"工具\" },\r\n  { name: OBJ_TYPES.BLOG, label: \"博客\" },\r\n  { name: OBJ_TYPES.BOOK, label: \"书籍\" },\r\n  { name: OBJ_TYPES.CHAPTER, label: \"章节\" },\r\n  { name: OBJ_TYPES.COMMENT, label: \"评论\" }\r\n];\r\n\r\nconst PageContent = ({ currentTab, currentUser }) => {\r\n  switch (currentTab.name) {\r\n    case \"All\":\r\n      return <AllUps currentUser={currentUser} />;\r\n    case OBJ_TYPES.PROGRAM:\r\n      return <ProgramUps currentUser={currentUser} />;\r\n    case OBJ_TYPES.BLOG:\r\n      return <BlogUps currentUser={currentUser} />;\r\n    case OBJ_TYPES.BOOK:\r\n      return <BookUps currentUser={currentUser} />;\r\n    case OBJ_TYPES.CHAPTER:\r\n      return <ChapterUps currentUser={currentUser} />;\r\n    case OBJ_TYPES.COMMENT:\r\n      return <CommentUps currentUser={currentUser} />;\r\n    case OBJ_TYPES.PROBLEM:\r\n      return null;\r\n  }\r\n};\r\n\r\nconst Up = ({ currentUser }) => {\r\n  return (\r\n    <Container>\r\n      <Header title={\"我的喜欢\"} />\r\n      <PageTabs tabs={UP_TABS}>\r\n        {({ currentTab }) => {\r\n          return (\r\n            <PageContent currentTab={currentTab} currentUser={currentUser} />\r\n          );\r\n        }}\r\n      </PageTabs>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Up;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport FollowsQuery from \"../../FollowsQuery\";\r\nimport { OBJ_TYPES } from \"../../../../../common/CONSULT\";\r\nimport ProblemItem from \"../../../../../common/item/ProblemItem\";\r\nimport { followDataToJson } from \"../../../../../utils/jsonUtils\";\r\n\r\nconst FollowProblems = ({ currentUser }) => {\r\n  return (\r\n    <FollowsQuery\r\n      emptyText={\"没找到您收藏的建议哦！\"}\r\n      type={OBJ_TYPES.PROBLEM}\r\n      userId={currentUser.id}\r\n      columns={1}\r\n    >\r\n      {({ item }) => {\r\n        const problem = followDataToJson(item.followedObj);\r\n        return <ProblemItem problem={problem} />;\r\n      }}\r\n    </FollowsQuery>\r\n  );\r\n};\r\n\r\nexport default FollowProblems;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport PaginationQueryList from \"../../../../../common/PaginationQueryList\";\r\nimport { GET_PROBLEMS } from \"../../../../../common/queryGql\";\r\nimport _map from \"lodash/map\";\r\nimport ProblemItem from \"../../../../../common/item/ProblemItem\";\r\nimport Empty from \"../../../../../common/Empty\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  padding: 12px 14px;\r\n  min-height: 200px;\r\n`;\r\n\r\nconst MyProblems = ({ currentUser }) => {\r\n  return (\r\n    <PaginationQueryList\r\n      gql={GET_PROBLEMS}\r\n      searchFields={{\r\n        creatorId: currentUser.id,\r\n        statuses: [\"Awaiting\", \"Published\", \"Accepted\", \"Rejected\"]\r\n      }}\r\n      paginationSize={\"mini\"}\r\n      paginationSecondary={true}\r\n      dataKey={\"problems\"}\r\n      limit={10}\r\n    >\r\n      {({ loading, count, items, refetch }) => {\r\n        if (count <= 0) {\r\n          return <Empty text={\"您还未提出自己宝贵的建议呢！\"} />;\r\n        }\r\n        return (\r\n          <Container>\r\n            {_map(items, item => {\r\n              return (\r\n                <ProblemItem key={\"my_problem_\" + item.id} problem={item} />\r\n              );\r\n            })}\r\n          </Container>\r\n        );\r\n      }}\r\n    </PaginationQueryList>\r\n  );\r\n};\r\n\r\nexport default MyProblems;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Button, Icon } from \"semantic-ui-react\";\r\nimport styled from \"styled-components\";\r\nimport { PROBLEM_CREATE } from \"../../../../../common/CONSULT\";\r\nconst CreateButton = styled(Button)``;\r\n\r\nconst CreateProblemButton = ({ onGoTo }) => {\r\n  return (\r\n    <CreateButton\r\n      size={\"mini\"}\r\n      basic\r\n      circular\r\n      color=\"blue\"\r\n      onClick={() => onGoTo(PROBLEM_CREATE)}\r\n    >\r\n      <Icon name={\"plus\"} />\r\n      添加建议\r\n    </CreateButton>\r\n  );\r\n};\r\n\r\nexport default CreateProblemButton;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Header from \"../Header\";\r\nimport { followDataToJson } from \"../../../../utils/jsonUtils\";\r\nimport FollowProblems from \"./segaments/FollowProblems\";\r\nimport MyProblems from \"./segaments/MyProblems\";\r\nimport PageTabs from \"../PageTabs\";\r\nimport CreateProblemButton from \"./segaments/CreateProblemButton\";\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst PROBLEM_TABS = [\r\n  { name: \"Follow\", label: \"收藏建议\" },\r\n  { name: \"My\", label: \"我的建议\" }\r\n];\r\n\r\nconst PageContent = ({ currentTab, currentUser }) => {\r\n  switch (currentTab.name) {\r\n    case \"Follow\":\r\n      return <FollowProblems currentUser={currentUser} />;\r\n    case \"My\":\r\n      return <MyProblems currentUser={currentUser} />;\r\n  }\r\n};\r\n\r\nconst Problem = ({ currentUser, onGoTo }) => {\r\n  return (\r\n    <Container>\r\n      <Header title={\"建议\"} />\r\n      <PageTabs\r\n        tabs={PROBLEM_TABS}\r\n        renderActions={() => <CreateProblemButton onGoTo={onGoTo} />}\r\n      >\r\n        {({ currentTab }) => {\r\n          return (\r\n            <PageContent currentTab={currentTab} currentUser={currentUser} />\r\n          );\r\n        }}\r\n      </PageTabs>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Problem;\r\n","import React, { useState, useRef, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Tag, Input, Tooltip, Form } from \"antd\";\r\nimport { PlusOutlined } from \"@ant-design/icons\";\r\nimport _filter from \"lodash/filter\";\r\nimport _trim from \"lodash/trim\";\r\n\r\nconst useTagsInput = ({\r\n  value,\r\n  onUpdateField,\r\n  onChange,\r\n  fieldKey,\r\n  maxTags\r\n}) => {\r\n  const [tags, setTags] = useState(value || []);\r\n  const [inputVisible, setInputVisible] = useState(false);\r\n  const [inputValue, setInputValue] = useState(\"\");\r\n  const [editInputIndex, setEditInputIndex] = useState(-1);\r\n  const [editInputValue, setEditInputValue] = useState(\"\");\r\n\r\n  const saveEditInputRef = useRef(null);\r\n  const saveInputRef = useRef(null);\r\n\r\n  const removeTag = removedTag => {\r\n    const removedTags = _filter(tags, tag => tag !== removedTag);\r\n    setTags(removedTags);\r\n    onUpdateField && onUpdateField(fieldKey, removedTags);\r\n    onChange && onChange(removedTags);\r\n  };\r\n  const showInput = () => {\r\n    setInputVisible(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    saveInputRef.current && saveInputRef.current.focus();\r\n  }, [inputVisible]);\r\n\r\n  useEffect(() => {\r\n    saveEditInputRef &&\r\n      saveEditInputRef.current &&\r\n      saveEditInputRef.current.focus();\r\n  }, [editInputIndex]);\r\n\r\n  const handleInputChange = e => {\r\n    setInputValue(e.target.value);\r\n  };\r\n\r\n  const handleInputConfirm = () => {\r\n    const trimValue = _trim(inputValue);\r\n    if (trimValue && tags.indexOf(trimValue) === -1) {\r\n      const newTags = [...tags, trimValue];\r\n      setTags(newTags);\r\n      onUpdateField && onUpdateField(fieldKey, newTags);\r\n      onChange && onChange(newTags);\r\n      if (newTags.length >= maxTags) {\r\n        setInputVisible(false);\r\n      }\r\n    }\r\n    setInputValue(\"\");\r\n    setInputVisible(false);\r\n  };\r\n\r\n  const handleEditInputChange = e => {\r\n    setEditInputValue(e.target.value);\r\n  };\r\n\r\n  const handleEditInputConfirm = () => {\r\n    const trimValue = _trim(editInputValue);\r\n    if (trimValue && tags.indexOf(trimValue) === -1) {\r\n      const newTags = [...tags];\r\n      newTags[editInputIndex] = editInputValue;\r\n      setTags(newTags);\r\n      onUpdateField && onUpdateField(fieldKey, newTags);\r\n      onChange && onChange(newTags);\r\n      if (newTags.length > maxTags) {\r\n        setInputVisible(false);\r\n      }\r\n    }\r\n    setEditInputValue(\"\");\r\n    setEditInputIndex(-1);\r\n  };\r\n\r\n  return {\r\n    tags,\r\n    inputVisible,\r\n    inputValue,\r\n    editInputIndex,\r\n    editInputValue,\r\n    setEditInputIndex,\r\n    setInputValue,\r\n    saveEditInputRef,\r\n    saveInputRef,\r\n    setEditInputValue,\r\n    removeTag,\r\n    showInput,\r\n    handleInputChange,\r\n    handleInputConfirm,\r\n    handleEditInputChange,\r\n    handleEditInputConfirm\r\n  };\r\n};\r\n\r\nconst TagsContainer = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  height: 60px;\r\n  flex-wrap: wrap;\r\n  .tag-input {\r\n    min-width: 78px !important;\r\n    max-width: 120px !important;\r\n    margin-right: 8px;\r\n    vertical-align: top;\r\n  }\r\n  .site-tag-plus {\r\n    background: #fff;\r\n    border-style: dashed;\r\n    cursor: pointer;\r\n    padding: 4px 6px;\r\n    font-size: 18px;\r\n  }\r\n  .edit-tag {\r\n    cursor: pointer;\r\n    user-select: none;\r\n    padding: 4px 6px;\r\n    font-size: 18px;\r\n  }\r\n`;\r\n\r\nconst TagsInput = ({\r\n  placeholder,\r\n  formItemProps,\r\n  disabled,\r\n  addTitle = \"新建标签\",\r\n  fieldKey,\r\n  onChange,\r\n  onUpdateField,\r\n  value,\r\n  maxTags = 5\r\n}) => {\r\n  const {\r\n    tags,\r\n    inputVisible,\r\n    inputValue,\r\n    editInputIndex,\r\n    editInputValue,\r\n    removeTag,\r\n    showInput,\r\n    handleInputChange,\r\n    handleInputConfirm,\r\n    handleEditInputChange,\r\n    handleEditInputConfirm,\r\n    setEditInputIndex,\r\n    setEditInputValue,\r\n    saveEditInputRef,\r\n    saveInputRef\r\n  } = useTagsInput({ fieldKey, onUpdateField, onChange, value, maxTags });\r\n  const tagsInput = (\r\n    <TagsContainer>\r\n      {tags.map((tag, index) => {\r\n        if (editInputIndex === index && !disabled) {\r\n          return (\r\n            <Input\r\n              ref={saveEditInputRef}\r\n              key={tag}\r\n              size=\"small\"\r\n              className=\"tag-input\"\r\n              value={editInputValue}\r\n              onChange={handleEditInputChange}\r\n              onBlur={handleEditInputConfirm}\r\n              onPressEnter={handleEditInputConfirm}\r\n            />\r\n          );\r\n        }\r\n\r\n        const isLongTag = tag.length > 20;\r\n\r\n        const tagElem = (\r\n          <Tag\r\n            className=\"edit-tag\"\r\n            key={tag}\r\n            closable={!disabled}\r\n            onClose={() => removeTag(tag)}\r\n          >\r\n            <span\r\n              aria-disabled={disabled}\r\n              onDoubleClick={e => {\r\n                setEditInputIndex(index);\r\n                setEditInputValue(tag);\r\n                e.preventDefault();\r\n              }}\r\n            >\r\n              {isLongTag ? `${tag.slice(0, 20)}...` : tag}\r\n            </span>\r\n          </Tag>\r\n        );\r\n        return isLongTag ? (\r\n          <Tooltip title={tag} key={tag}>\r\n            {tagElem}\r\n          </Tooltip>\r\n        ) : (\r\n          tagElem\r\n        );\r\n      })}\r\n      {inputVisible && !disabled && tags.length < maxTags && (\r\n        <Input\r\n          ref={saveInputRef}\r\n          type=\"text\"\r\n          size=\"small\"\r\n          className=\"tag-input\"\r\n          value={inputValue}\r\n          onChange={handleInputChange}\r\n          onBlur={handleInputConfirm}\r\n          onPressEnter={handleInputConfirm}\r\n        />\r\n      )}\r\n      {!inputVisible && !disabled && (\r\n        <Tag className=\"site-tag-plus\" onClick={showInput}>\r\n          <PlusOutlined /> {addTitle}\r\n        </Tag>\r\n      )}\r\n    </TagsContainer>\r\n  );\r\n  return formItemProps ? (\r\n    <Form.Item {...formItemProps}>{tagsInput}</Form.Item>\r\n  ) : (\r\n    tagsInput\r\n  );\r\n};\r\n\r\nexport default TagsInput;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Header from \"../../Header\";\r\nimport { Button, Input } from \"semantic-ui-react\";\r\nimport BasicForm from \"../../../../../common/BasicForm\";\r\nimport RichTextEditor from \"../../../../../common/RichTextEditor\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { SAVE_PROGRAM } from \"../../../../../common/mutationGql\";\r\nimport _get from \"lodash/get\";\r\nimport {\r\n  MY_PROGRAMS_REFRESH,\r\n  PERSONAL_PROGRAM_EDIT\r\n} from \"../../../../../common/CONSULT\";\r\nimport ImageInput from \"../../../../../common/formFields/ImageInput\";\r\nimport TagsInput from \"../../../../../common/formFields/TagsInput\";\r\nimport { clickEle } from \"../../../../../utils/elementLink\";\r\nimport PersistStorage from \"../../../../../utils/PersistStorage\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`;\r\n\r\nconst ProgramCreate = ({ currentUser, onGoTo }) => {\r\n  const [saveProgram, { data, loading: mLoading }] = useMutation(SAVE_PROGRAM, {\r\n    onCompleted: result => {\r\n      const id = _get(result, \"saveProgram.id\");\r\n      PersistStorage.setItem(MY_PROGRAMS_REFRESH, Math.random().toString());\r\n      onGoTo(`${PERSONAL_PROGRAM_EDIT}${id}`);\r\n    }\r\n  });\r\n\r\n  return (\r\n    <Container>\r\n      <Header title={\"新建工具\"} />\r\n      <BasicForm\r\n        width={800}\r\n        items={[\r\n          {\r\n            label: \"工具名称\",\r\n            required: true,\r\n            fieldKey: \"name\",\r\n            placeholder: `请填写工具名称`,\r\n            renderControl: ({ value, onChange }) => (\r\n              <Input\r\n                defaultValue={value}\r\n                onChange={(e, { name, value }) => {\r\n                  onChange(value);\r\n                }}\r\n              />\r\n            )\r\n          },\r\n          {\r\n            label: \"工具图片\",\r\n            required: true,\r\n            fieldKey: \"coverUrl\",\r\n            placeholder: `请填写工具名称`,\r\n            renderControl: ({ value, onChange }) => (\r\n              <ImageInput onChange={onChange} width={\"140px\"} height={\"80\"} />\r\n            )\r\n          },\r\n          {\r\n            label: \"描述\",\r\n            fieldKey: \"description\",\r\n            required: true,\r\n            placeholder: `请填写工具描述`,\r\n            renderControl: ({\r\n              item: { placeholder, fieldKey },\r\n              value,\r\n              onUpdateField\r\n            }) => {\r\n              return (\r\n                <RichTextEditor\r\n                  placeholder={placeholder}\r\n                  fieldKey={fieldKey}\r\n                  value={value}\r\n                  onUpdateField={onUpdateField}\r\n                />\r\n              );\r\n            }\r\n          },\r\n          {\r\n            label: \"标签\",\r\n            required: true,\r\n            fieldKey: \"tags\",\r\n            renderControl: ({ value, onChange }) => (\r\n              <TagsInput onChange={onChange} />\r\n            )\r\n          }\r\n        ]}\r\n      >\r\n        {({ form, onValidate }) => {\r\n          return (\r\n            <Button\r\n              style={{ width: 200, marginTop: 20 }}\r\n              onClick={() => {\r\n                onValidate(() =>\r\n                  saveProgram({\r\n                    variables: {\r\n                      name: form.name,\r\n                      coverUrl: form.coverUrl,\r\n                      description: form.description,\r\n                      tags: form.tags\r\n                    }\r\n                  })\r\n                );\r\n              }}\r\n              color=\"teal\"\r\n            >\r\n              保存\r\n            </Button>\r\n          );\r\n        }}\r\n      </BasicForm>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ProgramCreate;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Upload, message } from \"antd\";\r\nimport { InboxOutlined } from \"@ant-design/icons\";\r\nimport styled from \"styled-components\";\r\nimport { SERVER_URL } from \"../../../config\";\r\nimport _get from \"lodash/get\";\r\nimport ModalHint from \"../ModalHint\";\r\n\r\nconst { Dragger } = Upload;\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  .uploader {\r\n    width: 600px;\r\n  }\r\n`;\r\n\r\nfunction getBase64(img, callback) {\r\n  const reader = new FileReader();\r\n  reader.addEventListener(\"load\", () => callback(reader.result));\r\n  reader.readAsDataURL(img);\r\n}\r\n\r\nfunction beforeUpload(file, accept) {\r\n  let fileType = accept.slice(1);\r\n  if (fileType === \"js\") {\r\n    fileType = \"javascript\";\r\n  }\r\n  const isSuchType = file.type.indexOf(fileType) >= 0;\r\n  if (!isSuchType) {\r\n    ModalHint.error(`文件类型不匹配，你只能上传 ${fileType} 类型的文件!`);\r\n  }\r\n  const isLt2M = file.size / 1024 / 1024 < 10;\r\n  if (!isLt2M) {\r\n    ModalHint.error(\"文件大小不等超过 10MB!\");\r\n  }\r\n  return isSuchType && isLt2M;\r\n}\r\n\r\nconst useFileInput = ({ isTmp, value, onChange }) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [fileUrl, setFileUrl] = useState(value);\r\n  const handleChange = info => {\r\n    if (info.file.status === \"uploading\") {\r\n      setLoading(true);\r\n    }\r\n    if (info.file.status === \"done\") {\r\n      // Get this url from response in real world.\r\n      getBase64(info.file.originFileObj, fileUrl => {\r\n        setLoading(false);\r\n        setFileUrl(fileUrl);\r\n        const ossFileUrl = _get(info.file, \"response.pathArray[0]\");\r\n        onChange(ossFileUrl);\r\n      });\r\n    }\r\n  };\r\n  const onClear = () => {\r\n    onChange(\"\");\r\n    setFileUrl(null);\r\n  };\r\n  return {\r\n    loading,\r\n    fileUrl,\r\n    onClear,\r\n    handleChange,\r\n    actionUrl: SERVER_URL + (isTmp ? \"/uploadTemp\" : \"/uploadm\")\r\n  };\r\n};\r\n\r\nconst FileInput = ({\r\n  isTmp = false,\r\n  value,\r\n  multiple = false,\r\n  fileData,\r\n  accept,\r\n  onChange\r\n}) => {\r\n  const { loading, fileUrl, actionUrl, handleChange, onClear } = useFileInput({\r\n    isTmp,\r\n    value,\r\n    onChange\r\n  });\r\n  const fileListProps =\r\n    fileData && fileUrl === fileData.url\r\n      ? { fileList: [{ ...fileData, id: -1, name: fileData.fileName }] }\r\n      : {};\r\n  return (\r\n    <Container>\r\n      <Dragger\r\n        name=\"file\"\r\n        accept={accept}\r\n        multiple={multiple}\r\n        className=\"uploader\"\r\n        maxCount={1}\r\n        //fileList={[fileData]}\r\n        {...fileListProps}\r\n        showUploadList={true}\r\n        action={actionUrl}\r\n        onRemove={file => {\r\n          onClear();\r\n        }}\r\n        beforeUpload={file => beforeUpload(file, accept)}\r\n        onChange={handleChange}\r\n      >\r\n        <>\r\n          <p className=\"ant-upload-drag-icon\">\r\n            <InboxOutlined />\r\n          </p>\r\n          <p className=\"ant-upload-text\">点击或拖拽上传文件</p>\r\n        </>\r\n      </Dragger>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default FileInput;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport BasicForm from \"../../../../../common/BasicForm\";\r\nimport { Input, TextArea, Select } from \"semantic-ui-react\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { SAVE_PROGRAM_VERSION } from \"../../../../../common/mutationGql\";\r\nimport FileInput from \"../../../../../common/formFields/FileInput\";\r\nimport _get from \"lodash/get\";\r\nimport _endsWith from \"lodash/endsWith\";\r\nimport { IMPORT_TYPE } from \"../../../../../common/CONSULT\";\r\nimport ModalHint from \"../../../../../common/ModalHint\";\r\n\r\nconst Container = styled.div``;\r\n\r\nconst useEditVersion = ({ form }) => {\r\n  const importType = _get(form, \"importType\", \".js\");\r\n  const [accept, setAccept] = useState(\".js\");\r\n  const onUpdateAcceptTypeImportType = importType => {\r\n    switch (importType) {\r\n      case \"OnlyJs\":\r\n        setAccept(\".js\");\r\n        break;\r\n      case \"OnlyHtml\":\r\n        setAccept(\".html\");\r\n        break;\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    onUpdateAcceptTypeImportType(importType);\r\n  }, []);\r\n  return { accept, onUpdateAcceptTypeImportType };\r\n};\r\n\r\nconst EditVersionForm = ({\r\n  loading,\r\n  initValue,\r\n  programId,\r\n  refetch,\r\n  onCloseModal,\r\n  setLoading\r\n}) => {\r\n  const [saveProgramVersion, { data, loading: mLoading }] = useMutation(\r\n    SAVE_PROGRAM_VERSION,\r\n    {\r\n      onCompleted: result => {\r\n        onCloseModal && onCloseModal();\r\n        refetch && refetch();\r\n      },\r\n      onError: error => {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  );\r\n\r\n  const oldCodeUrl = _get(initValue, \"codeFile.url\");\r\n  const { accept, onUpdateAcceptTypeImportType } = useEditVersion({\r\n    form: initValue\r\n  });\r\n  return (\r\n    <Container>\r\n      <BasicForm\r\n        width={600}\r\n        formData={initValue}\r\n        items={[\r\n          {\r\n            label: \"版本名称\",\r\n            required: true,\r\n            fieldKey: \"name\",\r\n            renderControl: ({ value, onChange }) => (\r\n              <Input\r\n                placeholder={`请填写版本名称`}\r\n                defaultValue={value}\r\n                onChange={(e, { name, value }) => {\r\n                  onChange(value);\r\n                }}\r\n              />\r\n            )\r\n          },\r\n\r\n          {\r\n            label: \"版本号\",\r\n            fieldKey: \"versionCode\",\r\n            required: true,\r\n            renderControl: ({ value, onChange }) => {\r\n              return (\r\n                <Input\r\n                  placeholder={`请填写版本号（如：v1.1.0）`}\r\n                  defaultValue={value}\r\n                  onChange={(e, { name, value }) => {\r\n                    onChange(value);\r\n                  }}\r\n                />\r\n              );\r\n            }\r\n          },\r\n          {\r\n            label: \"文件类型\",\r\n            fieldKey: \"importType\",\r\n            required: true,\r\n            renderControl: ({ value, onChange, onUpdateField }) => {\r\n              return (\r\n                <Select\r\n                  defaultValue={value}\r\n                  onChange={(e, { name, value }) => {\r\n                    onChange(value);\r\n                    onUpdateAcceptTypeImportType(value);\r\n                    onUpdateField(\"codeUrl\", null);\r\n                  }}\r\n                  options={[\r\n                    {\r\n                      key: IMPORT_TYPE.OnlyJs,\r\n                      value: \"OnlyJs\",\r\n                      text: IMPORT_TYPE.OnlyJs\r\n                    },\r\n                    {\r\n                      key: IMPORT_TYPE.OnlyHtml,\r\n                      value: \"OnlyHtml\",\r\n                      text: IMPORT_TYPE.OnlyHtml\r\n                    }\r\n                  ]}\r\n                />\r\n              );\r\n            }\r\n          },\r\n          {\r\n            label: \"文件\",\r\n            fieldKey: \"codeUrl\",\r\n            required: true,\r\n            renderControl: ({ value, onChange }) => {\r\n              return (\r\n                <FileInput\r\n                  value={value}\r\n                  isTmp={true}\r\n                  accept={accept}\r\n                  onChange={onChange}\r\n                  fileData={_get(initValue, \"codeFile\")}\r\n                />\r\n              );\r\n            }\r\n          },\r\n          {\r\n            label: \"描述\",\r\n            fieldKey: \"description\",\r\n            placeholder: `请填写工具描述`,\r\n            required: true,\r\n            renderControl: ({\r\n              item: { placeholder, fieldKey },\r\n              value = \"\",\r\n              onChange\r\n            }) => {\r\n              return (\r\n                <TextArea\r\n                  onChange={(e, { value }) => onChange(value)}\r\n                  placeholder={placeholder}\r\n                  value={value}\r\n                />\r\n              );\r\n            }\r\n          }\r\n        ]}\r\n      >\r\n        {({ form, onValidate }) => {\r\n          return (\r\n            <div\r\n              id={\"save_program_version\"}\r\n              onClick={\r\n                mLoading\r\n                  ? null\r\n                  : () => {\r\n                      onValidate(() => {\r\n                        // 如果codeUrl代码没有改变， 则设为空，在保存中忽略\r\n                        const codeUrl =\r\n                          oldCodeUrl === form.codeUrl ? \"\" : form.codeUrl;\r\n                        if (codeUrl && !_endsWith(codeUrl, accept)) {\r\n                          ModalHint.info(\r\n                            `您上传的文件与您设置的文件类型不匹配！`\r\n                          );\r\n                        } else {\r\n                          saveProgramVersion({\r\n                            variables: {\r\n                              id: form.id,\r\n                              programId,\r\n                              versionCode: form.versionCode,\r\n                              name: form.name,\r\n                              importType: form.importType,\r\n                              // 如果codeUrl代码没有改变， 则设为空，在保存中忽略\r\n                              codeUrl:\r\n                                oldCodeUrl === form.codeUrl ? \"\" : form.codeUrl,\r\n                              description: form.description\r\n                            }\r\n                          });\r\n                          setLoading(true);\r\n                        }\r\n                      });\r\n                    }\r\n              }\r\n              color=\"teal\"\r\n            />\r\n          );\r\n        }}\r\n      </BasicForm>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default EditVersionForm;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Modal, Button } from \"semantic-ui-react\";\r\nimport PageItem from \"../../../../QueryItem\";\r\nimport EditVersionForm from \"./EditVersionForm\";\r\nimport { GET_PROGRAM_VERSION } from \"../../../../../common/mutationGql\";\r\nimport styled from \"styled-components\";\r\nimport { clickEle } from \"../../../../../utils/elementLink\";\r\nimport _get from \"lodash/get\";\r\n\r\nconst ModalContentBox = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n`;\r\n\r\nconst EditModal = ({\r\n  open,\r\n  onClose,\r\n  programVersionId,\r\n  programId,\r\n  refetch: refetchProgram\r\n}) => {\r\n  const [saveLoading, setSaveLoading] = useState(false);\r\n  const onCloseModal = e => {\r\n    setSaveLoading(false);\r\n    onClose(e);\r\n  };\r\n  return (\r\n    <Modal\r\n      style={{ top: \"300px\", width: \"700px\" }}\r\n      dimmer={\"blurring\"}\r\n      open={open}\r\n      onClose={onCloseModal}\r\n    >\r\n      <Modal.Header>\r\n        {programVersionId ? \"编辑版本\" : \"添加新版本\"}\r\n      </Modal.Header>\r\n      <Modal.Content>\r\n        <ModalContentBox>\r\n          {programVersionId ? (\r\n            <PageItem\r\n              id={programVersionId}\r\n              gql={GET_PROGRAM_VERSION}\r\n              autoLoading\r\n              itemPath={\"programVersion\"}\r\n            >\r\n              {({ loading, refetch, item }) => {\r\n                return (\r\n                  <EditVersionForm\r\n                    programId={programId}\r\n                    loading={loading}\r\n                    refetch={() => {\r\n                      refetchProgram();\r\n                    }}\r\n                    initValue={{ ...item, codeUrl: _get(item, \"codeFile.url\") }}\r\n                    onCloseModal={onCloseModal}\r\n                    setLoading={setSaveLoading}\r\n                  />\r\n                );\r\n              }}\r\n            </PageItem>\r\n          ) : (\r\n            <EditVersionForm\r\n              programId={programId}\r\n              onCloseModal={onCloseModal}\r\n              setLoading={setSaveLoading}\r\n              initValue={{ importType: \"OnlyJs\" }}\r\n              refetch={() => {\r\n                refetchProgram();\r\n              }}\r\n            />\r\n          )}\r\n        </ModalContentBox>\r\n      </Modal.Content>\r\n      <Modal.Actions>\r\n        <Button negative onClick={e => onCloseModal(e)}>\r\n          关闭\r\n        </Button>\r\n        <Button\r\n          loading={saveLoading}\r\n          positive\r\n          onClick={() => clickEle(\"save_program_version\")}\r\n        >\r\n          保存\r\n        </Button>\r\n      </Modal.Actions>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default EditModal;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport EditModal from \"./EditModal\";\r\n\r\nconst EditModalTrigger = ({\r\n  refetch,\r\n  programId,\r\n  editProgramVersionId,\r\n  children\r\n}) => {\r\n  const [show, setShow] = useState(false);\r\n  return (\r\n    <span\r\n      onClick={e => {\r\n        e.stopPropagation();\r\n        setShow(true);\r\n      }}\r\n    >\r\n      {children}\r\n      <EditModal\r\n        refetch={refetch}\r\n        open={show}\r\n        programId={programId}\r\n        onClose={e => {\r\n          setShow(false);\r\n          e && e.stopPropagation();\r\n        }}\r\n        programVersionId={editProgramVersionId}\r\n      />\r\n    </span>\r\n  );\r\n};\r\n\r\nexport default EditModalTrigger;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Modal, Button, Icon } from \"semantic-ui-react\";\r\nimport EditModalTrigger from \"./EditModalTrigger\";\r\nimport { Button as AntButton } from \"antd\";\r\nimport Space from \"../../../../../common/Space\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  background-color: transparent;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst ContentBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst VersionBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  line-height: 20px;\r\n  font-size: 16px;\r\n`;\r\n\r\nconst VersionText = styled.div`\r\n  color: gray;\r\n`;\r\n\r\nconst EditButton = styled.div`\r\n  display: block;\r\n  margin-left: 4px;\r\n`;\r\n\r\nconst NewButton = styled(Button)``;\r\n\r\nconst AllVersion = styled(AntButton)``;\r\n\r\nconst CurrentVersion = ({\r\n  onShowVersions,\r\n  currentVersion,\r\n  programId,\r\n  refetch\r\n}) => {\r\n  return (\r\n    <Container>\r\n      <ContentBox>\r\n        {currentVersion && (\r\n          <EditModalTrigger\r\n            refetch={refetch}\r\n            programId={programId}\r\n            editProgramVersionId={currentVersion.id}\r\n          >\r\n            <VersionBox>\r\n              <VersionText>\r\n                {currentVersion.name}:{currentVersion.versionCode}\r\n              </VersionText>\r\n\r\n              <EditButton>\r\n                <Icon name={\"edit\"} />\r\n              </EditButton>\r\n            </VersionBox>\r\n          </EditModalTrigger>\r\n        )}\r\n        <Space width={\"20px\"} />\r\n        <EditModalTrigger refetch={refetch} programId={programId}>\r\n          <NewButton size={\"mini\"} basic circular color=\"blue\">\r\n            <Icon name={\"plus\"} />\r\n            添加版本\r\n          </NewButton>\r\n        </EditModalTrigger>\r\n      </ContentBox>\r\n      <AllVersion onClick={onShowVersions} type={\"link\"}>\r\n        所有版本\r\n        <Icon name={\"angle double right\"} />\r\n      </AllVersion>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default CurrentVersion;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useQuery } from \"@apollo/react-hooks\";\r\nimport { GET_GIT_TYPES } from \"../queryGql\";\r\nimport { Input } from \"semantic-ui-react\";\r\nimport _get from \"lodash/get\";\r\nimport _map from \"lodash/map\";\r\nimport _find from \"lodash/find\";\r\nimport { Label } from \"semantic-ui-react\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-around;\r\n  .git_input {\r\n    margin-bottom: 10px;\r\n  }\r\n`;\r\n\r\nconst LabelContent = styled(Label)`\r\n  width: 90px;\r\n  text-align: left;\r\n`;\r\n\r\nconst GitsInput = ({ gitInputs, onChange }) => {\r\n  const { loading, error, data, refetch, networkStatus } = useQuery(\r\n    GET_GIT_TYPES,\r\n    {\r\n      variables: {\r\n        types: [\"GIT_TYPE\"],\r\n        limit: 10000,\r\n        offset: 0,\r\n        sort: \"codeRank\",\r\n        order: \"desc\"\r\n      }\r\n    }\r\n  );\r\n  const [inputs, setInputs] = useState(gitInputs);\r\n  const gitLinks = _get(data, \"codes.items\", []);\r\n  return (\r\n    <Container>\r\n      {_map(gitLinks, git => {\r\n        const { id, name, value: gitValue } = git;\r\n        const gitInput = _find(inputs, i => i.gitTypeId === id);\r\n        const { linkUrl } = gitInput || {};\r\n        return (\r\n          <Input\r\n            key={\"git_\" + id}\r\n            className={\"git_input\"}\r\n            label={<LabelContent>{name}</LabelContent>}\r\n            placeholder={\"请填写Git链接\"}\r\n            defaultValue={linkUrl}\r\n            onChange={(e, { name, value }) => {\r\n              let newGitInputs = [];\r\n              if (gitInput) {\r\n                newGitInputs = _map(inputs, g => {\r\n                  if (g.gitTypeId === id) {\r\n                    return { ...g, linkUrl: value };\r\n                  }\r\n                  return g;\r\n                });\r\n              } else {\r\n                newGitInputs = [...inputs, { gitTypeId: id, linkUrl: value }];\r\n              }\r\n              setInputs(newGitInputs);\r\n              onChange(newGitInputs);\r\n            }}\r\n          />\r\n        );\r\n      })}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default GitsInput;\r\n","import React, { useState, useEffect, useReducer } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Header from \"../../Header\";\r\nimport { Button, Input, Label } from \"semantic-ui-react\";\r\nimport BasicForm from \"../../../../../common/BasicForm\";\r\nimport RichTextEditor from \"../../../../../common/RichTextEditor\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { SAVE_PROGRAM } from \"../../../../../common/mutationGql\";\r\nimport _get from \"lodash/get\";\r\nimport { PERSONAL_PROGRAM_EDIT } from \"../../../../../common/CONSULT\";\r\nimport ImageInput from \"../../../../../common/formFields/ImageInput\";\r\nimport TagsInput from \"../../../../../common/formFields/TagsInput\";\r\nimport { useRefresh } from \"../../../../../common/hooks\";\r\nimport CurrentVersion from \"./CurrentVersion\";\r\nimport EditModal from \"./EditModal\";\r\nimport GitsInput from \"../../../../../common/formFields/GitsInput\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  .code_label {\r\n  }\r\n`;\r\n\r\nconst LabelBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst useEditForm = ({ refetch }) => {\r\n  const [refresh, onRefresh] = useRefresh();\r\n  const [saveProgram, { data, loading: mLoading }] = useMutation(SAVE_PROGRAM, {\r\n    onCompleted: result => {\r\n      if (refetch instanceof Promise) {\r\n        refetch().then(() => onRefresh());\r\n      } else {\r\n        refetch && refetch();\r\n      }\r\n    }\r\n  });\r\n  const [state, dispatch] = useReducer(\r\n    (state, action) => {\r\n      switch (action.type) {\r\n        case \"SHOW\":\r\n          return {\r\n            ...state,\r\n            show: true,\r\n            editProgramVersionId: action.editProgramVersionId\r\n          };\r\n        case \"CLOSE\":\r\n          return { ...state, show: false, editProgramVersionId: null };\r\n      }\r\n    },\r\n    {\r\n      show: false,\r\n      editProgramVersionId: null\r\n    }\r\n  );\r\n\r\n  return {\r\n    refresh,\r\n    saveProgram,\r\n    editProgramVersionId: state.editProgramVersionId,\r\n    showEditModal: state.show,\r\n    onShowEditModal: editProgramVersionId =>\r\n      dispatch({ type: \"SHOW\", editProgramVersionId }),\r\n    onCloseEditModal: () => dispatch({ type: \"CLOSE\" })\r\n  };\r\n};\r\n\r\nconst ProgramEditForm = ({\r\n  currentUser,\r\n  onGoTo,\r\n  refetch,\r\n  programId,\r\n  initValue,\r\n  onShowVersions\r\n}) => {\r\n  const { refresh, saveProgram, onShowEditModal } = useEditForm({ refetch });\r\n  return (\r\n    <Container key={refresh}>\r\n      <BasicForm\r\n        width={800}\r\n        formData={initValue}\r\n        items={[\r\n          {\r\n            label: \"工具名称\",\r\n            required: true,\r\n            fieldKey: \"name\",\r\n            placeholder: `请填写工具名称`,\r\n            renderControl: ({ value, onChange }) => (\r\n              <Input\r\n                defaultValue={value}\r\n                onChange={(e, { name, value }) => {\r\n                  onChange(value);\r\n                }}\r\n              />\r\n            )\r\n          },\r\n          {\r\n            label: \"工具代码\",\r\n            fieldKey: \"code\",\r\n            placeholder: `请填写工具名称`,\r\n            renderControl: ({ value, onChange }) => (\r\n              <LabelBox>\r\n                <Label className={\"code_label\"} content={value} />\r\n              </LabelBox>\r\n            )\r\n          },\r\n          {\r\n            label: \"测试码\",\r\n            fieldKey: \"testCode\",\r\n            renderControl: ({ value, onChange }) => (\r\n              <LabelBox>\r\n                <Label\r\n                  className={\"code_label\"}\r\n                  content={value || \"你还没有测试码哦，联系QQ:1690306348\"}\r\n                />\r\n              </LabelBox>\r\n            )\r\n          },\r\n          {\r\n            label: \"版本\",\r\n            fieldKey: \"currentVersion\",\r\n            placeholder: `请填写工具名称`,\r\n            renderControl: ({ value, onChange }) => {\r\n              return (\r\n                <CurrentVersion\r\n                  currentVersion={value}\r\n                  programId={programId}\r\n                  refetch={refetch}\r\n                  onShowEditModal={onShowEditModal}\r\n                  onShowVersions={onShowVersions}\r\n                />\r\n              );\r\n            }\r\n          },\r\n          {\r\n            label: \"工具图片\",\r\n            required: true,\r\n            fieldKey: \"coverUrl\",\r\n            placeholder: `请填写工具名称`,\r\n            renderControl: ({ value, onChange }) => (\r\n              <ImageInput\r\n                value={value}\r\n                onChange={onChange}\r\n                width={\"140px\"}\r\n                height={\"80\"}\r\n              />\r\n            )\r\n          },\r\n          {\r\n            label: \"Git链接\",\r\n            fieldKey: \"gitInputs\",\r\n            placeholder: `请填写工具名称`,\r\n            renderControl: ({ value, onChange }) => (\r\n              <GitsInput gitInputs={value} onChange={onChange} />\r\n            )\r\n          },\r\n          {\r\n            label: \"帮助视频iframe链接\",\r\n            fieldKey: \"helpVideo\",\r\n            renderControl: ({ value, onChange }) => (\r\n              <Input\r\n                defaultValue={value}\r\n                placeholder={`如：<iframe src=\"//player.bilibili.com/...\"> </iframe>`}\r\n                onChange={(e, { name, value }) => {\r\n                  onChange(value);\r\n                }}\r\n              />\r\n            )\r\n          },\r\n          {\r\n            label: \"帮助详情页\",\r\n            fieldKey: \"helpDescription\",\r\n            placeholder: `请填写帮助详情`,\r\n            renderControl: ({\r\n              item: { placeholder, fieldKey },\r\n              value,\r\n              onUpdateField\r\n            }) => {\r\n              return (\r\n                <RichTextEditor\r\n                  placeholder={placeholder}\r\n                  fieldKey={fieldKey}\r\n                  value={value}\r\n                  onUpdateField={onUpdateField}\r\n                />\r\n              );\r\n            }\r\n          },\r\n          {\r\n            label: \"描述\",\r\n            fieldKey: \"description\",\r\n            required: true,\r\n            placeholder: `请填写工具描述`,\r\n            renderControl: ({\r\n              item: { placeholder, fieldKey },\r\n              value,\r\n              onUpdateField\r\n            }) => {\r\n              return (\r\n                <RichTextEditor\r\n                  placeholder={placeholder}\r\n                  fieldKey={fieldKey}\r\n                  value={value}\r\n                  onUpdateField={onUpdateField}\r\n                />\r\n              );\r\n            }\r\n          },\r\n          {\r\n            label: \"标签\",\r\n            required: true,\r\n            fieldKey: \"tags\",\r\n            renderControl: ({ value, onChange }) => (\r\n              <TagsInput value={value} onChange={onChange} />\r\n            )\r\n          }\r\n        ]}\r\n      >\r\n        {({ form, onValidate }) => {\r\n          return (\r\n            <Button\r\n              style={{ width: 200, marginTop: 20 }}\r\n              onClick={() => {\r\n                onValidate(() =>\r\n                  saveProgram({\r\n                    variables: {\r\n                      id: form.id,\r\n                      name: form.name,\r\n                      code: form.code,\r\n                      coverUrl: form.coverUrl,\r\n                      description: form.description,\r\n                      tags: form.tags,\r\n                      gitInputs: form.gitInputs,\r\n                      helpVideo: form.helpVideo,\r\n                      helpDescription: form.helpDescription\r\n                    }\r\n                  })\r\n                );\r\n              }}\r\n              color=\"teal\"\r\n            >\r\n              保存\r\n            </Button>\r\n          );\r\n        }}\r\n      </BasicForm>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default React.memo(ProgramEditForm, (prevProps, nextProps) => {\r\n  return true;\r\n  // if (prevProps.sidebarVisible !== nextProps.sidebarVisible) {\r\n  //   return true;\r\n  // }\r\n});\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _find from \"lodash/find\";\r\n\r\nimport { Mutation } from \"react-apollo\";\r\nimport { IMPORT_TYPE } from \"../../../../../common/CONSULT\";\r\nimport { PROGRAM_VERSION_STATUS } from \"../../../../../common/OPTIONS\";\r\nimport { UPDATE_PROGRAM_VERSION_STATUS } from \"../../../../../common/mutationGql\";\r\nimport { Button } from \"semantic-ui-react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Container = styled.div`\r\n  background-color: white;\r\n  display: flex;\r\n  margin-top: 20px;\r\n  margin-left: 20px;\r\n  margin-right: 20px;\r\n  padding: 10px;\r\n  border-radius: 10px;\r\n  border: 2px solid #efefef;\r\n  .link_btn {\r\n    display: none;\r\n  }\r\n  &:hover {\r\n    .link_btn {\r\n      display: block;\r\n    }\r\n  }\r\n`;\r\n\r\nconst ContentContainer = styled.div`\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: flex-start;\r\n`;\r\nconst Title = styled.div`\r\n  color: black;\r\n  font-weight: bold;\r\n  font-size: 16px;\r\n  text-align: left;\r\n  flex: 1;\r\n`;\r\n\r\nconst SubTitle = styled.span`\r\n  color: darkgray;\r\n  font-size: 14px;\r\n  text-align: left;\r\n  margin-left: 20px;\r\n`;\r\nconst Description = styled.div`\r\n  margin-top: 10px;\r\n  color: #cecece;\r\n  font-size: 16px;\r\n  text-align: left;\r\n`;\r\nconst OperationsContainer = styled.div`\r\n  min-width: 100px;\r\n  padding: 0 4px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-around;\r\n`;\r\nconst Head = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst Date = styled.div`\r\n  color: #cecece;\r\n  font-size: 16px;\r\n  margin-right: 20px;\r\n  line-height: 18px;\r\n`;\r\n\r\nconst Creator = styled.div`\r\n  font-size: 14px;\r\n  line-height: 18px;\r\n`;\r\n\r\nconst HeadRight = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n`;\r\n\r\nconst StatusBox = styled.div`\r\n  color: white;\r\n  background-color: ${props => props.bgColor};\r\n  padding: 2px 6px;\r\n  border-radius: 10px;\r\n  margin-left: 10px;\r\n  text-align: center;\r\n`;\r\n\r\nconst StatusLabel = ({ status }) => {\r\n  const statusItem = _find(PROGRAM_VERSION_STATUS, s => s.value === status);\r\n  return <StatusBox bgColor={statusItem.bColor}>{statusItem.label}</StatusBox>;\r\n};\r\n\r\nconst ProgramVersion = ({ item, programId, totalCount, items, refetch }) => {\r\n  const {\r\n    name,\r\n    dateCreated,\r\n    submitter,\r\n    description,\r\n    status,\r\n    importType,\r\n    codeFile,\r\n    id\r\n  } = item;\r\n\r\n  return (\r\n    <Container>\r\n      <ContentContainer>\r\n        <Head>\r\n          <Title>\r\n            {name}\r\n            <SubTitle>[{IMPORT_TYPE[importType]}]</SubTitle>\r\n          </Title>\r\n          <HeadRight>\r\n            <Date>{dateCreated}</Date>\r\n            <Creator>By：{submitter.username}</Creator>\r\n            <StatusLabel status={status} />\r\n          </HeadRight>\r\n        </Head>\r\n\r\n        <Description>{description}</Description>\r\n      </ContentContainer>\r\n      <Mutation\r\n        mutation={UPDATE_PROGRAM_VERSION_STATUS}\r\n        onCompleted={() => refetch()}\r\n      >\r\n        {onUpdateStatus => {\r\n          return (\r\n            <OperationsContainer>\r\n              {status === \"Draft\" && (\r\n                <Button\r\n                  onClick={() =>\r\n                    onUpdateStatus({\r\n                      variables: { status: \"Awaiting\", id: item.id }\r\n                    })\r\n                  }\r\n                  color=\"teal\"\r\n                  size={\"mini\"}\r\n                >\r\n                  {\"发布\"}\r\n                </Button>\r\n              )}\r\n              <Link\r\n                className={\"link_btn\"}\r\n                to={`/program/${programId}/${item.id}`}\r\n              >\r\n                {status !== \"Published\" ? (\r\n                  <Button color=\"orange\" circular basic size={\"mini\"}>\r\n                    {\"测试\"}\r\n                  </Button>\r\n                ) : (\r\n                  <Button color=\"blue\" circular basic size={\"mini\"}>\r\n                    {\"查看\"}\r\n                  </Button>\r\n                )}\r\n              </Link>\r\n            </OperationsContainer>\r\n          );\r\n        }}\r\n      </Mutation>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ProgramVersion;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport PaginationQueryList from \"../../../../../common/PaginationQueryList\";\r\nimport _map from \"lodash/map\";\r\nimport ProgramVersion from \"./ProgramVerson\";\r\nimport { GET_PROGRAM_VERSIONS } from \"../../../../../common/queryGql\";\r\nimport { Button, Header } from \"semantic-ui-react\";\r\nimport RefetchHandle from \"../../../../../common/RefetchHandle\";\r\n\r\nconst SlideHeader = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 20px 20px 0px;\r\n  align-items: center;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n`;\r\n\r\nconst ProgramVersions = ({ programId, onClose }) => {\r\n  return (\r\n    <PaginationQueryList\r\n      gql={GET_PROGRAM_VERSIONS}\r\n      searchFields={{ programId }}\r\n      hidePaginationInSinglePage={true}\r\n      dataKey={\"programVersions\"}\r\n      paginationSize={\"mini\"}\r\n      paginationSecondary={true}\r\n      limit={10}\r\n    >\r\n      {({ loading, error, refetch, items, count }) => {\r\n        return (\r\n          <Container>\r\n            <SlideHeader>\r\n              <Title>版本({count})</Title>{\" \"}\r\n              <Button\r\n                basic\r\n                circular\r\n                onClick={onClose}\r\n                color=\"gray\"\r\n                icon=\"close\"\r\n              />\r\n            </SlideHeader>\r\n            {_map(items, item => {\r\n              return (\r\n                <ProgramVersion\r\n                  key={\"program_version_\" + item.id}\r\n                  refetch={refetch}\r\n                  item={item}\r\n                  programId={programId}\r\n                  items={items}\r\n                  totalCount={count}\r\n                />\r\n              );\r\n            })}\r\n            <RefetchHandle id={\"refetch_program_versions\"} refetch={refetch} />\r\n          </Container>\r\n        );\r\n      }}\r\n    </PaginationQueryList>\r\n  );\r\n};\r\n\r\nexport default ProgramVersions;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nimport { Segment, Sidebar } from \"semantic-ui-react\";\r\nimport Header from \"../../Header\";\r\nimport { getRouteLastValue } from \"../../../../../utils/routeUtils\";\r\nimport _split from \"lodash/split\";\r\nimport _get from \"lodash/get\";\r\nimport _map from \"lodash/map\";\r\nimport { PERSONAL_PAGES } from \"../../../../../common/CONSULT\";\r\nimport PageItem from \"../../../../QueryItem\";\r\nimport { GET_PROGRAM } from \"../../../../../common/queryGql\";\r\nimport ProgramEditForm from \"./ProgramEditForm\";\r\nimport ProgramVersions from \"./ProgramVersions\";\r\nimport { clickEle } from \"../../../../../utils/elementLink\";\r\nconst Container = styled.div`\r\n  .sidebar_push {\r\n    border: none !important;\r\n    padding-bottom: 30px;\r\n  }\r\n  .sidebar_pusher {\r\n    border: none !important;\r\n  }\r\n  .side_bar {\r\n    border: none !important;\r\n    width: 600px !important;\r\n    background-color: white;\r\n  }\r\n`;\r\n\r\nconst ContentBox = styled.div`\r\n  min-height: 400px;\r\n  padding-bottom: 30px;\r\n`;\r\n\r\nconst useProgramEdit = ({}) => {\r\n  const programId = _get(\r\n    _split(getRouteLastValue(), PERSONAL_PAGES.PROGRAM_EDIT),\r\n    \"[1]\"\r\n  );\r\n  const [visible, setVisible] = useState(false);\r\n  return { programId, visible, setVisible };\r\n};\r\n\r\nconst resolveProgramForm = program => {\r\n  return {\r\n    ...program,\r\n    coverUrl: _get(program, \"cover.url\"),\r\n    tags: _map(_get(program, \"tags\", []), t => t.name),\r\n    gitInputs: _map(_get(program, \"gitLinks\", []), g => {\r\n      return {\r\n        id: g.id,\r\n        gitTypeId: g.gitType.id,\r\n        linkUrl: g.linkUrl,\r\n        branch: g.branch\r\n      };\r\n    }),\r\n    description: program.descriptionUrl\r\n  };\r\n};\r\n\r\nconst ProgramEdit = ({ onGoTo }) => {\r\n  const { programId, visible, setVisible } = useProgramEdit({});\r\n  return (\r\n    <Container>\r\n      <Sidebar.Pushable as={Segment} className={\"sidebar_push\"}>\r\n        <Sidebar\r\n          className={\"side_bar\"}\r\n          animation=\"overlay\"\r\n          icon=\"labeled\"\r\n          direction={\"right\"}\r\n          inverted={true}\r\n          onHide={() => setVisible(false)}\r\n          vertical={true}\r\n          visible={visible}\r\n          width=\"very wide\"\r\n        >\r\n          <ProgramVersions\r\n            programId={programId}\r\n            onClose={() => setVisible(false)}\r\n          />\r\n        </Sidebar>\r\n\r\n        <Sidebar.Pusher className={\"sidebar_pusher\"}>\r\n          <Header title={\"编辑工具\"} />\r\n          <ContentBox>\r\n            <PageItem\r\n              id={programId}\r\n              autoLoading\r\n              itemPath={\"program\"}\r\n              gql={GET_PROGRAM}\r\n            >\r\n              {({ loading, refetch, item }) => {\r\n                return (\r\n                  <ProgramEditForm\r\n                    sidebarVisible={visible}\r\n                    initValue={resolveProgramForm(item)}\r\n                    refetch={() => {\r\n                      clickEle(\"refetch_program_versions\");\r\n                      return refetch();\r\n                    }}\r\n                    programId={programId}\r\n                    onGoTo={onGoTo}\r\n                    onShowVersions={() => setVisible(true)}\r\n                  />\r\n                );\r\n              }}\r\n            </PageItem>\r\n          </ContentBox>\r\n        </Sidebar.Pusher>\r\n      </Sidebar.Pushable>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ProgramEdit;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Empty from \"./Empty\";\r\nimport { PERSONAL, PERSONAL_PAGES } from \"../../common/CONSULT\";\r\nimport Menus from \"./pages/Menus\";\r\nimport UserSettings from \"./pages/userSettings/UserSettings\";\r\nimport Program from \"./pages/program/Program\";\r\nimport { getPersonPage } from \"../../utils/pathUtils\";\r\nimport Book from \"./pages/book/Book\";\r\nimport Blog from \"./pages/blog/Blog\";\r\nimport Chapter from \"./pages/chapter/Chapter\";\r\nimport Comment from \"./pages/comment/Comment\";\r\nimport Follower from \"./pages/follower/Follower\";\r\nimport Up from \"./pages/up/Up\";\r\nimport Problem from \"./pages/problem/Problem\";\r\nimport ProgramCreate from \"./pages/program/create/ProgramCreate\";\r\nimport ProgramEdit from \"./pages/program/eidt/ProgramEdit\";\r\nconst Container = styled.div`\r\n  display: flex;\r\n  width: 1300px;\r\n  margin-top: 18px;\r\n`;\r\n\r\nconst PagePanel = styled.div`\r\n  flex: 1;\r\n`;\r\n\r\nconst MenusBox = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 600px;\r\n  padding: 0px 4px;\r\n  border: 1px solid rgba(34, 36, 38, 0.15);\r\n  align-items: center;\r\n  .menu_item {\r\n    font-size: 16px !important;\r\n    color: #222222 !important;\r\n    padding-top: 14px !important;\r\n  }\r\n`;\r\n\r\nconst getPageByName = (page, currentUser, onGoTo) => {\r\n  const commonProps = { onGoTo, currentUser };\r\n  switch (page) {\r\n    case PERSONAL_PAGES.USER_SETTINGS:\r\n      return <UserSettings />;\r\n    case PERSONAL_PAGES.PROGRAM:\r\n      return <Program {...commonProps} />;\r\n    case PERSONAL_PAGES.PROGRAM_CREATE:\r\n      return <ProgramCreate {...commonProps} />;\r\n    case PERSONAL_PAGES.PROGRAM_EDIT:\r\n      return <ProgramEdit {...commonProps} />;\r\n    case PERSONAL_PAGES.FOLLOWER:\r\n      return <Follower {...commonProps} />;\r\n    case PERSONAL_PAGES.UP:\r\n      return <Up {...commonProps} />;\r\n    case PERSONAL_PAGES.BLOG:\r\n      return <Blog {...commonProps} />;\r\n    case PERSONAL_PAGES.COMMENT:\r\n      return <Comment {...commonProps} />;\r\n    case PERSONAL_PAGES.BOOK:\r\n      return <Book {...commonProps} />;\r\n    case PERSONAL_PAGES.CHAPTER:\r\n      return <Chapter {...commonProps} />;\r\n    case PERSONAL_PAGES.PROBLEM:\r\n      return <Problem {...commonProps} />;\r\n    default:\r\n      return null;\r\n  }\r\n};\r\n\r\nconst usePersonalPage = ({ currentUser, onGoTo }) => {\r\n  const page = getPersonPage();\r\n  console.log(\"page___________________\", page);\r\n\r\n  const content = getPageByName(page, currentUser, onGoTo);\r\n  return { page, onSwitchPage: page => onGoTo(PERSONAL + page), content };\r\n};\r\n\r\nconst PersonalPage = ({ currentUser, onGoTo }) => {\r\n  const { page, onSwitchPage, content } = usePersonalPage({\r\n    currentUser,\r\n    onGoTo\r\n  });\r\n  const commonProps = { page, onSwitchPage };\r\n  return currentUser ? (\r\n    <Container>\r\n      <MenusBox>\r\n        <Menus commonProps={commonProps} />\r\n      </MenusBox>\r\n      <PagePanel>{content}</PagePanel>\r\n    </Container>\r\n  ) : (\r\n    <Empty />\r\n  );\r\n};\r\n\r\nexport default PersonalPage;\r\n","export const MAIN_RED = \"#f02737\";","export const strToJson = str => {\r\n  return JSON.parse(str);\r\n};\r\n\r\nexport const followDataToJson = follow => {\r\n  return strToJson(follow.data);\r\n};\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Icon } from \"semantic-ui-react\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { SWITCH_UP_COMMENT } from \"../../mutationGql\";\r\nimport ModalHint from \"../../ModalHint\";\r\nimport ReportHint from \"../../ReportHint\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  justify-content: space-between;\r\n  margin-top: 10px;\r\n  color: #99a2aa;\r\n`;\r\n\r\nconst DateText = styled.div`\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst ReplyButton = styled.div`\r\n  cursor: pointer;\r\n  margin-left: 10px;\r\n`;\r\n\r\nconst MainActionsBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst ReportButton = styled.div`\r\n  cursor: pointer;\r\n  font-size: 10px;\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst ThumbsUp = styled(Icon)`\r\n  cursor: pointer;\r\n  margin-right: 4px !important;\r\n  margin-bottom: 4px !important;\r\n`;\r\n\r\nconst UpCount = styled.div``;\r\n\r\nconst useCommentActions = ({ upCount, currentUpped, currentReport }) => {\r\n  const [uCount, setUCount] = useState(upCount);\r\n  const [report, setReport] = useState(currentReport);\r\n  const [cUpped, setCUpped] = useState(currentUpped);\r\n  const [switchUpComment, { data, loading }] = useMutation(SWITCH_UP_COMMENT, {\r\n    onCompleted: data => {\r\n      const { switchUpComment } = data;\r\n      setUCount(switchUpComment.upCount);\r\n      setCUpped(switchUpComment.currentUpped);\r\n    },\r\n    onError: () => ModalHint.error(\"点赞失败\")\r\n  });\r\n  return {\r\n    uCount,\r\n    setUCount,\r\n    cUpped,\r\n    setCUpped,\r\n    switchUpComment,\r\n    report,\r\n    setReport\r\n  };\r\n};\r\n\r\nconst CommentActions = ({\r\n  commentId,\r\n  dateCreated,\r\n  onReply,\r\n  upCount,\r\n  currentUpped,\r\n  currentReport\r\n}) => {\r\n  const {\r\n    uCount,\r\n    cUpped,\r\n    switchUpComment,\r\n    report,\r\n    setReport\r\n  } = useCommentActions({\r\n    upCount,\r\n    currentUpped,\r\n    currentReport\r\n  });\r\n  return (\r\n    <Container>\r\n      <MainActionsBox>\r\n        <DateText>{dateCreated}</DateText>\r\n        <ThumbsUp\r\n          color={cUpped ? \"red\" : \"\"}\r\n          onClick={e => {\r\n            e.stopPropagation();\r\n            switchUpComment({ variables: { commentId } });\r\n          }}\r\n          name={cUpped ? \"thumbs up\" : \"thumbs up outline\"}\r\n        />\r\n        {uCount > 0 && <UpCount>{uCount}</UpCount>}\r\n        {onReply && <ReplyButton onClick={onReply}>回复</ReplyButton>}\r\n      </MainActionsBox>\r\n      <ReportButton\r\n        onClick={e => {\r\n          e.stopPropagation();\r\n          ReportHint.show(\"Comment\", commentId, report, {\r\n            reportCallback: report => setReport(report)\r\n          });\r\n        }}\r\n      >\r\n        {report ? \"已举报\" : \"举报\"}\r\n      </ReportButton>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default CommentActions;\r\n","import React, { useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div``;\r\n\r\nconst RefetchHandle = ({ id, refetch, refetchOnce }) => {\r\n  useEffect(() => {\r\n    if (refetchOnce) {\r\n      refetch && refetch();\r\n    }\r\n  }, []);\r\n  return (\r\n    <Container\r\n      id={id}\r\n      onClick={() => {\r\n        refetch();\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default RefetchHandle;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { MAIN_RED } from \"../Styles\";\r\n\r\nconst Container = styled.div`\r\n  width: ${props => props.size * 150}px;\r\n  display: flex;\r\n  color: gray;\r\n  cursor: pointer;\r\n  &:hover {\r\n    color: ${MAIN_RED};\r\n    .cover {\r\n      box-shadow: 0 8px 20px #bbb;\r\n      -webkit-box-shadow: 0 8px 20px #bbb;\r\n    }\r\n  }\r\n  flex-direction: column;\r\n  align-items: center;\r\n\r\n  margin-left: 10px;\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst Cover = styled.img`\r\n  width: ${props => props.size * 150}px;\r\n  height: ${props => props.size * 206}px;\r\n  border: 1px solid #cecece;\r\n`;\r\n\r\nconst BookName = styled.div`\r\n  margin-top: 4px;\r\n  margin-bottom: 6px;\r\n  width: 100px;\r\n`;\r\n\r\nconst BookItem = ({ book, size = 1, onToBook }) => {\r\n  const {\r\n    id,\r\n    name,\r\n    cover: { url: imageUrl },\r\n    creator: { id: creatorId, nickname }\r\n  } = book;\r\n  return (\r\n    <Container onClick={() => (onToBook ? onToBook(id) : null)} size={size}>\r\n      <Cover size={size} className={\"cover\"} src={imageUrl} />\r\n      <BookName size={size}>{name}</BookName>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BookItem;\r\n"],"sourceRoot":""}