(this["webpackJsonpplanet-web"]=this["webpackJsonpplanet-web"]||[]).push([[5],{1122:function(e,n,t){"use strict";t.r(n);var r=t(10),a=t(28),o=t(1),c=t(0),i=t.n(c),u=t(2);function l(){var e=Object(o.a)(["\n  font-size: 24px;\n  float: left;\n"]);return l=function(){return e},e}function d(){var e=Object(o.a)(["\n  margin-bottom: 16px;\n"]);return d=function(){return e},e}var f=u.a.div(d()),s=u.a.div(l()),p=function(e){var n=e.title;return i.a.createElement(f,null,i.a.createElement(s,null,n))},m=t(989),b=t(5),h=t.n(b),v=t(140),g=t(12);function x(){var e=Object(o.a)(["\n  display: flex;\n  align-items: center;\n"]);return x=function(){return e},e}var j=u.a.div(x()),E=function(e){var n=e.chapterId,t=e.bookName,r=e.lastUpdated,a=e.readCount,o=e.creator,c=e.upCount,u=e.currentUpped,l=e.charsCount,d=void 0===l?0:l,f=Object(v.p)({currentUpped:u,objId:n,objType:g.k.CHAPTER,upCount:c}),s=f.upCount,p=f.onSwitchUp,b=f.upped;return i.a.createElement(j,null,i.a.createElement(m.a,{mf:"0px",hintText:"\u4e66\u7c4d",icon:"book",text:t}),i.a.createElement(m.a,{hintText:"\u4f5c\u8005",icon:"pencil",text:h()(o,"username")}),i.a.createElement(m.a,{iconStyle:b?{color:"red"}:null,hintText:b?"\u70b9\u51fb\u53d6\u6d88\u559c\u6b22":"\u559c\u6b22",onClick:p,icon:b?"heart":"heart outline",text:s}),i.a.createElement(m.a,{hintText:"\u6700\u8fd1\u66f4\u65b0\u65e5\u671f",icon:"calendar alternate outline",text:r}),i.a.createElement(m.a,{hintText:"\u672c\u7ae0\u5b57\u6570",icon:"wordpress forms",text:d}),i.a.createElement(m.a,{boxStyle:{color:"grey"},hintText:"\u9605\u8bfb\u6b21\u6570",icon:"eye",text:Number(a)+1}))},O=t(141);function y(){var e=Object(o.a)(["\n  margin-top: 10px;\n  flex-wrap: wrap;\n  min-height: 70vh;\n  text-align: left;\n"]);return y=function(){return e},e}var C=u.a.div(y()),k=function(e){var n=e.contentUrl,t=e.settings,a=t.fontFamily,o=t.fontSize,u=Object(c.useState)(""),l=Object(r.a)(u,2),d=l[0],f=l[1];return Object(c.useEffect)((function(){Object(O.a)(n,"data.content",(function(e){return f(e)}))}),[n]),i.a.createElement(C,{style:{fontFamily:a,fontSize:o}},i.a.createElement("div",{dangerouslySetInnerHTML:{__html:d}}))},w=t(60),S=t(121),I=t.n(S),U=t(18),T=t.n(U);function F(){var e=Object(o.a)([""]);return F=function(){return e},e}function z(){var e=Object(o.a)(["\n  width: 380px;\n  text-align: left;\n  font-size: 16px;\n  &:hover {\n    color: #f02737;\n  }\n"]);return z=function(){return e},e}function P(){var e=Object(o.a)(["\n  display: flex;\n  border-bottom: 1px solid\n    ",";\n  justify-content: space-between;\n  align-items: center;\n  padding-top: 10px;\n  padding-bottom: 10px;\n"]);return P=function(){return e},e}function R(){var e=Object(o.a)(["\n  font-size: 22px;\n  color: #f02737;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #f02737;\n"]);return R=function(){return e},e}function _(){var e=Object(o.a)(["\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  margin-bottom: 20px;\n"]);return _=function(){return e},e}function B(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 0 20px;\n  color: rgba(0, 0, 0, 0.87);\n"]);return B=function(){return e},e}var L=u.a.div(B()),M=u.a.div(_()),A=u.a.div(R()),D=u.a.div(P(),(function(e){return e.isLastOne?"transparent":"#cecece"})),G=function(e){var n=e.row,t=e.isLastOne,r=e.onToChapter;return i.a.createElement(D,{isLastOne:t},T()(n,(function(e){return i.a.createElement(H,{onToChapter:r,chapter:e,key:"chapter_"+e.id})})))},W=u.a.div(z()),H=function(e){var n=e.chapter,t=e.onToChapter;return i.a.createElement(W,{onClick:function(){return t(n.id)}},n.title)},K=u.a.div(F()),q=function(e){var n=e.book,t=e.onToChapter,r=I()(n.chapters,2);return i.a.createElement(L,null,i.a.createElement(M,null,i.a.createElement(A,null,"\u76ee\u5f55")),i.a.createElement(K,null,T()(r,(function(e,n){return i.a.createElement(G,{isLastOne:n+1===r.length,key:"chapters_row_"+n,row:e,onToChapter:t})}))))};function N(){var e=Object(o.a)(["\n  display: flex;\n  justify-content: flex-end;\n  padding: 10px 20px;\n  color: #cecece;\n  &:hover {\n    color: lightblue;\n  }\n"]);return N=function(){return e},e}function J(){var e=Object(o.a)(["\n  background-color: #faf9f3;\n  position: absolute;\n  top: 0px;\n  left: 90px;\n  min-height: 200px;\n  padding-bottom: 30px;\n"]);return J=function(){return e},e}var Q=u.a.div(J()),Y=u.a.div(N()),V=function(e){var n=e.show,t=e.width,r=e.height,a=e.children,o=e.onClose,c=e.menuIndex,u=e.bgColor;return n?i.a.createElement(Q,{style:{width:t,height:r,top:"-".concat(c*wn,"px"),backgroundColor:u}},i.a.createElement(Y,null,i.a.createElement(w.a,{onClick:o,name:"close",size:"large"})),a):null};function X(){var e=Object(o.a)(["\n  width: 40px;\n  height: 40px;\n  border-radius: 20px;\n  border: 1px solid ",";\n  background-color: ",";\n  margin-right: 20px;\n  cursor: pointer;\n  color: #f02737;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return X=function(){return e},e}function Z(){var e=Object(o.a)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n"]);return Z=function(){return e},e}var $=[{color:"#F6F1E7",lightColor:"#FAF9F3"},{color:"#F4F4C7",lightColor:"#F8F1DA"},{color:"#E3EFE3",lightColor:"#F6F1F6"},{color:"#DFECF0",lightColor:"#E6F4F5"},{color:"#F5E4E4",lightColor:"#FAECEB"},{color:"#DCDCDC",lightColor:"#E9E9E9"}],ee=u.a.div(Z()),ne=u.a.div(X(),(function(e){return e.selected?"#f02737;":"#cecece"}),(function(e){return e.bgColor})),te=function(e){var n=e.item,t=e.onSelect,r=e.selected;return i.a.createElement(ne,{onClick:t,bgColor:n.color},r&&i.a.createElement(w.a,{name:"check",size:"large"}))},re=function(e){var n=e.currentTheme,t=e.onUpdateSettings;return i.a.createElement(ee,null,T()($,(function(e){return i.a.createElement(te,{selected:n.color===e.color,key:e.color,item:e,onSelect:function(){return t("theme",e)}})})))};function ae(){var e=Object(o.a)(["\n  border: 1px solid ",";\n  color: ",";\n  &:hover {\n    color: #f02737;\n  }\n  background-color: white;\n  padding: 10px 20px;\n"]);return ae=function(){return e},e}function oe(){var e=Object(o.a)(["\n  display: flex;\n  align-items: center;\n  width: 260px;\n  justify-content: space-between;\n"]);return oe=function(){return e},e}var ce=[{fontFamily:"Microsoft YaHei",name:"\u96c5\u9ed1"},{fontFamily:"SimSun",name:"\u5b8b\u4f53"},{fontFamily:"KaiTi",name:"\u6977\u4e66"}],ie=u.a.div(oe()),ue=u.a.div(ae(),(function(e){return e.selected?"#f02737;":"#cecece"}),(function(e){return e.selected?"#f02737;":"black"})),le=function(e){var n=e.children,t=e.selected,r=e.onSelect;return i.a.createElement(ue,{selected:t,onClick:r},n)},de=function(e){var n=e.fontFamily,t=e.onUpdateSettings;return i.a.createElement(ie,null,T()(ce,(function(e){return i.a.createElement(le,{key:e.fontFamily,selected:e.fontFamily===n,onSelect:function(){return t("fontFamily",e.fontFamily)}},e.name)})))};function fe(){var e=Object(o.a)(["\n  width: ",";\n  height: ",";\n"]);return fe=function(){return e},e}var se=u.a.div(fe(),(function(e){return e.width?e.width:"2px"}),(function(e){return e.height?e.height:"2px"})),pe=function(e){var n=e.bg,t=e.width,r=void 0===t?"1px":t,a=e.height,o=void 0===a?"10px":a;return i.a.createElement(se,{style:{backgroundColor:n},width:r,height:o})};function me(){var e=Object(o.a)(["\n  flex: 1;\n  color: gray;\n  font-size: 22px;\n"]);return me=function(){return e},e}function be(){var e=Object(o.a)(["\n  flex: 1;\n  color: ",";\n  pointer-events: ",";\n  cursor: pointer;\n  font-size: 22px;\n  font-weight: bold;\n"]);return be=function(){return e},e}function he(){var e=Object(o.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 260px;\n  border: 1px solid #cecece;\n  background-color: white;\n  height: 40px;\n"]);return he=function(){return e},e}var ve=u.a.div(he()),ge=u.a.div(be(),(function(e){return e.disabled?"gray":"black"}),(function(e){return e.disabled?"none":""})),xe=u.a.div(me()),je=function(e){var n=e.content,t=e.min,r=e.max,a=e.leftButton,o=e.rightButton,c=e.steps,u=e.onUpdateSettings;return i.a.createElement(ve,null,i.a.createElement(ge,{onClick:function(){return u(n-c)},disabled:n<=t},a),i.a.createElement(pe,{bg:"#cecece",height:"20px",width:"1px"}),i.a.createElement(xe,null,n),i.a.createElement(pe,{bg:"#cecece",height:"20px",width:"1px"}),i.a.createElement(ge,{onClick:function(){return u(n+c)},disabled:n>=r},o))},Ee=function(e){var n=e.fontSize,t=void 0===n?18:n,r=e.onUpdateSettings;return i.a.createElement(je,{content:t,leftButton:"A-",rightButton:"A+",min:12,max:40,steps:2,onUpdateSettings:function(e){return r("fontSize",e)}})};function Oe(){var e=Object(o.a)([""]);return Oe=function(){return e},e}var ye=u.a.div(Oe()),Ce=function(e){var n=e.children;return i.a.createElement(ye,null,i.a.createElement(w.a,{name:"sticky note outline"}),n)},ke=function(e){var n=e.contentWidth,t=e.onUpdateSettings;return i.a.createElement(je,{content:n,leftButton:i.a.createElement(Ce,null,"-"),rightButton:i.a.createElement(Ce,null,"+"),min:650,max:1e3,steps:50,onUpdateSettings:function(e){return t("contentWidth",e)}})};function we(){var e=Object(o.a)(["\n  color: white;\n  font-size: 16px;\n  background-color: #f02737;\n  padding: 10px 20px;\n  cursor: pointer;\n"]);return we=function(){return e},e}function Se(){var e=Object(o.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  padding-top: 20px;\n"]);return Se=function(){return e},e}function Ie(){var e=Object(o.a)(["\n  flex: 1;\n"]);return Ie=function(){return e},e}function Ue(){var e=Object(o.a)(["\n  width: 60px;\n  margin-right: 16px;\n"]);return Ue=function(){return e},e}function Te(){var e=Object(o.a)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 40px;\n"]);return Te=function(){return e},e}function Fe(){var e=Object(o.a)(["\n  font-size: 20px;\n  padding-bottom: 10px;\n  color: black;\n  font-weight: bold;\n"]);return Fe=function(){return e},e}function ze(){var e=Object(o.a)(["\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  margin-bottom: 20px;\n"]);return ze=function(){return e},e}function Pe(){var e=Object(o.a)(["\n  width: 500px;\n  min-height: 400px;\n  color: black;\n  padding: 0 16px 40px;\n"]);return Pe=function(){return e},e}var Re=u.a.div(Pe()),_e=u.a.div(ze()),Be=u.a.div(Fe()),Le=u.a.div(Te()),Me=u.a.div(Ue()),Ae=u.a.div(Ie()),De=function(e){var n=e.title,t=e.children;return i.a.createElement(Le,null,i.a.createElement(Me,null,n),i.a.createElement(Ae,null,t))},Ge=u.a.div(Se()),We=u.a.div(we()),He=function(e){var n=e.settings,t=e.onUpdateSettings,r=e.onResetSettings,a=n.theme,o=n.fontFamily,c=n.fontSize,u=n.contentWidth;return i.a.createElement(Re,null,i.a.createElement(_e,null,i.a.createElement(Be,null,"\u8bbe\u7f6e")),i.a.createElement(De,{title:"\u9605\u8bfb\u4e3b\u9898"},i.a.createElement(re,{currentTheme:a,onUpdateSettings:t})),i.a.createElement(De,{title:"\u6b63\u6587\u5b57\u4f53"},i.a.createElement(de,{fontFamily:o,onUpdateSettings:t})),i.a.createElement(De,{title:"\u5b57\u4f53\u5927\u5c0f"},i.a.createElement(Ee,{fontSize:c,onUpdateSettings:t})),i.a.createElement(De,{title:"\u9875\u9762\u5bbd\u5ea6"},i.a.createElement(ke,{contentWidth:u,onUpdateSettings:t})),i.a.createElement(Ge,null,i.a.createElement(We,{onClick:r},"\u6062\u590d\u9ed8\u8ba4\u8bbe\u7f6e")))},Ke=t(105),qe=t(985);function Ne(){var e=Object(o.a)(["\n  color: #cecece;\n"]);return Ne=function(){return e},e}function Je(){var e=Object(o.a)(["\n  text-align: left;\n  font-size: 18px;\n"]);return Je=function(){return e},e}function Qe(){var e=Object(o.a)(["\n  padding: 16px 0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  color: black;\n  &:hover {\n    color: ",";\n  }\n  border-bottom: 1px solid\n    ",";\n"]);return Qe=function(){return e},e}var Ye=u.a.div(Qe(),qe.a,(function(e){return e.isLastOne?"transparent":"#cecece"})),Ve=u.a.div(Je()),Xe=u.a.div(Ne()),Ze=function(e){var n=e.follower,t=n.followedObj.name,r=n.objId,a=n.lastUpdated,o=e.onToChapter,c=e.isLastOne;return i.a.createElement(Ye,{isLastOne:c,onClick:function(){return o(r)}},i.a.createElement(Ve,null,t),i.a.createElement(Xe,null,a))},$e=t(254),en=t(329),nn=t(991);function tn(){var e=Object(o.a)(["\n  width: 400px;\n  padding: 0 16px;\n  min-height: 300px;\n"]);return tn=function(){return e},e}function rn(){var e=Object(o.a)(["\n  font-size: 20px;\n  padding-bottom: 10px;\n  color: black;\n  font-weight: bold;\n"]);return rn=function(){return e},e}function an(){var e=Object(o.a)(["\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  margin-bottom: 20px;\n"]);return an=function(){return e},e}var on=u.a.div(an()),cn=u.a.div(rn()),un=u.a.div(tn()),ln=function(e){var n=e.bookId,t=e.onToChapter,r=e.userId,a=e.markChanged,o=e.setMarkChanged;return i.a.createElement(en.a,{gql:Ke.e,dataKey:"followers",hidePaginationInSinglePage:!0,paginationSecondary:!0,paginationSize:"mini",searchFields:{types:[g.k.CHAPTER],userId:r,chapterBookId:n,sort:"lastUpdated",order:"desc"},queryOptions:{onCompleted:function(){o(!1)}}},(function(e){var n=e.items,r=e.loading,o=e.refetch;return i.a.createElement($e.a,{loading:r},i.a.createElement(un,null,i.a.createElement(on,null,i.a.createElement(cn,null,"\u4e66\u7b7e")),T()(n,(function(e,r){var a=n.length===r+1;return i.a.createElement(Ze,{key:"book_mark_"+e.id,isLastOne:a,follower:e,onToChapter:t})})),i.a.createElement(nn.a,{refetchOnce:a,refetch:o,id:"refetch_menu_followers"})))}))},dn=t(998);function fn(){var e=Object(o.a)(["\n  cursor: pointer;\n  background-color: ",";\n  color: white;\n  height: 30px;\n  font-size: 16px;\n  font-weight: bold;\n  line-height: 30px;\n  pointer-events: ",";\n"]);return fn=function(){return e},e}function sn(){var e=Object(o.a)([""]);return sn=function(){return e},e}var pn=u.a.div(sn()),mn=u.a.div(fn(),qe.a,(function(e){return e.disabled?"none":""})),bn=function(e){var n=e.currentFollowed,t=e.bookId,r=e.children,a=e.refetch,o=Object(v.o)({currentFollowed:n,objId:t,objType:g.k.BOOK,onSwitchCompleted:function(){return a()},successMsg:{followed:"\u5df2\u6210\u529f\u52a0\u5165\u4e66\u67b6\uff01",unFollowed:"\u79fb\u51fa\u4e66\u67b6\u6210\u529f\uff01"},errorMsg:{followed:"\u52a0\u5165\u4e66\u67b6\u5931\u8d25\uff01",unFollowed:"\u79fb\u51fa\u4e66\u67b6\u5931\u8d25\uff01"}}),c=o.followed,u=o.mLoading,l=o.onSwitchFollow;return i.a.createElement(pn,null,r,i.a.createElement(mn,{disabled:u,onClick:l},c?"\u79fb\u51fa\u4e66\u67b6":"\u52a0\u5165\u4e66\u67b6"))},hn=t(986);function vn(){var e=Object(o.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  margin-bottom: 20px;\n"]);return vn=function(){return e},e}function gn(){var e=Object(o.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  width: 560px;\n  cursor: default;\n  padding-bottom: 20px;\n  min-height: 400px;\n"]);return gn=function(){return e},e}var xn=u.a.div(gn()),jn=u.a.div(vn()),En=function(e){var n=e.book,t=e.onToBook,r=e.userId;return i.a.createElement(en.a,{gql:Ke.e,dataKey:"followers",hidePaginationInSinglePage:!0,paginationSecondary:!0,paginationSize:"mini",searchFields:{types:[g.k.BOOK],userId:r,limit:12,sort:"lastUpdated",order:"desc"},queryOptions:{onCompleted:function(){}}},(function(e){var r=e.items,a=(e.loading,e.refetch);return i.a.createElement(xn,null,i.a.createElement(jn,null,i.a.createElement(bn,{bookId:n.id,refetch:a,currentFollowed:n.currentFollowed},i.a.createElement(dn.a,{onToBook:t,book:n}))),T()(r,(function(e){var n=Object(hn.a)(e.followedObj);return i.a.createElement(dn.a,{key:"book_shelf_book_"+e.id,book:n,size:.8,onToBook:t})})))}))};function On(){var e=Object(o.a)(["\n  position: absolute;\n  top: 0;\n  left: 40px;\n  width: 100px;\n  height: 100%;\n  background-color: ",";\n"]);return On=function(){return e},e}function yn(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  z-index: 100;\n"]);return yn=function(){return e},e}function Cn(){var e=Object(o.a)(["\n  margin-top: 2px;\n  font-size: 14px;\n  text-align: left;\n  margin-right: 4px;\n"]);return Cn=function(){return e},e}function kn(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  padding: 14px;\n  height: ","px;\n  position: relative;\n  color: ",";\n  &:hover {\n    color: #f02737;\n  }\n  background-color: ",";\n"]);return kn=function(){return e},e}var wn=78,Sn=u.a.div(kn(),wn,(function(e){return e.show?"#f02737":""}),(function(e){return e.show?e.activeColor:e.bgColor})),In=u.a.div(Cn()),Un=u.a.div(yn()),Tn=u.a.div(On(),(function(e){return e.bgColor})),Fn=function(e){var n=e.index,t=e.clickEleId,r=e.title,a=e.icon,o=e.showType,c=e.type,u=e.data,l=e.modalWidth,d=e.modalHeight,f=e.setShowType,s=e.onToChapter,p=e.onToBook,m=e.settings,b=e.onUpdateSettings,v=e.onResetSettings,g=e.switchBefore,x=e.markChanged,j=e.setMarkChanged,E=o===c,O=function(e,n,t){var r=t.onToChapter,a=t.onToBook,o=t.onUpdateSettings,c=t.onResetSettings,u=t.settings,l=t.markChanged,d=t.setMarkChanged,f=h()(n,"currentUser.id");switch(e){case"Catalogue":return i.a.createElement(q,{book:n,onToChapter:r});case"Bookshelf":return console.log("dat__________________AA",n),i.a.createElement(En,{book:n.book,userId:f,onToBook:a});case"Bookmark":return i.a.createElement(ln,{bookId:n.bookId,userId:f,onToChapter:r,markChanged:l,setMarkChanged:d});case"Settings":return i.a.createElement(He,{settings:u,onUpdateSettings:o,onResetSettings:c})}}(c,u,{onToChapter:s,onToBook:p,onUpdateSettings:b,onResetSettings:v,settings:m,markChanged:x,setMarkChanged:j}),y=h()(m,"theme"),C=y.lightColor,k=y.color;return i.a.createElement(Sn,{show:E,activeColor:C,bgColor:k},E&&i.a.createElement(Tn,{bgColor:C}),i.a.createElement(Un,{id:t,onClick:function(){return g?g((function(){return f(o?"":c)})):f(o?"":c)}},i.a.createElement(w.a,{size:"big",name:a}),i.a.createElement(In,null,r)),i.a.createElement(V,{width:l,height:d,show:E,bgColor:C,menuIndex:n,onClose:function(){return f("")}},O))},zn=t(75),Pn=t(194);function Rn(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]);return Rn=function(){return e},e}function _n(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  position: ",";\n  left: -90px;\n  top: ","px;\n"]);return _n=function(){return e},e}var Bn=u.a.div(_n(),(function(e){return e.toFixed,"absolute"}),(function(e){return e.toFixed?12:0})),Ln=u.a.div(Rn()),Mn=function(e){var n=e.chapter,t=e.onGoTo,a=e.settings,o=e.onUpdateSettings,u=e.onResetSettings,l=e.markChanged,d=e.setMarkChanged,f=Object(c.useState)(""),s=Object(r.a)(f,2),p=s[0],m=s[1],b=Object(c.useState)(!1),h=Object(r.a)(b,2),v=h[0],x=h[1];Object(c.useEffect)((function(){var e=function(){var e=window.pageYOffset;x(e>=140)};return document.addEventListener("scroll",e),function(){return document.removeEventListener("scroll",e)}}),[]);var j={settings:a,onUpdateSettings:o,onResetSettings:u};return i.a.createElement(Pn.a.Consumer,null,(function(e){var r=e.currentUser,a=function(e){return t("".concat(g.g).concat(e))};return i.a.createElement(Bn,{toFixed:v},i.a.createElement(Ln,{style:{position:v?"fixed":""}},i.a.createElement(Fn,Object.assign({index:0},j,{title:"\u76ee\u5f55",clickEleId:"catalogue",onToChapter:a,data:n.book,icon:"list ul",type:"Catalogue",showType:p,modalWidth:800,setShowType:m})),i.a.createElement(Fn,Object.assign({index:1},j,{title:"\u4e66\u67b6",data:{book:n.book,currentUser:r},icon:"industry",type:"Bookshelf",onToBook:function(e){return t("".concat(g.d).concat(e))},switchBefore:function(e){return zn.a.checkLogin(e)},showType:p,setShowType:m})),i.a.createElement(Fn,Object.assign({index:2},j,{title:"\u4e66\u7b7e",markChanged:l,setMarkChanged:d,switchBefore:function(e){return zn.a.checkLogin(e)},icon:"bookmark outline",type:"Bookmark",onToChapter:a,data:{bookId:n.book.id,currentUser:r},showType:p,setShowType:m})),i.a.createElement(Fn,Object.assign({index:3},j,{title:"\u8bbe\u7f6e",icon:"cog",type:"Settings",showType:p,setShowType:m}))))}))},An=t(332);function Dn(){var e=Object(o.a)(["\n  color: #99a2aa;\n  cursor: pointer;\n"]);return Dn=function(){return e},e}function Gn(){var e=Object(o.a)(["\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 20px;\n"]);return Gn=function(){return e},e}var Wn=u.a.div(Gn()),Hn=u.a.div(Dn()),Kn=function(e){var n=e.chapterId,t=e.currentReport,a=Object(c.useState)(t),o=Object(r.a)(a,2),u=o[0],l=o[1];return i.a.createElement(Wn,null,i.a.createElement(Hn,{onClick:function(){return An.a.show("Chapter",n,u,{reportCallback:function(e){return l(e)}})}},u?"\u5df2\u4e3e\u62a5":"\u4e3e\u62a5"))},qn=t(197),Nn=t(29);function Jn(){var e=Object(o.a)(["\n  position: absolute;\n  top: -4px;\n  right: 30px;\n  color: ",";\n  font-size: 12px;\n  cursor: pointer;\n"]);return Jn=function(){return e},e}var Qn=u.a.div(Jn(),(function(e){return e.followed?qe.a:"#ddd8cf"})),Yn=function(e){var n=e.currentFollowed,t=e.chapterId,r=e.setMarkChanged,a=Object(v.o)({currentFollowed:n,onSwitchCompleted:function(){Object(qn.a)("refetch_menu_followers"),Nn.a.setItem("markChanged",!0),r(!0)},objId:t,objType:g.k.CHAPTER,successMsg:{followed:"\u6dfb\u52a0\u4e66\u7b7e\u6210\u529f\uff01",unFollowed:"\u79fb\u9664\u4e66\u7b7e\u6210\u529f"},errorMsg:{followed:"\u6dfb\u52a0\u4e66\u7b7e\u5931\u8d25\uff01",unFollowed:"\u79fb\u9664\u4e66\u7b7e\u5931\u8d25"}}),o=a.followed,c=a.onSwitchFollow,u=a.mLoading;return i.a.createElement(Qn,{followed:o},i.a.createElement(w.a,{disabled:u,onClick:c,size:"huge",name:"bookmark"}))};function Vn(){var e=Object(o.a)(["\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  padding: 60px 40px 40px;\n  width: ","px;\n  margin-top: 60px;\n  background-color: ",";\n"]);return Vn=function(){return e},e}var Xn=u.a.div(Vn(),(function(e){return e.contentWidth}),(function(e){return e.bgColor})),Zn=function(e){var n=e.chapter,t=e.onGoTo,a=e.settings,o=e.onUpdateSettings,u=e.onResetSettings,l=Object(c.useState)(!1),d=Object(r.a)(l,2),f=d[0],s=d[1];if(!n)return null;var m=n.title,b=n.creator,v=n.lastUpdated,g=n.readCount,x=n.book,j=n.contentUrl,O=n.id,y=n.currentReport,C=n.currentFollowed,w=n.currentUpped,S=n.upCount,I=n.charsCount;return i.a.createElement(Xn,{contentWidth:a.contentWidth,bgColor:h()(a,"theme.color","#f6f1e7")},i.a.createElement(Yn,{key:C,chapterId:O,currentFollowed:C,setMarkChanged:s}),i.a.createElement(p,{title:m}),i.a.createElement(E,{key:w,chapterId:O,creator:b,bookName:x.name,lastUpdated:v,readCount:g,currentUpped:w,upCount:S,charsCount:I}),i.a.createElement(k,{settings:a,contentUrl:j}),i.a.createElement(Kn,{chapterId:O,currentReport:y}),i.a.createElement(Mn,{markChanged:f,setMarkChanged:s,settings:a,onUpdateSettings:o,onResetSettings:u,chapter:n,onGoTo:t}))},$n=t(161),et=t(116);function nt(){var e=Object(o.a)(["\n  font-size: 24px;\n"]);return nt=function(){return e},e}function tt(){var e=Object(o.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 60px;\n  flex: 1;\n  cursor: pointer;\n  opacity: ",";\n  &:hover {\n    background-color: rgba(246, 241, 231, 0.6);\n    color: #f02737;\n  }\n  pointer-events: ",";\n"]);return tt=function(){return e},e}var rt=u.a.div(tt(),(function(e){return e.disabled?.6:1}),(function(e){return e.disabled?"none":""})),at=u.a.div(nt()),ot=function(e){var n=e.text,t=e.disabled,r=e.onClick;return i.a.createElement(rt,{onClick:r,disabled:t},i.a.createElement(at,null,n))},ct=t(256),it=t.n(ct);function ut(){var e=Object(o.a)(["\n  display: flex;\n  width: 800px;\n  justify-content: space-around;\n  align-items: center;\n  margin-top: 20px;\n  background-color: #f6f1e7;\n"]);return ut=function(){return e},e}var lt=u.a.div(ut()),dt=function(e){var n=e.chapter,t=e.onToChapter,r=h()(n,"book.chapters",[]),a=it()(r,(function(e){return e.id===n.id}));return i.a.createElement(lt,null,i.a.createElement(ot,{text:"\u4e0a\u4e00\u7ae0",onClick:function(){return t(r[a-1].id)},disabled:0===a}),i.a.createElement(pe,{height:"26px",bg:"#cecece"}),i.a.createElement(ot,{text:"\u76ee\u5f55",onClick:function(){return document.getElementById("catalogue").click()}}),i.a.createElement(pe,{height:"26px",bg:"#cecece"}),i.a.createElement(ot,{text:"\u4e0b\u4e00\u7ae0",onClick:function(){return t(r[a+1].id)},disabled:a===r.length-1}))},ft=t(990);function st(){var e=Object(o.a)(["\n  background-color: #f6f1e7;\n  margin-top: 20px;\n  min-height: 300px;\n  padding: 20px;\n"]);return st=function(){return e},e}function pt(){var e=Object(o.a)(["\n  text-align: left;\n  font-size: 16px;\n  font-weight: bold;\n  margin-bottom: 10px;\n"]);return pt=function(){return e},e}var mt=u.a.div(pt()),bt=u.a.div(st()),ht=function(e){var n=e.chapterId;return i.a.createElement(bt,null,i.a.createElement(mt,null,"\u8bc4\u8bba"),i.a.createElement(ft.a,{type:g.k.CHAPTER,objId:n}))},vt=t(994),gt=t(63);function xt(){var e=Object(o.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  background-color: #eae5d9;\n"]);return xt=function(){return e},e}function jt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Et(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?jt(t,!0).forEach((function(n){Object(a.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):jt(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Ot(){var e=Object(o.a)(["\n  padding-bottom: 60px;\n"]);return Ot=function(){return e},e}var yt=u.a.div(Ot()),Ct={theme:{color:"#F6F1E7",lightColor:"#FAF9F3"},fontFamily:"SimSun",fontSize:18,contentWidth:800},kt=function(e){var n=e.chapter,t=e.refetchChapter,o=e.onGoTo,u=(e.loading,e.setGlobalBgColor),l=function(e){var n=e.chapter,t=e.setGlobalBgColor;Object(v.i)({objId:n.id,objType:g.k.CHAPTER});var o=Nn.a.getItem("booksRead");Nn.a.setItem(g.e,Et({},o,Object(a.a)({},n.book.id,n.id)));var i=Nn.a.getItem(g.h)||Ct,u=Object(c.useReducer)((function(e,n){var t=Et({},e,Object(a.a)({},n.key,n.value));return"RESET"===n.type&&(t=Ct),Nn.a.setItem(g.h,t),t}),i),l=Object(r.a)(u,2),d=l[0],f=l[1],s=Nn.a.getItem("".concat(g.k.CHAPTER).concat(n.id).concat(g.x));return Object(c.useEffect)((function(){return t("#eae5d9"),function(){t("white")}}),[]),{settings:d,onUpdateSettings:function(e,n){f({key:e,value:n})},onResetSettings:function(){f({type:"RESET"})},refetchNow:s}}({chapter:n,setGlobalBgColor:u}),d=l.settings,f=l.onUpdateSettings,s=l.onResetSettings,p=l.refetchNow;return i.a.createElement(vt.a,{openedObj:n.book},i.a.createElement(gt.a,{title:"".concat(n.title,"_\u7ae0\u8282"),metaKeywords:"".concat(n.title,"_").concat(n.subtitle,"_\u7ae0\u8282")}),i.a.createElement(yt,null,i.a.createElement(Zn,{settings:d,onUpdateSettings:f,onResetSettings:s,chapter:n,onGoTo:o}),i.a.createElement(dt,{chapter:n,onToChapter:function(e){return o("".concat(g.g).concat(e))}}),i.a.createElement(ht,{chapterId:n.id}),i.a.createElement(nn.a,{refetchOnce:p,refetch:function(){t(),Nn.a.setItem("".concat(g.k.CHAPTER).concat(n.id).concat(g.x),!1)}})))},wt=u.a.div(xt());n.default=function(e){e.history,e.location;var n=e.onGoTo;return i.a.createElement(Pn.a.Consumer,null,(function(e){var t=e.setGlobalBgColor;return i.a.createElement(wt,null,i.a.createElement($n.a,{autoLoading:!0,id:Object(et.a)(),itemPath:"chapter",gql:Ke.c},(function(e){var r=e.loading,a=e.refetch,o=e.item;return i.a.createElement(kt,{setGlobalBgColor:t,loading:r,chapter:o,refetchChapter:a,onGoTo:n})})))}))}},985:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var r="#f02737"},986:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var r=function(e){return n=e.data,JSON.parse(n);var n}},987:function(e,n,t){"use strict";var r=t(10),a=t(1),o=t(0),c=t.n(o),i=t(2),u=t(60),l=t(33),d=t(69),f=t(61),s=t(332);function p(){var e=Object(a.a)([""]);return p=function(){return e},e}function m(){var e=Object(a.a)(["\n  cursor: pointer;\n  margin-right: 4px !important;\n  margin-bottom: 4px !important;\n"]);return m=function(){return e},e}function b(){var e=Object(a.a)(["\n  cursor: pointer;\n  font-size: 10px;\n  margin-right: 10px;\n"]);return b=function(){return e},e}function h(){var e=Object(a.a)(["\n  display: flex;\n  align-items: center;\n"]);return h=function(){return e},e}function v(){var e=Object(a.a)(["\n  cursor: pointer;\n  margin-left: 10px;\n"]);return v=function(){return e},e}function g(){var e=Object(a.a)(["\n  margin-right: 10px;\n"]);return g=function(){return e},e}function x(){var e=Object(a.a)(["\n  display: flex;\n  align-items: center;\n  width: 100%;\n  justify-content: space-between;\n  margin-top: 10px;\n  color: #99a2aa;\n"]);return x=function(){return e},e}var j=i.a.div(x()),E=i.a.div(g()),O=i.a.div(v()),y=i.a.div(h()),C=i.a.div(b()),k=Object(i.a)(u.a)(m()),w=i.a.div(p());n.a=function(e){var n=e.commentId,t=e.dateCreated,a=e.onReply,i=function(e){var n=e.upCount,t=e.currentUpped,a=e.currentReport,c=Object(o.useState)(n),i=Object(r.a)(c,2),u=i[0],s=i[1],p=Object(o.useState)(a),m=Object(r.a)(p,2),b=m[0],h=m[1],v=Object(o.useState)(t),g=Object(r.a)(v,2),x=g[0],j=g[1],E=Object(l.a)(d.n,{onCompleted:function(e){var n=e.switchUpComment;s(n.upCount),j(n.currentUpped)},onError:function(){return f.a.error("\u70b9\u8d5e\u5931\u8d25")}}),O=Object(r.a)(E,2),y=O[0],C=O[1];C.data,C.loading;return{uCount:u,setUCount:s,cUpped:x,setCUpped:j,switchUpComment:y,report:b,setReport:h}}({upCount:e.upCount,currentUpped:e.currentUpped,currentReport:e.currentReport}),u=i.uCount,p=i.cUpped,m=i.switchUpComment,b=i.report,h=i.setReport;return c.a.createElement(j,null,c.a.createElement(y,null,c.a.createElement(E,null,t),c.a.createElement(k,{color:p?"red":"",onClick:function(e){e.stopPropagation(),m({variables:{commentId:n}})},name:p?"thumbs up":"thumbs up outline"}),u>0&&c.a.createElement(w,null,u),a&&c.a.createElement(O,{onClick:a},"\u56de\u590d")),c.a.createElement(C,{onClick:function(e){e.stopPropagation(),s.a.show("Comment",n,b,{reportCallback:function(e){return h(e)}})}},b?"\u5df2\u4e3e\u62a5":"\u4e3e\u62a5"))}},989:function(e,n,t){"use strict";var r=t(28),a=t(1),o=t(0),c=t.n(o),i=t(60),u=t(962),l=t(2);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(t,!0).forEach((function(n){Object(r.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(){var e=Object(a.a)([""]);return s=function(){return e},e}function p(){var e=Object(a.a)(["\n  display: flex;\n  margin-left: 20px;\n  cursor: pointer;\n"]);return p=function(){return e},e}var m=l.a.div(p()),b=l.a.div(s());n.a=function(e){var n=e.icon,t=e.mf,r=e.boxStyle,a=e.iconStyle,o=e.text,l=e.hintText,d=e.onClick,s=c.a.createElement(m,{onClick:d,style:f({},r,{marginLeft:t})},c.a.createElement(i.a,{style:a,name:n}),c.a.createElement(b,null,o));return l?c.a.createElement(u.a,{content:l,trigger:s}):s}},990:function(e,n,t){"use strict";var r=t(1),a=t(0),o=t.n(a),c=t(2),i=t(329),u=t(105),l=t(10),d=t(960),f=t(192),s=t(70),p=t(5),m=t.n(p),b=t(140),h=t(75);function v(){var e=Object(r.a)([""]);return v=function(){return e},e}function g(){var e=Object(r.a)(["\n  flex: 1;\n  padding: 10px;\n  height: 65px;\n  outline: none;\n  border-radius: 6px;\n  &:focus {\n    -moz-outline-radius: 6px;\n    border: 1px solid lightskyblue;\n  }\n"]);return g=function(){return e},e}function x(){var e=Object(r.a)(["\n  width: 100%;\n  display: flex;\n"]);return x=function(){return e},e}function j(){var e=Object(r.a)(["\n  width: 80px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n"]);return j=function(){return e},e}function E(){var e=Object(r.a)(["\n  display: flex;\n  width: 100%;\n  height: 70px;\n  margin-bottom: 30px;\n"]);return E=function(){return e},e}var O=c.a.div(E()),y=c.a.div(j()),C=c.a.div(x()),k=Object(c.a)(d.a)(g()),w=Object(c.a)(f.a)(v()),S=function(e){var n=e.objId,t=e.commentType,r=e.currentUser,c=e.refetchComments,i=e.repliedCommentId,u=e.parentId,d=e.replyPlaceholder,f=e.saveCallback,p=Object(a.useState)(""),v=Object(l.a)(p,2),g=v[0],x=v[1],j=Object(b.c)({refetch:c,commentType:t,repliedCommentId:i,parentId:u,objId:n,saveCallback:f,clearForm:function(){return x("")}}),E=j.mLoading,S=j.onSaveComment;return o.a.createElement(O,null,o.a.createElement(y,null,o.a.createElement(s.a,{width:54,size:"big",url:m()(r,"avatar.url")})),o.a.createElement(C,null,o.a.createElement(k,{onInput:function(e,n){var t=n.value;return x(t)},onFocus:function(){return h.a.checkLogin()},maxLength:255,rows:4,placeholder:d,value:g}),o.a.createElement(w,{loading:E,onClick:function(){return h.a.checkLogin((function(){return S(g)}))},style:{marginLeft:10},primary:!0},"\u53d1\u5e03")))},I=t(18),U=t.n(I),T=t(89),F=t(987),z=function(e){var n=e.commentType,t=e.objId,r=e.currentUser,a=e.refetchComments,c=e.repliedCommentId,i=e.parentId,u=e.replyPlaceholder,l=e.saveCallback;return o.a.createElement(S,{commentType:n,objId:t,saveCallback:l,repliedCommentId:c,currentUser:r,parentId:i,refetchComments:a,replyPlaceholder:u})},P=t(34),R=t.n(P),_=t(196);function B(){var e=Object(r.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n"]);return B=function(){return e},e}function L(){var e=Object(r.a)(["\n  width: 40px;\n"]);return L=function(){return e},e}function M(){var e=Object(r.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  margin-bottom: 20px;\n"]);return M=function(){return e},e}function A(){var e=Object(r.a)(["\n  color: #00a1d6;\n  margin-left: 10px;\n  margin-right: 10px;\n  cursor: pointer;\n"]);return A=function(){return e},e}function D(){var e=Object(r.a)(["\n  font-size: 14px;\n  margin-left: 10px;\n"]);return D=function(){return e},e}function G(){var e=Object(r.a)(["\n  text-align: left;\n"]);return G=function(){return e},e}function W(){var e=Object(r.a)(["\n  color: #6d757a;\n  font-size: 16px;\n  font-weight: bold;\n  text-align: left;\n  cursor: pointer;\n"]);return W=function(){return e},e}function H(){var e=Object(r.a)(["\n  margin-bottom: 10px;\n  display: flex;\n  align-items: center;\n"]);return H=function(){return e},e}function K(){var e=Object(r.a)(["\n  width: 100%;\n  display: flex;\n"]);return K=function(){return e},e}var q=c.a.div(K()),N=c.a.div(H()),J=c.a.div(W()),Q=c.a.div(G()),Y=c.a.div(D()),V=c.a.span(A()),X=function(e){var n=e.creator,t=e.repliedComment;return o.a.createElement(N,null,o.a.createElement(J,null,Object(T.a)(n,["nickname","username"])),t&&o.a.createElement(Y,null,"\u56de\u590d",o.a.createElement(V,null,"@",Object(T.a)(t.creator,["nickname","username"])),":"))},Z=c.a.div(M()),$=c.a.div(L()),ee=c.a.div(B()),ne=function(e){var n=e.item,t=e.currentUser,r=e.objId,a=e.type,c=e.refchComments,i=e.parentId,u=e.onSaveCallback,l=n.creator,d=n.content,f=n.dateCreated,p=n.currentUpped,h=n.upCount,v=n.currentReport,g=Object(b.k)({repliedComment:n}),x=g.showReplyForm,j=g.setShowReplyForm,E=g.replyPlaceholder;return o.a.createElement(q,null,o.a.createElement($,null,o.a.createElement(s.a,{size:"small",width:30,avatar:m()(l,"avatar.url")})),o.a.createElement(ee,null,o.a.createElement(Z,null,o.a.createElement(X,{creator:l,repliedComment:n.repliedComment}),o.a.createElement(Q,null,d),o.a.createElement(F.a,{onReply:function(){return j(!x)},dateCreated:f,currentUpped:p,upCount:h,commentId:n.id,currentReport:v})),x&&o.a.createElement(z,{saveCallback:u,replyPlaceholder:E,parentId:i,currentUser:t,commentType:a,objId:r,refetchComments:c,repliedCommentId:n.id})))};function te(){var e=Object(r.a)(["\n  cursor: pointer;\n  color: #00a1d6;\n"]);return te=function(){return e},e}function re(){var e=Object(r.a)(["\n  text-align: left;\n  color: #6d757a;\n  font-size: 12px;\n"]);return re=function(){return e},e}function ae(){var e=Object(r.a)([""]);return ae=function(){return e},e}var oe=c.a.div(ae()),ce=c.a.div(re()),ie=c.a.span(te()),ue=function(e){var n=e.commentsCount,t=e.onCheckMore;return n<3?null:o.a.createElement(ce,null,"\u5171",o.a.createElement("b",null,n),"\u6761\u56de\u590d\uff0c",o.a.createElement(ie,{onClick:t},"\u70b9\u51fb\u67e5\u770b"))},le=function(e){var n=e.currentUser,t=e.objId,r=e.type,c=e.parentId,i=e.onCheckMore,u=function(e){var n=e.item,t=n.last3Comments,r=Object(a.useState)(t),o=Object(l.a)(r,2),c=o[0],i=o[1],u=Object(a.useState)(n.subCommentsCount),d=Object(l.a)(u,2);return{subComments:c,subCommentsCount:d[0],setSubComments:i,setSubCommentsCount:d[1]}}({item:e.item}),d=u.subComments,f=u.subCommentsCount,s=u.setSubComments,p=u.setSubCommentsCount;return o.a.createElement(oe,null,U()(d,(function(e){return o.a.createElement(ne,{key:"sub_comment_"+e.id,item:e,type:r,currentUser:n,objId:t,onSaveCallback:function(e){p(f+1),s([e].concat(Object(_.a)(d)))},parentId:c})})),o.a.createElement(ue,{commentsCount:f,onCheckMore:i}))};function de(){var e=Object(r.a)([""]);return de=function(){return e},e}function fe(){var e=Object(r.a)(["\n  .paginationWrapper {\n    display: flex;\n    justify-content: flex-start;\n  }\n"]);return fe=function(){return e},e}var se=c.a.div(fe()),pe=c.a.div(de()),me=function(e){var n=e.objId,t=e.type,r=e.currentUser,a=e.parentId;return o.a.createElement(se,null,o.a.createElement(i.a,{searchFields:{objId:n,parentId:a,types:[t],isUserQuery:!0,sort:"dateCreated",order:"asc"},hidePaginationInSinglePage:!0,gql:u.d,paginationSecondary:!0,paginationSize:"mini",dataKey:"comments",limit:10},(function(e){e.loading,e.count;var c=e.items,i=e.refetch;return o.a.createElement(pe,null,U()(c,(function(e){return o.a.createElement(ne,{key:"sub_comment_"+e.id,refchComments:i,currentUser:r,objId:n,item:e,type:t,parentId:a})})))})))};function be(){var e=Object(r.a)(["\n  margin-bottom: 20px;\n"]);return be=function(){return e},e}var he=c.a.div(be()),ve=function(e){var n=e.item,t=e.currentUser,r=e.objId,c=e.type,i=function(e){e.item;var n=Object(a.useState)(!1),t=Object(l.a)(n,2);return{checkMore:t[0],setCheckMore:t[1]}}({item:n}),u=i.checkMore,d=i.setCheckMore;return R()(n.last3Comments)?null:o.a.createElement(he,null,u?o.a.createElement(me,{objId:r,currentUser:t,type:c,parentId:n.id}):o.a.createElement(le,{objId:r,type:c,item:n,parentId:n.id,onCheckMore:function(){return d(!0)},currentUser:t}))};function ge(){var e=Object(r.a)(["\n  text-align: left;\n"]);return ge=function(){return e},e}function xe(){var e=Object(r.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  margin-bottom: 20px;\n"]);return xe=function(){return e},e}function je(){var e=Object(r.a)(["\n  color: #6d757a;\n  font-size: 16px;\n  font-weight: bold;\n  text-align: left;\n"]);return je=function(){return e},e}function Ee(){var e=Object(r.a)(["\n  margin-bottom: 10px;\n"]);return Ee=function(){return e},e}function Oe(){var e=Object(r.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n"]);return Oe=function(){return e},e}function ye(){var e=Object(r.a)(["\n  width: 80px;\n"]);return ye=function(){return e},e}function Ce(){var e=Object(r.a)(["\n  width: 100%;\n  display: flex;\n  margin-bottom: 24px;\n  padding-bottom: 20px;\n  border-bottom: 1px solid\n    ",";\n"]);return Ce=function(){return e},e}var ke=c.a.div(Ce(),(function(e){return e.isLastOne?"transparent":"#e5e9ef"})),we=c.a.div(ye()),Se=c.a.div(Oe()),Ie=c.a.div(Ee()),Ue=c.a.div(je()),Te=function(e){var n=e.creator;return o.a.createElement(Ie,null,o.a.createElement(Ue,null,Object(T.a)(n,["nickname","username"])))},Fe=c.a.div(xe()),ze=c.a.div(ge()),Pe=function(e){var n=e.item,t=e.currentUser,r=e.objId,a=e.type,c=e.refetchComments,i=e.isLastOne,u=n.creator,d=n.content,f=n.dateCreated,p=n.id,h=n.currentUpped,v=n.upCount,g=n.currentReport,x=Object(b.k)({repliedComment:n}),j=x.showReplyForm,E=x.setShowReplyForm,O=x.replyPlaceholder,y=Object(b.j)(),C=Object(l.a)(y,2),k=C[0],w=C[1];return o.a.createElement(ke,{key:k,isLastOne:i},o.a.createElement(we,null,o.a.createElement(s.a,{size:"large",width:50,avatar:m()(u,"avatar.url")})),o.a.createElement(Se,null,o.a.createElement(Fe,null,o.a.createElement(Te,{creator:u}),o.a.createElement(ze,null,d),o.a.createElement(F.a,{onReply:function(){return E(!j)},dateCreated:f,currentUpped:h,upCount:v,commentId:p,currentReport:g})),o.a.createElement(ve,{type:a,currentUser:t,objId:r,item:n}),j&&o.a.createElement(z,{refetchComments:function(){c().then((function(e){w()}))},replyPlaceholder:O,parentId:p,currentUser:t,commentType:a,objId:r})))},Re=t(194);function _e(){var e=Object(r.a)(["\n  margin-bottom: 30px;\n"]);return _e=function(){return e},e}function Be(){var e=Object(r.a)(["\n  .paginationWrapper {\n    display: flex;\n    justify-content: flex-start;\n  }\n"]);return Be=function(){return e},e}var Le=c.a.div(Be()),Me=c.a.div(_e());n.a=function(e){var n=e.objId,t=e.type;return o.a.createElement(Re.a.Consumer,null,(function(e){var r=e.currentUser;return o.a.createElement(Le,null,o.a.createElement(i.a,{searchFields:{objId:n,types:[t],isUserQuery:!0,searchParentComment:!0},hidePaginationInSinglePage:!0,gql:u.d,paginationSize:"mini",paginationSecondary:!0,dataKey:"comments",limit:10},(function(e){e.loading,e.count;var a=e.items,c=e.refetch;return o.a.createElement(Me,null,o.a.createElement(S,{objId:n,commentType:t,currentUser:r,refetchComments:c}),U()(a,(function(e,i){return o.a.createElement(Pe,{key:"comment_"+e.id,item:e,isLastOne:i+1===a.length,objId:n,type:t,refetchComments:c,currentUser:r})})))})))}))}},991:function(e,n,t){"use strict";var r=t(1),a=t(0),o=t.n(a);function c(){var e=Object(r.a)([""]);return c=function(){return e},e}var i=t(2).a.div(c());n.a=function(e){var n=e.id,t=e.refetch,r=e.refetchOnce;return Object(a.useEffect)((function(){r&&t&&t()}),[]),o.a.createElement(i,{id:n,onClick:function(){t()}})}},994:function(e,n,t){"use strict";var r=t(0),a=t.n(r),o=t(194),c=function(e){var n=e.children,t=e.setOpenedObj,o=e.openedObj;return Object(r.useEffect)((function(){return t&&t(o),function(){return t(null)}}),[o]),a.a.createElement(a.a.Fragment,null,n)};n.a=function(e){var n=e.openedObj,t=e.children;return a.a.createElement(o.a.Consumer,null,(function(e){e.onGoTo;var r=e.setOpenedObj;return a.a.createElement(c,{setOpenedObj:r,openedObj:n,children:t})}))}},998:function(e,n,t){"use strict";var r=t(1),a=t(0),o=t.n(a),c=t(2),i=t(985);function u(){var e=Object(r.a)(["\n  margin-top: 4px;\n  margin-bottom: 6px;\n  width: 100px;\n"]);return u=function(){return e},e}function l(){var e=Object(r.a)(["\n  width: ","px;\n  height: ","px;\n  border: 1px solid #cecece;\n"]);return l=function(){return e},e}function d(){var e=Object(r.a)(["\n  width: ","px;\n  display: flex;\n  color: gray;\n  cursor: pointer;\n  &:hover {\n    color: ",";\n    .cover {\n      box-shadow: 0 8px 20px #bbb;\n      -webkit-box-shadow: 0 8px 20px #bbb;\n    }\n  }\n  flex-direction: column;\n  align-items: center;\n\n  margin-left: 10px;\n  margin-right: 10px;\n"]);return d=function(){return e},e}var f=c.a.div(d(),(function(e){return 150*e.size}),i.a),s=c.a.img(l(),(function(e){return 150*e.size}),(function(e){return 206*e.size})),p=c.a.div(u());n.a=function(e){var n=e.book,t=e.size,r=void 0===t?1:t,a=e.onToBook,c=n.id,i=n.name,u=n.cover.url,l=n.creator;l.id,l.nickname;return o.a.createElement(f,{onClick:function(){return a?a(c):null},size:r},o.a.createElement(s,{size:r,className:"cover",src:u}),o.a.createElement(p,{size:r},i))}}}]);
//# sourceMappingURL=5.c26c8d40.chunk.js.map