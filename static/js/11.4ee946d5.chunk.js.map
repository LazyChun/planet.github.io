{"version":3,"sources":["components/pages/program/programSegaments/Description.js","components/pages/book/bookSegaments/InfoHeader.js","components/pages/book/bookSegaments/InfoFooter.js","components/pages/book/bookSegaments/Tags.js","components/pages/book/bookSegaments/Rating.js","components/pages/book/bookSegaments/BasicInfo.js","components/pages/book/bookSegaments/Chapters.js","components/pages/book/bookSegaments/BookComments.js","components/pages/book/Book.js","components/common/comment/segaments/CommentActions.js","components/common/comment/segaments/CommentForm.js","components/common/comment/segaments/ReplyForm.js","components/common/comment/segaments/SubComment.js","components/common/comment/segaments/LastSubComments.js","components/common/comment/segaments/SubCommentList.js","components/common/comment/segaments/SubComments.js","components/common/comment/Comment.js","components/common/comment/Comments.js"],"names":["Container","styled","div","Content","Description","descriptionUrl","useState","description","setDescription","useEffect","onUpdateValue","str","getDataFromUrl","dangerouslySetInnerHTML","__html","Title","Author","InfoHeader","title","author","username","FooterButton","Button","InfoFooter","onGoTo","book","id","chapters","currentFollowed","currentUpped","upCount","lastReadChapterId","PersistStorage","getItemRO","BOOKS_READ","onToChapter","CHAPTER","_head","_find","c","useSwitchFollow","objId","objType","OBJ_TYPES","BOOK","successMsg","followed","unFollowed","errorMsg","followLoading","mLoading","onSwitchFollow","useSwitchUp","upped","upLoading","onSwitchUp","bookUpCount","hasNoChapters","_isEmpty","useFooter","disabled","onClick","primary","Space","width","loading","basic","color","content","icon","Icon","style","name","label","pointing","TagBox","props","isSystem","TagText","TagItem","tag","type","Tags","tags","_map","key","Num","CommentCount","Rating","bookId","currentRating","onRefetchBook","useRating","onRateCompleted","rating","onRate","averageRating","parseFloat","_get","className","size","e","maxRating","Cover","img","ContentLeft","TopContent","ContentRight","BasicInfo","refetchBook","src","Header","ChapterItemBox","ChapterText","ChapterItem","chapter","RowBox","isLastOne","Row","row","Chapters","rows","_chunk","length","index","BookComments","Comments","BookBox","_Book","PageTitle","metaKeywords","intro","Book","history","location","getRouteId","autoLoading","itemPath","gql","GET_BOOK","refetch","item","DateText","ReplyButton","MainActionsBox","ReportButton","ThumbsUp","UpCount","CommentActions","commentId","dateCreated","onReply","currentReport","uCount","setUCount","report","setReport","cUpped","setCUpped","useMutation","SWITCH_UP_COMMENT","onCompleted","data","switchUpComment","onError","ModalHint","error","useCommentActions","stopPropagation","variables","ReportHint","show","reportCallback","LeftBox","ContentBox","TextInput","TextArea","SendButton","CommentForm","commentType","currentUser","refetchComments","repliedCommentId","parentId","replyPlaceholder","saveCallback","setContent","useComment","clearForm","onSaveComment","Avatar","url","onInput","value","onFocus","LoginHint","checkLogin","maxLength","placeholder","marginLeft","ReplyForm","UserInfoBox","Name","ReplyBox","ReplyUser","span","UserInfo","creator","repliedComment","_getByRank","ContentInfo","AvatarBox","SubComment","refchComments","onSaveCallback","useReplyForm","showReplyForm","setShowReplyForm","avatar","CheckMoreBox","ClickMore","CheckMoreButton","commentsCount","onCheckMore","LastSubComments","last3Comments","subComments","setSubComments","subCommentsCount","setSubCommentsCount","useLastSubComments","subComment","comment","CommentsBox","SubCommentList","PaginationQueryList","searchFields","types","isUserQuery","sort","order","hidePaginationInSinglePage","GET_COMMENTS","paginationSecondary","paginationSize","dataKey","limit","count","items","SubComments","checkMore","setCheckMore","useSubComments","CommentItem","useRefresh","refresh","onRefresh","then","res","App","Consumer","searchParentComment","Comment"],"mappings":"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","file":"static/js/11.4ee946d5.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { getDataFromUrl } from \"../../../utils/urlData\";\r\n\r\nconst Container = styled.div`\r\n  margin-top: 20px;\r\n  text-align: left;\r\n  margin-bottom: 20px;\r\n  overflow-y: hidden;\r\n`;\r\nconst Content = styled.div`\r\n  margin-top: 20px;\r\n  font-size: 14px;\r\n  color: #262626;\r\n`;\r\n\r\nconst Description = ({ descriptionUrl }) => {\r\n  const [description, setDescription] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    let onUpdateValue = str => setDescription(str);\r\n    getDataFromUrl(descriptionUrl, \"data.content\", onUpdateValue);\r\n    return () => {\r\n      onUpdateValue = null;\r\n    };\r\n  }, []);\r\n  return (\r\n    <Container>\r\n      <Content dangerouslySetInnerHTML={{ __html: description }} />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Description;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: flex-end;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  font-size: 28px;\r\n  font-weight: bold;\r\n  line-height: 28px;\r\n`;\r\n\r\nconst Author = styled.div`\r\n  font-size: 14px;\r\n  margin-left: 12px;\r\n`;\r\n\r\nconst InfoHeader = ({ title, author }) => {\r\n  return (\r\n    <Container>\r\n      <Title>{title}</Title>\r\n      <Author>{author.username}&nbsp;&nbsp;著</Author>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default InfoHeader;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Button, Icon } from \"semantic-ui-react\";\r\nimport styled from \"styled-components\";\r\nimport Space from \"../../../common/Space\";\r\nimport PersistStorage from \"../../../utils/PersistStorage\";\r\nimport { BOOKS_READ, CHAPTER, OBJ_TYPES } from \"../../../common/CONSULT\";\r\nimport _find from \"lodash/find\";\r\nimport _head from \"lodash/head\";\r\nimport _isEmpty from \"lodash/isEmpty\";\r\nimport { useSwitchFollow, useSwitchUp } from \"../../../common/hooks\";\r\n\r\nconst FooterButton = styled(Button)`\r\n  width: 160px;\r\n  height: 40px;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst useFooter = ({ onGoTo, book }) => {\r\n  const { id, chapters, currentFollowed, currentUpped, upCount } = book;\r\n  const booksRead = PersistStorage.getItemRO(BOOKS_READ);\r\n  const lastReadChapterId = booksRead[id];\r\n  let onToChapter = () => onGoTo(`${CHAPTER}${_head(chapters)[\"id\"]}`);\r\n  if (lastReadChapterId && _find(chapters, c => c.id === lastReadChapterId)) {\r\n    onToChapter = () => onGoTo(`${CHAPTER}${lastReadChapterId}`);\r\n  }\r\n  const { followed, mLoading: followLoading, onSwitchFollow } = useSwitchFollow(\r\n    {\r\n      currentFollowed,\r\n      objId: id,\r\n      objType: OBJ_TYPES.BOOK,\r\n      successMsg: { followed: \"加入书架成功！\", unFollowed: \"移除书架成功\" },\r\n      errorMsg: { followed: \"加入书架失败！\", unFollowed: \"移除书架失败\" }\r\n    }\r\n  );\r\n  const {\r\n    upped,\r\n    mLoading: upLoading,\r\n    onSwitchUp,\r\n    upCount: bookUpCount\r\n  } = useSwitchUp({\r\n    currentUpped,\r\n    upCount,\r\n    objId: id,\r\n    objType: OBJ_TYPES.BOOK\r\n  });\r\n  return {\r\n    onToChapter,\r\n    followed,\r\n    followLoading,\r\n    onSwitchFollow,\r\n    upped,\r\n    upLoading,\r\n    onSwitchUp,\r\n    bookUpCount,\r\n    hasNoChapters: _isEmpty(chapters)\r\n  };\r\n};\r\n\r\nconst InfoFooter = ({ onGoTo, book }) => {\r\n  const {\r\n    onToChapter,\r\n    followed,\r\n    followLoading,\r\n    onSwitchFollow,\r\n    upped,\r\n    upLoading,\r\n    onSwitchUp,\r\n    bookUpCount,\r\n    hasNoChapters\r\n  } = useFooter({ onGoTo, book });\r\n\r\n  return (\r\n    <Container>\r\n      <FooterButton disabled={hasNoChapters} onClick={onToChapter} primary>\r\n        阅读\r\n      </FooterButton>\r\n      <Space width={\"16px\"} />\r\n      <FooterButton\r\n        onClick={onSwitchFollow}\r\n        loading={followLoading}\r\n        basic\r\n        color={followed ? \"grey\" : \"blue\"}\r\n        content={followed ? \"已加入书架\" : \"加入书架\"}\r\n      />\r\n      <Space width={\"16px\"} />\r\n      <FooterButton\r\n        color={upped ? \"grey\" : \"red\"}\r\n        onClick={onSwitchUp}\r\n        loading={upLoading}\r\n        content={upped ? \"已喜欢\" : \"喜欢\"}\r\n        icon={\r\n          <Icon style={{ color: upped ? \"red\" : \"white\" }} name={\"heart\"} />\r\n        }\r\n        label={{\r\n          basic: true,\r\n          color: upped ? \"grey\" : \"red\",\r\n          pointing: \"left\",\r\n          content: bookUpCount\r\n        }}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default InfoFooter;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _map from \"lodash/map\";\r\n\r\nconst TagBox = styled.div`\r\n  background-color: white;\r\n  min-width: 54px;\r\n  height: 26px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 13px;\r\n  margin-right: 16px;\r\n  padding: 0 10px;\r\n  cursor: pointer;\r\n  border: 1px solid ${props => (props.isSystem ? \"#9fadc9\" : \"#ffb0b4\")};\r\n  &:hover {\r\n    border: 1px solid lightblue;\r\n  }\r\n`;\r\n\r\nconst TagText = styled.div`\r\n  font-size: 16px;\r\n  color: ${props => (props.isSystem ? \"#3f5a93\" : \"#bf2c24\")};\r\n  &:hover {\r\n    font-size: 18px;\r\n  }\r\n`;\r\n\r\nconst TagItem = ({ tag }) => {\r\n  const isSystem = tag.type === \"System\";\r\n  return (\r\n    <TagBox isSystem={isSystem}>\r\n      <TagText>{tag.name}</TagText>\r\n    </TagBox>\r\n  );\r\n};\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  width: 100%;\r\n  justify-content: flex-start;\r\n  margin-top: 8px;\r\n`;\r\n\r\nconst Tags = ({ tags }) => {\r\n  return (\r\n    <Container>\r\n      {_map(tags, tag => {\r\n        return <TagItem key={\"bookTag\" + tag.id} tag={tag} />;\r\n      })}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Tags;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Button, Rating as StarRating } from \"semantic-ui-react\";\r\nimport styled from \"styled-components\";\r\nimport _get from \"lodash/get\";\r\nimport { useRating } from \"../../../common/hooks\";\r\nimport { OBJ_TYPES } from \"../../../common/CONSULT\";\r\n\r\nconst Container = styled.div`\r\n  margin-right: 20px;\r\n  margin-top: 18px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n  .star {\r\n  }\r\n`;\r\n\r\nconst Num = styled.div`\r\n  font-size: 32px;\r\n  font-weight: bolder;\r\n  margin-bottom: 12px;\r\n`;\r\n\r\nconst CommentCount = styled.div`\r\n  margin-bottom: 8px;\r\n`;\r\nconst Rating = ({ bookId, currentRating, onRefetchBook }) => {\r\n  const { rating, mLoading, onRate } = useRating({\r\n    currentRating,\r\n    objType: OBJ_TYPES.BOOK,\r\n    objId: bookId,\r\n    onRateCompleted: () => {\r\n      onRefetchBook && onRefetchBook();\r\n    }\r\n  });\r\n  const averageRating = parseFloat(_get(rating, \"averageScore\", \"0\"));\r\n  return (\r\n    <Container>\r\n      <Num>{averageRating}</Num>\r\n      <CommentCount>{_get(rating, \"ratingCount\", 0)}人评价</CommentCount>\r\n      <StarRating\r\n        className={\"star\"}\r\n        icon={\"star\"}\r\n        size={\"large\"}\r\n        disabled={mLoading}\r\n        rating={_get(rating, \"score\", 0)}\r\n        onRate={(e, { rating }) => onRate(rating)}\r\n        maxRating={5}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Rating;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _get from \"lodash/get\";\r\nimport InfoHeader from \"./InfoHeader\";\r\nimport InfoFooter from \"./InfoFooter\";\r\nimport Tags from \"./Tags\";\r\nimport Description from \"../../program/programSegaments/Description\";\r\nimport Rating from \"./Rating\";\r\n\r\nconst Container = styled.div`\r\n  background-color: #f2f2f2;\r\n  width: 100%;\r\n  display: flex;\r\n  padding: 16px;\r\n`;\r\n\r\nconst Cover = styled.img`\r\n  width: 198px;\r\n  height: 238px;\r\n`;\r\n\r\nconst Content = styled.div`\r\n  margin-left: 14px;\r\n  flex: 1;\r\n  display: flex;\r\n`;\r\n\r\nconst ContentLeft = styled.div`\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100%;\r\n  padding-bottom: 8px;\r\n`;\r\n\r\nconst TopContent = styled.div`\r\n  width: 100%;\r\n  flex: 1;\r\n`;\r\n\r\nconst ContentRight = styled.div``;\r\n\r\nconst BasicInfo = ({ book, onGoTo, refetchBook }) => {\r\n  return book ? (\r\n    <Container>\r\n      <Cover src={_get(book, \"cover.url\")} />\r\n      <Content>\r\n        <ContentLeft>\r\n          <TopContent>\r\n            <InfoHeader\r\n              title={_get(book, \"name\")}\r\n              author={_get(book, \"creator\")}\r\n            />\r\n            <Tags tags={book.tags} />\r\n            <Description descriptionUrl={book.descriptionUrl} />\r\n          </TopContent>\r\n\r\n          <InfoFooter onGoTo={onGoTo} book={book} />\r\n        </ContentLeft>\r\n        <ContentRight>\r\n          <Rating\r\n            bookId={book.id}\r\n            currentRating={book.currentRating}\r\n            onRefetchBook={refetchBook}\r\n          />\r\n        </ContentRight>\r\n      </Content>\r\n    </Container>\r\n  ) : null;\r\n};\r\n\r\nexport default BasicInfo;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _map from \"lodash/map\";\r\nimport _chunk from \"lodash/chunk\";\r\nimport { CHAPTER } from \"../../../common/CONSULT\";\r\n\r\nconst Container = styled.div`\r\n  margin-top: 20px;\r\n  background-color: #f2f2f2;\r\n  min-height: 300px;\r\n  padding: 20px;\r\n`;\r\n\r\nconst Header = styled.div`\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  border-bottom: 1px solid #797979;\r\n  padding-bottom: 20px;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n`;\r\n\r\nconst ChapterItemBox = styled.div`\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  min-width: 300px;\r\n  text-align: left;\r\n`;\r\n\r\nconst ChapterText = styled.div`\r\n  &:hover {\r\n    color: #ed4259;\r\n  }\r\n  cursor: pointer;\r\n`;\r\n\r\nconst ChapterItem = ({ chapter, onGoTo }) => {\r\n  return (\r\n    <ChapterItemBox>\r\n      <ChapterText\r\n        onClick={() => {\r\n          onGoTo(`${CHAPTER}${chapter.id}`);\r\n        }}\r\n      >\r\n        {chapter.title}\r\n      </ChapterText>\r\n    </ChapterItemBox>\r\n  );\r\n};\r\n\r\nconst Content = styled.div`\r\n  padding-top: 20px;\r\n`;\r\n\r\nconst RowBox = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  border-bottom: 1px solid ${props => (props.isLastOne ? \"none\" : \"#797979\")};\r\n  font-size: 20px;\r\n  padding-top: 30px;\r\n  padding-bottom: 30px;\r\n`;\r\n\r\nconst Row = ({ row, isLastOne, onGoTo }) => {\r\n  return (\r\n    <RowBox isLastOne={isLastOne}>\r\n      {_map(row, chapter => {\r\n        return (\r\n          <ChapterItem\r\n            key={\"chapter__\" + chapter.id}\r\n            chapter={chapter}\r\n            onGoTo={onGoTo}\r\n          />\r\n        );\r\n      })}\r\n    </RowBox>\r\n  );\r\n};\r\n\r\nconst Chapters = ({ chapters, onGoTo }) => {\r\n  const rows = _chunk(chapters, 3);\r\n  return (\r\n    <Container>\r\n      <Header>\r\n        <Title>目录（{chapters.length}）章</Title>\r\n      </Header>\r\n      <Content>\r\n        {_map(rows, (row, index) => {\r\n          return (\r\n            <Row\r\n              key={\"row_\" + index}\r\n              row={row}\r\n              onGoTo={onGoTo}\r\n              isLastOne={index + 1 === rows.length}\r\n            />\r\n          );\r\n        })}\r\n      </Content>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Chapters;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Comments from \"../../../common/comment/Comments\";\r\nimport { OBJ_TYPES } from \"../../../common/CONSULT\";\r\n\r\nconst Title = styled.div`\r\n  text-align: left;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  margin-bottom: 10px;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  background-color: #f2f2f2;\r\n  margin-top: 20px;\r\n  min-height: 300px;\r\n  padding: 20px;\r\n`;\r\n\r\nconst BookComments = ({ bookId }) => {\r\n  return (\r\n    <Container>\r\n      <Title>评论</Title>\r\n      <Comments type={OBJ_TYPES.BOOK} objId={bookId} />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BookComments;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport BasicInfo from \"./bookSegaments/BasicInfo\";\r\nimport PageItem from \"../QueryItem\";\r\nimport { getRouteId } from \"../../utils/routeUtils\";\r\nimport { GET_BOOK } from \"../../common/queryGql\";\r\nimport Chapters from \"./bookSegaments/Chapters\";\r\nimport BookComments from \"./bookSegaments/BookComments\";\r\nimport PageTitle from \"../../common/PageTitle\";\r\n\r\nconst BookBox = styled.div`\r\n  width: 100%;\r\n`;\r\n\r\nconst _Book = ({ book, refetchBook, onGoTo }) => {\r\n  return (\r\n    <BookBox>\r\n      <PageTitle\r\n        title={`${book.name}`}\r\n        metaKeywords={`${book.name}_${book.intro}`}\r\n      />\r\n      <BasicInfo book={book} refetchBook={refetchBook} onGoTo={onGoTo} />\r\n      <Chapters chapters={book.chapters} onGoTo={onGoTo} />\r\n      <BookComments bookId={book.id} />\r\n    </BookBox>\r\n  );\r\n};\r\n\r\nconst Container = styled.div`\r\n  width: 1000px;\r\n  margin-top: 18px;\r\n`;\r\n\r\nconst Book = ({ history, location, onGoTo }) => {\r\n  const id = getRouteId();\r\n  return (\r\n    <Container>\r\n      <PageItem autoLoading id={id} itemPath={\"book\"} gql={GET_BOOK}>\r\n        {({ loading, refetch, item }) => {\r\n          return <_Book book={item} refetchBook={refetch} onGoTo={onGoTo} />;\r\n        }}\r\n      </PageItem>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Book;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Icon } from \"semantic-ui-react\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { SWITCH_UP_COMMENT } from \"../../mutationGql\";\r\nimport ModalHint from \"../../ModalHint\";\r\nimport ReportHint from \"../../ReportHint\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  justify-content: space-between;\r\n  margin-top: 10px;\r\n  color: #99a2aa;\r\n`;\r\n\r\nconst DateText = styled.div`\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst ReplyButton = styled.div`\r\n  cursor: pointer;\r\n  margin-left: 10px;\r\n`;\r\n\r\nconst MainActionsBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst ReportButton = styled.div`\r\n  cursor: pointer;\r\n  font-size: 10px;\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst ThumbsUp = styled(Icon)`\r\n  cursor: pointer;\r\n  margin-right: 4px !important;\r\n  margin-bottom: 4px !important;\r\n`;\r\n\r\nconst UpCount = styled.div``;\r\n\r\nconst useCommentActions = ({ upCount, currentUpped, currentReport }) => {\r\n  const [uCount, setUCount] = useState(upCount);\r\n  const [report, setReport] = useState(currentReport);\r\n  const [cUpped, setCUpped] = useState(currentUpped);\r\n  const [switchUpComment, { data, loading }] = useMutation(SWITCH_UP_COMMENT, {\r\n    onCompleted: data => {\r\n      const { switchUpComment } = data;\r\n      setUCount(switchUpComment.upCount);\r\n      setCUpped(switchUpComment.currentUpped);\r\n    },\r\n    onError: () => ModalHint.error(\"点赞失败\")\r\n  });\r\n  return {\r\n    uCount,\r\n    setUCount,\r\n    cUpped,\r\n    setCUpped,\r\n    switchUpComment,\r\n    report,\r\n    setReport\r\n  };\r\n};\r\n\r\nconst CommentActions = ({\r\n  commentId,\r\n  dateCreated,\r\n  onReply,\r\n  upCount,\r\n  currentUpped,\r\n  currentReport\r\n}) => {\r\n  const {\r\n    uCount,\r\n    cUpped,\r\n    switchUpComment,\r\n    report,\r\n    setReport\r\n  } = useCommentActions({\r\n    upCount,\r\n    currentUpped,\r\n    currentReport\r\n  });\r\n  return (\r\n    <Container>\r\n      <MainActionsBox>\r\n        <DateText>{dateCreated}</DateText>\r\n        <ThumbsUp\r\n          color={cUpped ? \"red\" : \"\"}\r\n          onClick={e => {\r\n            e.stopPropagation();\r\n            switchUpComment({ variables: { commentId } });\r\n          }}\r\n          name={cUpped ? \"thumbs up\" : \"thumbs up outline\"}\r\n        />\r\n        {uCount > 0 && <UpCount>{uCount}</UpCount>}\r\n        {onReply && <ReplyButton onClick={onReply}>回复</ReplyButton>}\r\n      </MainActionsBox>\r\n      <ReportButton\r\n        onClick={e => {\r\n          e.stopPropagation();\r\n          ReportHint.show(\"Comment\", commentId, report, {\r\n            reportCallback: report => setReport(report)\r\n          });\r\n        }}\r\n      >\r\n        {report ? \"已举报\" : \"举报\"}\r\n      </ReportButton>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default CommentActions;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { TextArea, Button } from \"semantic-ui-react\";\r\nimport Avatar from \"../../../pages/transformable/common/Avatar\";\r\nimport _get from \"lodash/get\";\r\nimport { useComment } from \"../../hooks\";\r\nimport LoginHint from \"../../LoginHint\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  height: 70px;\r\n  margin-bottom: 30px;\r\n`;\r\n\r\nconst LeftBox = styled.div`\r\n  width: 80px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n`;\r\n\r\nconst ContentBox = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n`;\r\n\r\nconst TextInput = styled(TextArea)`\r\n  flex: 1;\r\n  padding: 10px;\r\n  height: 65px;\r\n  outline: none;\r\n  border-radius: 6px;\r\n  &:focus {\r\n    -moz-outline-radius: 6px;\r\n    border: 1px solid lightskyblue;\r\n  }\r\n`;\r\n\r\nconst SendButton = styled(Button)``;\r\n\r\nconst CommentForm = ({\r\n  objId,\r\n  commentType,\r\n  currentUser,\r\n  refetchComments,\r\n  repliedCommentId,\r\n  parentId,\r\n  replyPlaceholder,\r\n  saveCallback\r\n}) => {\r\n  const [content, setContent] = useState(\"\");\r\n  const { mLoading, onSaveComment } = useComment({\r\n    refetch: refetchComments,\r\n    commentType,\r\n    repliedCommentId,\r\n    parentId,\r\n    objId,\r\n    saveCallback,\r\n    clearForm: () => setContent(\"\")\r\n  });\r\n  return (\r\n    <Container>\r\n      <LeftBox>\r\n        <Avatar width={54} size={\"big\"} url={_get(currentUser, \"avatar.url\")} />\r\n      </LeftBox>\r\n      <ContentBox>\r\n        <TextInput\r\n          onInput={(e, { value }) => setContent(value)}\r\n          onFocus={() => LoginHint.checkLogin()}\r\n          maxLength={255}\r\n          rows={4}\r\n          placeholder={replyPlaceholder}\r\n          value={content}\r\n        />\r\n        <SendButton\r\n          loading={mLoading}\r\n          onClick={() => LoginHint.checkLogin(() => onSaveComment(content))}\r\n          style={{ marginLeft: 10 }}\r\n          primary\r\n        >\r\n          发布\r\n        </SendButton>\r\n      </ContentBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default CommentForm;\r\n","import React, { useState } from \"react\";\r\nimport CommentForm from \"./CommentForm\";\r\n\r\nconst ReplyForm = ({\r\n  commentType,\r\n  objId,\r\n  currentUser,\r\n  refetchComments,\r\n  repliedCommentId,\r\n  parentId,\r\n  replyPlaceholder,\r\n  saveCallback\r\n}) => {\r\n  return (\r\n    <CommentForm\r\n      commentType={commentType}\r\n      objId={objId}\r\n      saveCallback={saveCallback}\r\n      repliedCommentId={repliedCommentId}\r\n      currentUser={currentUser}\r\n      parentId={parentId}\r\n      refetchComments={refetchComments}\r\n      replyPlaceholder={replyPlaceholder}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ReplyForm;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { _getByRank } from \"../../../utils/utils\";\r\nimport Avatar from \"../../../pages/transformable/common/Avatar\";\r\nimport _get from \"lodash/get\";\r\nimport CommentActions from \"./CommentActions\";\r\nimport ReplyForm from \"./ReplyForm\";\r\nimport { useReplyForm } from \"../../hooks\";\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n`;\r\n\r\nconst UserInfoBox = styled.div`\r\n  margin-bottom: 10px;\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst Name = styled.div`\r\n  color: #6d757a;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  text-align: left;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst Content = styled.div`\r\n  text-align: left;\r\n`;\r\n\r\nconst ReplyBox = styled.div`\r\n  font-size: 14px;\r\n  margin-left: 10px;\r\n`;\r\n\r\nconst ReplyUser = styled.span`\r\n  color: #00a1d6;\r\n  margin-left: 10px;\r\n  margin-right: 10px;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst UserInfo = ({ creator, repliedComment }) => {\r\n  return (\r\n    <UserInfoBox>\r\n      <Name>{_getByRank(creator, [\"nickname\", \"username\"])}</Name>\r\n      {repliedComment && (\r\n        <ReplyBox>\r\n          回复\r\n          <ReplyUser>\r\n            @{_getByRank(repliedComment.creator, [\"nickname\", \"username\"])}\r\n          </ReplyUser>\r\n          :\r\n        </ReplyBox>\r\n      )}\r\n    </UserInfoBox>\r\n  );\r\n};\r\n\r\nconst ContentInfo = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst AvatarBox = styled.div`\r\n  width: 40px;\r\n`;\r\n\r\nconst ContentBox = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n`;\r\n\r\nconst SubComment = ({\r\n  item,\r\n  currentUser,\r\n  objId,\r\n  type,\r\n  refchComments,\r\n  parentId,\r\n  onSaveCallback\r\n}) => {\r\n  const {\r\n    creator,\r\n    content,\r\n    dateCreated,\r\n    currentUpped,\r\n    upCount,\r\n    currentReport\r\n  } = item;\r\n  const { showReplyForm, setShowReplyForm, replyPlaceholder } = useReplyForm({\r\n    repliedComment: item\r\n  });\r\n  return (\r\n    <Container>\r\n      <AvatarBox>\r\n        <Avatar\r\n          size={\"small\"}\r\n          width={30}\r\n          avatar={_get(creator, \"avatar.url\")}\r\n        />\r\n      </AvatarBox>\r\n      <ContentBox>\r\n        <ContentInfo>\r\n          <UserInfo creator={creator} repliedComment={item.repliedComment} />\r\n          <Content>{content}</Content>\r\n          <CommentActions\r\n            onReply={() => setShowReplyForm(!showReplyForm)}\r\n            dateCreated={dateCreated}\r\n            currentUpped={currentUpped}\r\n            upCount={upCount}\r\n            commentId={item.id}\r\n            currentReport={currentReport}\r\n          />\r\n        </ContentInfo>\r\n        {showReplyForm && (\r\n          <ReplyForm\r\n            saveCallback={onSaveCallback}\r\n            replyPlaceholder={replyPlaceholder}\r\n            parentId={parentId}\r\n            currentUser={currentUser}\r\n            commentType={type}\r\n            objId={objId}\r\n            refetchComments={refchComments}\r\n            repliedCommentId={item.id}\r\n          />\r\n        )}\r\n      </ContentBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SubComment;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _map from \"lodash/map\";\r\nimport SubComment from \"./SubComment\";\r\n\r\nconst Container = styled.div``;\r\n\r\nconst CheckMoreBox = styled.div`\r\n  text-align: left;\r\n  color: #6d757a;\r\n  font-size: 12px;\r\n`;\r\n\r\nconst ClickMore = styled.span`\r\n  cursor: pointer;\r\n  color: #00a1d6;\r\n`;\r\n\r\nconst CheckMoreButton = ({ commentsCount, onCheckMore }) => {\r\n  if (commentsCount < 3) {\r\n    return null;\r\n  }\r\n  return (\r\n    <CheckMoreBox>\r\n      共<b>{commentsCount}</b>条回复，\r\n      <ClickMore onClick={onCheckMore}>点击查看</ClickMore>\r\n    </CheckMoreBox>\r\n  );\r\n};\r\n\r\nconst useLastSubComments = ({ item }) => {\r\n  const { last3Comments } = item;\r\n  const [subComments, setSubComments] = useState(last3Comments);\r\n  const [subCommentsCount, setSubCommentsCount] = useState(\r\n    item.subCommentsCount\r\n  );\r\n\r\n  return { subComments, subCommentsCount, setSubComments, setSubCommentsCount };\r\n};\r\n\r\nconst LastSubComments = ({\r\n  currentUser,\r\n  objId,\r\n  type,\r\n  parentId,\r\n  onCheckMore,\r\n  item\r\n}) => {\r\n  const {\r\n    subComments,\r\n    subCommentsCount,\r\n    setSubComments,\r\n    setSubCommentsCount\r\n  } = useLastSubComments({ item });\r\n  return (\r\n    <Container>\r\n      {_map(subComments, subComment => {\r\n        return (\r\n          <SubComment\r\n            key={\"sub_comment_\" + subComment.id}\r\n            item={subComment}\r\n            type={type}\r\n            currentUser={currentUser}\r\n            objId={objId}\r\n            onSaveCallback={comment => {\r\n              setSubCommentsCount(subCommentsCount + 1);\r\n              setSubComments([comment, ...subComments]);\r\n            }}\r\n            parentId={parentId}\r\n          />\r\n        );\r\n      })}\r\n      <CheckMoreButton\r\n        commentsCount={subCommentsCount}\r\n        onCheckMore={onCheckMore}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default LastSubComments;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport PaginationQueryList from \"../../PaginationQueryList\";\r\nimport { GET_COMMENTS } from \"../../queryGql\";\r\nimport _map from \"lodash/map\";\r\nimport SubComment from \"./SubComment\";\r\n\r\nconst Container = styled.div`\r\n  .paginationWrapper {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n  }\r\n`;\r\n\r\nconst CommentsBox = styled.div``;\r\n\r\nconst SubCommentList = ({ objId, type, currentUser, parentId }) => {\r\n  return (\r\n    <Container>\r\n      <PaginationQueryList\r\n        searchFields={{\r\n          objId,\r\n          parentId,\r\n          types: [type],\r\n          isUserQuery: true,\r\n          sort: \"dateCreated\",\r\n          order: \"asc\"\r\n        }}\r\n        hidePaginationInSinglePage={true}\r\n        gql={GET_COMMENTS}\r\n        paginationSecondary={true}\r\n        paginationSize={\"mini\"}\r\n        dataKey={\"comments\"}\r\n        limit={10}\r\n      >\r\n        {({ loading, count, items, refetch }) => {\r\n          return (\r\n            <CommentsBox>\r\n              {_map(items, item => {\r\n                return (\r\n                  <SubComment\r\n                    key={\"sub_comment_\" + item.id}\r\n                    refchComments={refetch}\r\n                    currentUser={currentUser}\r\n                    objId={objId}\r\n                    item={item}\r\n                    type={type}\r\n                    parentId={parentId}\r\n                  />\r\n                );\r\n              })}\r\n            </CommentsBox>\r\n          );\r\n        }}\r\n      </PaginationQueryList>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SubCommentList;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _isEmpty from \"lodash/isEmpty\";\r\nimport LastSubComments from \"./LastSubComments\";\r\nimport SubCommentList from \"./SubCommentList\";\r\n\r\nconst Container = styled.div`\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst useSubComments = ({ item }) => {\r\n  const [checkMore, setCheckMore] = useState(false);\r\n  return { checkMore, setCheckMore };\r\n};\r\n\r\nconst SubComments = ({ item, currentUser, objId, type }) => {\r\n  const { checkMore, setCheckMore } = useSubComments({ item });\r\n  if (_isEmpty(item.last3Comments)) {\r\n    return null;\r\n  }\r\n  return (\r\n    <Container>\r\n      {checkMore ? (\r\n        <SubCommentList\r\n          objId={objId}\r\n          currentUser={currentUser}\r\n          type={type}\r\n          parentId={item.id}\r\n        />\r\n      ) : (\r\n        <LastSubComments\r\n          objId={objId}\r\n          type={type}\r\n          item={item}\r\n          parentId={item.id}\r\n          onCheckMore={() => setCheckMore(true)}\r\n          currentUser={currentUser}\r\n        />\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SubComments;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Avatar from \"../../pages/transformable/common/Avatar\";\r\nimport _get from \"lodash/get\";\r\nimport { _getByRank } from \"../../utils/utils\";\r\nimport CommentActions from \"./segaments/CommentActions\";\r\nimport { useRefresh, useReplyForm } from \"../hooks\";\r\nimport ReplyForm from \"./segaments/ReplyForm\";\r\nimport SubComments from \"./segaments/SubComments\";\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  margin-bottom: 24px;\r\n  padding-bottom: 20px;\r\n  border-bottom: 1px solid\r\n    ${props => (props.isLastOne ? \"transparent\" : \"#e5e9ef\")};\r\n`;\r\n\r\nconst AvatarBox = styled.div`\r\n  width: 80px;\r\n`;\r\n\r\nconst ContentBox = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n`;\r\n\r\nconst UserInfoBox = styled.div`\r\n  margin-bottom: 10px;\r\n`;\r\n\r\nconst Name = styled.div`\r\n  color: #6d757a;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  text-align: left;\r\n`;\r\n\r\nconst UserInfo = ({ creator }) => {\r\n  return (\r\n    <UserInfoBox>\r\n      <Name>{_getByRank(creator, [\"nickname\", \"username\"])}</Name>\r\n    </UserInfoBox>\r\n  );\r\n};\r\n\r\nconst ContentInfo = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst Content = styled.div`\r\n  text-align: left;\r\n`;\r\n\r\nconst CommentItem = ({\r\n  item,\r\n  currentUser,\r\n  objId,\r\n  type,\r\n  refetchComments,\r\n  isLastOne\r\n}) => {\r\n  const {\r\n    creator,\r\n    content,\r\n    dateCreated,\r\n    id,\r\n    currentUpped,\r\n    upCount,\r\n    currentReport\r\n  } = item;\r\n  const { showReplyForm, setShowReplyForm, replyPlaceholder } = useReplyForm({\r\n    repliedComment: item\r\n  });\r\n  const [refresh, onRefresh] = useRefresh();\r\n  return (\r\n    <Container key={refresh} isLastOne={isLastOne}>\r\n      <AvatarBox>\r\n        <Avatar\r\n          size={\"large\"}\r\n          width={50}\r\n          avatar={_get(creator, \"avatar.url\")}\r\n        />\r\n      </AvatarBox>\r\n      <ContentBox>\r\n        <ContentInfo>\r\n          <UserInfo creator={creator} />\r\n          <Content>{content}</Content>\r\n          <CommentActions\r\n            onReply={() => setShowReplyForm(!showReplyForm)}\r\n            dateCreated={dateCreated}\r\n            currentUpped={currentUpped}\r\n            upCount={upCount}\r\n            commentId={id}\r\n            currentReport={currentReport}\r\n          />\r\n        </ContentInfo>\r\n        <SubComments\r\n          type={type}\r\n          currentUser={currentUser}\r\n          objId={objId}\r\n          item={item}\r\n        />\r\n        {showReplyForm && (\r\n          <ReplyForm\r\n            refetchComments={() => {\r\n              refetchComments().then(res => {\r\n                onRefresh();\r\n              });\r\n            }}\r\n            replyPlaceholder={replyPlaceholder}\r\n            parentId={id}\r\n            currentUser={currentUser}\r\n            commentType={type}\r\n            objId={objId}\r\n          />\r\n        )}\r\n      </ContentBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default CommentItem;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport PaginationQueryList from \"../PaginationQueryList\";\r\nimport { GET_COMMENTS } from \"../queryGql\";\r\nimport CommentForm from \"./segaments/CommentForm\";\r\nimport _map from \"lodash/map\";\r\nimport CommentItem from \"./Comment\";\r\nimport { AppContext } from \"../../../App\";\r\n\r\nconst Container = styled.div`\r\n  .paginationWrapper {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n  }\r\n`;\r\n\r\nconst CommentsBox = styled.div`\r\n  margin-bottom: 30px;\r\n`;\r\n\r\nconst Comments = ({ objId, type }) => {\r\n  return (\r\n    <AppContext.Consumer>\r\n      {props => {\r\n        const { currentUser } = props;\r\n        return (\r\n          <Container>\r\n            <PaginationQueryList\r\n              searchFields={{\r\n                objId,\r\n                types: [type],\r\n                isUserQuery: true,\r\n                searchParentComment: true\r\n              }}\r\n              hidePaginationInSinglePage={true}\r\n              gql={GET_COMMENTS}\r\n              paginationSize={\"mini\"}\r\n              paginationSecondary={true}\r\n              dataKey={\"comments\"}\r\n              limit={10}\r\n            >\r\n              {({ loading, count, items, refetch }) => {\r\n                return (\r\n                  <CommentsBox>\r\n                    <CommentForm\r\n                      objId={objId}\r\n                      commentType={type}\r\n                      currentUser={currentUser}\r\n                      refetchComments={refetch}\r\n                    />\r\n                    {_map(items, (item, index) => {\r\n                      return (\r\n                        <CommentItem\r\n                          key={\"comment_\" + item.id}\r\n                          item={item}\r\n                          isLastOne={index + 1 === items.length}\r\n                          objId={objId}\r\n                          type={type}\r\n                          refetchComments={refetch}\r\n                          currentUser={currentUser}\r\n                        />\r\n                      );\r\n                    })}\r\n                  </CommentsBox>\r\n                );\r\n              }}\r\n            </PaginationQueryList>\r\n          </Container>\r\n        );\r\n      }}\r\n    </AppContext.Consumer>\r\n  );\r\n};\r\n\r\nexport default Comments;\r\n"],"sourceRoot":""}