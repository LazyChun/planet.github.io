{"version":3,"sources":["components/pages/book/chapterSegaments/Title.js","components/pages/book/chapterSegaments/BasicInfo.js","components/pages/book/chapterSegaments/Article.js","components/pages/book/chapterSegaments/menus/content/Catalogues.js","components/pages/book/chapterSegaments/menus/MenuModal.js","components/pages/book/chapterSegaments/menus/content/settings/Themes.js","components/pages/book/chapterSegaments/menus/content/settings/FontFamilySelector.js","components/common/VLine.js","components/pages/book/chapterSegaments/menus/content/settings/AddMinusButtons.js","components/pages/book/chapterSegaments/menus/content/settings/FontSizeButton.js","components/pages/book/chapterSegaments/menus/content/settings/ContentWidthButton.js","components/pages/book/chapterSegaments/menus/content/Settings.js","components/common/item/BookMarkItem.js","components/pages/book/chapterSegaments/menus/content/Bookmark.js","components/pages/book/chapterSegaments/menus/content/bookshelf/FollowBookButton.js","components/pages/book/chapterSegaments/menus/content/Bookshelf.js","components/pages/book/chapterSegaments/menus/Menu.js","components/pages/book/chapterSegaments/Menus.js","components/pages/book/chapterSegaments/ReportButton.js","components/pages/book/chapterSegaments/BookMark.js","components/pages/book/chapterSegaments/ChapterContent.js","components/pages/book/chapterSegaments/BottomButton.js","components/pages/book/chapterSegaments/BottomButtons.js","components/pages/book/chapterSegaments/ChapterComments.js","components/pages/book/Chapter.js","components/common/Styles.js","components/utils/jsonUtils.js","components/common/comment/segaments/CommentActions.js","components/common/segaments/InfoItem.js","components/common/comment/segaments/CommentForm.js","components/common/comment/segaments/ReplyForm.js","components/common/comment/segaments/SubComment.js","components/common/comment/segaments/LastSubComments.js","components/common/comment/segaments/SubCommentList.js","components/common/comment/segaments/SubComments.js","components/common/comment/Comment.js","components/common/comment/Comments.js","components/common/RefetchHandle.js","components/common/CurrentObjLoader.js","components/common/item/BookItem.js"],"names":["Container","styled","div","TitleText","Title","title","BasicInfo","chapterId","bookName","lastUpdated","readCount","creator","upCount","currentUpped","charsCount","useSwitchUp","objId","objType","OBJ_TYPES","CHAPTER","uCount","onSwitchUp","upped","InfoItem","mf","hintText","icon","text","_get","iconStyle","color","onClick","boxStyle","Number","Article","contentUrl","settings","fontFamily","fontSize","useState","content","setContent","useEffect","getDataFromUrl","str","style","dangerouslySetInnerHTML","__html","Header","RowBox","props","isLastOne","Row","row","onToChapter","_map","chapter","key","id","ChapterItemBox","ChapterItem","Content","Catalogues","book","rows","_chunk","chapters","index","length","MenuModal","show","width","height","children","onClose","menuIndex","bgColor","top","MENU_HEIGHT","backgroundColor","Icon","name","size","THEME_COLORS","lightColor","ThemeItemBox","selected","ThemeItem","item","onSelect","Themes","currentTheme","onUpdateSettings","theme","FONT_FAMILY","SelectBox","SelectButton","FontFamilySelector","f","VLine","bg","Button","disabled","TextField","AddMinusButtons","min","max","leftButton","rightButton","steps","FontSizeButton","value","ButtonBox","ContentWidthButton","contentWidth","SettingItemBox","SettingItemTitle","SettingItemContent","SettingItem","ResetButtonBox","ResetButton","Settings","onResetSettings","MAIN_RED","DateText","BookMarkItem","follower","followedObj","BookMark","bookId","userId","markChanged","setMarkChanged","PaginationQueryList","gql","GET_FOLLOWERS","dataKey","hidePaginationInSinglePage","paginationSecondary","paginationSize","searchFields","types","chapterBookId","sort","order","queryOptions","onCompleted","items","loading","refetch","RefetchHandle","refetchOnce","RedButton","FollowBookButton","currentFollowed","useSwitchFollow","BOOK","onSwitchCompleted","successMsg","followed","unFollowed","errorMsg","mLoading","onSwitchFollow","AddButtonField","Bookshelf","onToBook","limit","BookItem","followDataToJson","activeColor","MenuBox","ActivityBar","Menu","clickEleId","showType","type","data","modalWidth","modalHeight","setShowType","switchBefore","console","log","getContentByType","toFixed","MenusBox","Menus","onGoTo","setToFixed","scrollToFix","scrollTo","window","pageYOffset","document","addEventListener","removeEventListener","settingsProps","App","Consumer","currentUser","position","callback","LoginHint","checkLogin","ReportText","ReportButton","currentReport","report","setReport","ReportHint","reportCallback","clickEle","PersistStorage","setItem","ChapterContent","ButtonText","BottomButton","BottomsBox","BottomButtons","chapterIndex","_findIndex","c","getElementById","click","ChapterComments","Comments","ChapterBox","INIT_SETTINGS_STATE","_Chapter","refetchChapter","setGlobalBgColor","useRead","booksRead","getItem","BOOKS_READ","initState","CHAPTER_PAGE_SETTINGS","useReducer","state","action","result","dispatch","refetchNow","UPDATED","useChapter","CurrentObjLoader","openedObj","PageTitle","metaKeywords","subtitle","Chapter","history","location","autoLoading","getRouteId","itemPath","GET_CHAPTER","follow","JSON","parse","ReplyButton","MainActionsBox","ThumbsUp","UpCount","CommentActions","commentId","dateCreated","onReply","setUCount","cUpped","setCUpped","useMutation","SWITCH_UP_COMMENT","switchUpComment","onError","ModalHint","error","useCommentActions","e","stopPropagation","variables","InfoItemBox","ItemText","marginLeft","trigger","LeftBox","ContentBox","TextInput","TextArea","SendButton","CommentForm","commentType","refetchComments","repliedCommentId","parentId","replyPlaceholder","saveCallback","useComment","clearForm","onSaveComment","Avatar","url","onInput","onFocus","maxLength","placeholder","primary","ReplyForm","UserInfoBox","Name","ReplyBox","ReplyUser","span","UserInfo","repliedComment","_getByRank","ContentInfo","AvatarBox","SubComment","refchComments","onSaveCallback","useReplyForm","showReplyForm","setShowReplyForm","avatar","CheckMoreBox","ClickMore","CheckMoreButton","commentsCount","onCheckMore","LastSubComments","last3Comments","subComments","setSubComments","subCommentsCount","setSubCommentsCount","useLastSubComments","subComment","comment","CommentsBox","SubCommentList","isUserQuery","GET_COMMENTS","count","SubComments","checkMore","setCheckMore","useSubComments","_isEmpty","CommentItem","useRefresh","refresh","onRefresh","then","res","searchParentComment","Comment","_CurrentObjLoader","setOpenedObj","Cover","img","BookName","imageUrl","cover","nickname","className","src"],"mappings":"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","file":"static/js/5.c26c8d40.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div`\r\n  margin-bottom: 16px;\r\n`;\r\n\r\nconst TitleText = styled.div`\r\n  font-size: 24px;\r\n  float: left;\r\n`;\r\n\r\nconst Title = ({ title }) => {\r\n  return (\r\n    <Container>\r\n      <TitleText>{title}</TitleText>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Title;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport InfoItem from \"../../../common/segaments/InfoItem\";\r\nimport _get from \"lodash/get\";\r\nimport { useSwitchUp } from \"../../../common/hooks\";\r\nimport { OBJ_TYPES } from \"../../../common/CONSULT\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst BasicInfo = ({\r\n  chapterId,\r\n  bookName,\r\n  lastUpdated,\r\n  readCount,\r\n  creator,\r\n  upCount,\r\n  currentUpped,\r\n  charsCount = 0\r\n}) => {\r\n  const { upCount: uCount, onSwitchUp, upped } = useSwitchUp({\r\n    currentUpped,\r\n    objId: chapterId,\r\n    objType: OBJ_TYPES.CHAPTER,\r\n    upCount\r\n  });\r\n\r\n  return (\r\n    <Container>\r\n      <InfoItem mf={\"0px\"} hintText={\"书籍\"} icon={\"book\"} text={bookName} />\r\n      <InfoItem\r\n        hintText={\"作者\"}\r\n        icon={\"pencil\"}\r\n        text={_get(creator, \"username\")}\r\n      />\r\n\r\n      <InfoItem\r\n        iconStyle={upped ? { color: \"red\" } : null}\r\n        hintText={upped ? \"点击取消喜欢\" : \"喜欢\"}\r\n        onClick={onSwitchUp}\r\n        icon={upped ? \"heart\" : \"heart outline\"}\r\n        text={uCount}\r\n      />\r\n      <InfoItem\r\n        hintText={\"最近更新日期\"}\r\n        icon={\"calendar alternate outline\"}\r\n        text={lastUpdated}\r\n      />\r\n      <InfoItem\r\n        hintText={\"本章字数\"}\r\n        icon={\"wordpress forms\"}\r\n        text={charsCount}\r\n      />\r\n      <InfoItem\r\n        boxStyle={{ color: \"grey\" }}\r\n        hintText={\"阅读次数\"}\r\n        icon={\"eye\"}\r\n        text={Number(readCount) + 1}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BasicInfo;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { getDataFromUrl } from \"../../../utils/urlData\";\r\n\r\nconst Container = styled.div`\r\n  margin-top: 10px;\r\n  flex-wrap: wrap;\r\n  min-height: 70vh;\r\n  text-align: left;\r\n`;\r\n\r\nconst Article = ({ contentUrl, settings }) => {\r\n  const { fontFamily, fontSize } = settings;\r\n  const [content, setContent] = useState(\"\");\r\n  useEffect(() => {\r\n    getDataFromUrl(contentUrl, \"data.content\", str => setContent(str));\r\n  }, [contentUrl]);\r\n  return (\r\n    <Container style={{ fontFamily, fontSize }}>\r\n      <div dangerouslySetInnerHTML={{ __html: content }} />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Article;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _chunk from \"lodash/chunk\";\r\nimport _map from \"lodash/map\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 0 20px;\r\n  color: rgba(0, 0, 0, 0.87);\r\n`;\r\n\r\nconst Header = styled.div`\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  font-size: 22px;\r\n  color: #f02737;\r\n  padding-bottom: 10px;\r\n  border-bottom: 1px solid #f02737;\r\n`;\r\n\r\nconst RowBox = styled.div`\r\n  display: flex;\r\n  border-bottom: 1px solid\r\n    ${props => (props.isLastOne ? \"transparent\" : \"#cecece\")};\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding-top: 10px;\r\n  padding-bottom: 10px;\r\n`;\r\n\r\nconst Row = ({ row, isLastOne, onToChapter }) => {\r\n  return (\r\n    <RowBox isLastOne={isLastOne}>\r\n      {_map(row, chapter => {\r\n        return (\r\n          <ChapterItem\r\n            onToChapter={onToChapter}\r\n            chapter={chapter}\r\n            key={\"chapter_\" + chapter.id}\r\n          />\r\n        );\r\n      })}\r\n    </RowBox>\r\n  );\r\n};\r\n\r\nconst ChapterItemBox = styled.div`\r\n  width: 380px;\r\n  text-align: left;\r\n  font-size: 16px;\r\n  &:hover {\r\n    color: #f02737;\r\n  }\r\n`;\r\n\r\nconst ChapterItem = ({ chapter, onToChapter }) => {\r\n  return (\r\n    <ChapterItemBox onClick={() => onToChapter(chapter.id)}>\r\n      {chapter.title}\r\n    </ChapterItemBox>\r\n  );\r\n};\r\n\r\nconst Content = styled.div``;\r\n\r\nconst Catalogues = ({ book, onToChapter }) => {\r\n  const rows = _chunk(book.chapters, 2);\r\n  return (\r\n    <Container>\r\n      <Header>\r\n        <Title>目录</Title>\r\n      </Header>\r\n      <Content>\r\n        {_map(rows, (row, index) => {\r\n          return (\r\n            <Row\r\n              isLastOne={index + 1 === rows.length}\r\n              key={\"chapters_row_\" + index}\r\n              row={row}\r\n              onToChapter={onToChapter}\r\n            />\r\n          );\r\n        })}\r\n      </Content>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Catalogues;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Icon } from \"semantic-ui-react\";\r\nimport { MENU_HEIGHT } from \"./Menu\";\r\n\r\nconst Container = styled.div`\r\n  background-color: #faf9f3;\r\n  position: absolute;\r\n  top: 0px;\r\n  left: 90px;\r\n  min-height: 200px;\r\n  padding-bottom: 30px;\r\n`;\r\n\r\nconst Header = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  padding: 10px 20px;\r\n  color: #cecece;\r\n  &:hover {\r\n    color: lightblue;\r\n  }\r\n`;\r\n\r\nconst MenuModal = ({\r\n  show,\r\n  width,\r\n  height,\r\n  children,\r\n  onClose,\r\n  menuIndex,\r\n  bgColor\r\n}) => {\r\n  return show ? (\r\n    <Container\r\n      style={{\r\n        width,\r\n        height,\r\n        top: `-${menuIndex * MENU_HEIGHT}px`,\r\n        backgroundColor: bgColor\r\n      }}\r\n    >\r\n      <Header>\r\n        <Icon onClick={onClose} name={\"close\"} size={\"large\"} />\r\n      </Header>\r\n      {children}\r\n    </Container>\r\n  ) : null;\r\n};\r\n\r\nexport default MenuModal;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _map from \"lodash/map\";\r\nimport { Icon } from \"semantic-ui-react\";\r\n\r\nconst THEME_COLORS = [\r\n  { color: \"#F6F1E7\", lightColor: \"#FAF9F3\" },\r\n  { color: \"#F4F4C7\", lightColor: \"#F8F1DA\" },\r\n  { color: \"#E3EFE3\", lightColor: \"#F6F1F6\" },\r\n  { color: \"#DFECF0\", lightColor: \"#E6F4F5\" },\r\n  { color: \"#F5E4E4\", lightColor: \"#FAECEB\" },\r\n  { color: \"#DCDCDC\", lightColor: \"#E9E9E9\" }\r\n];\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst ThemeItemBox = styled.div`\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 20px;\r\n  border: 1px solid ${props => (props.selected ? \"#f02737;\" : \"#cecece\")};\r\n  background-color: ${props => props.bgColor};\r\n  margin-right: 20px;\r\n  cursor: pointer;\r\n  color: #f02737;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`;\r\n\r\nconst ThemeItem = ({ item, onSelect, selected }) => {\r\n  return (\r\n    <ThemeItemBox onClick={onSelect} bgColor={item.color}>\r\n      {selected && <Icon name={\"check\"} size={\"large\"} />}\r\n    </ThemeItemBox>\r\n  );\r\n};\r\n\r\nconst Themes = ({ currentTheme, onUpdateSettings }) => {\r\n  return (\r\n    <Container>\r\n      {_map(THEME_COLORS, theme => {\r\n        return (\r\n          <ThemeItem\r\n            selected={currentTheme.color === theme.color}\r\n            key={theme.color}\r\n            item={theme}\r\n            onSelect={() => onUpdateSettings(\"theme\", theme)}\r\n          />\r\n        );\r\n      })}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Themes;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _map from \"lodash/map\";\r\n\r\nconst FONT_FAMILY = [\r\n  { fontFamily: \"Microsoft YaHei\", name: \"雅黑\" },\r\n  { fontFamily: \"SimSun\", name: \"宋体\" },\r\n  { fontFamily: \"KaiTi\", name: \"楷书\" }\r\n];\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  width: 260px;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst SelectBox = styled.div`\r\n  border: 1px solid ${props => (props.selected ? \"#f02737;\" : \"#cecece\")};\r\n  color: ${props => (props.selected ? \"#f02737;\" : \"black\")};\r\n  &:hover {\r\n    color: #f02737;\r\n  }\r\n  background-color: white;\r\n  padding: 10px 20px;\r\n`;\r\n\r\nconst SelectButton = ({ children, selected, onSelect }) => {\r\n  return (\r\n    <SelectBox selected={selected} onClick={onSelect}>\r\n      {children}\r\n    </SelectBox>\r\n  );\r\n};\r\n\r\nconst FontFamilySelector = ({ fontFamily, onUpdateSettings }) => {\r\n  return (\r\n    <Container>\r\n      {_map(FONT_FAMILY, f => {\r\n        return (\r\n          <SelectButton\r\n            key={f.fontFamily}\r\n            selected={f.fontFamily === fontFamily}\r\n            onSelect={() => onUpdateSettings(\"fontFamily\", f.fontFamily)}\r\n          >\r\n            {f.name}\r\n          </SelectButton>\r\n        );\r\n      })}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default FontFamilySelector;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div`\r\n  width: ${props => (props.width ? props.width : \"2px\")};\r\n  height: ${props => (props.height ? props.height : \"2px\")};\r\n`;\r\n\r\nconst VLine = ({ bg, width = \"1px\", height = \"10px\" }) => {\r\n  return (\r\n    <Container style={{ backgroundColor: bg }} width={width} height={height} />\r\n  );\r\n};\r\n\r\nexport default VLine;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport VLine from \"../../../../../../common/VLine\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  width: 260px;\r\n  border: 1px solid #cecece;\r\n  background-color: white;\r\n  height: 40px;\r\n`;\r\n\r\nconst Button = styled.div`\r\n  flex: 1;\r\n  color: ${props => (props.disabled ? \"gray\" : \"black\")};\r\n  pointer-events: ${props => (props.disabled ? \"none\" : \"\")};\r\n  cursor: pointer;\r\n  font-size: 22px;\r\n  font-weight: bold;\r\n`;\r\n\r\nconst TextField = styled.div`\r\n  flex: 1;\r\n  color: gray;\r\n  font-size: 22px;\r\n`;\r\n\r\nconst AddMinusButtons = ({\r\n  content,\r\n  min,\r\n  max,\r\n  leftButton,\r\n  rightButton,\r\n  steps,\r\n  onUpdateSettings\r\n}) => {\r\n  return (\r\n    <Container>\r\n      <Button\r\n        onClick={() => onUpdateSettings(content - steps)}\r\n        disabled={content <= min}\r\n      >\r\n        {leftButton}\r\n      </Button>\r\n      <VLine bg={\"#cecece\"} height={\"20px\"} width={\"1px\"} />\r\n      <TextField>{content}</TextField>\r\n      <VLine bg={\"#cecece\"} height={\"20px\"} width={\"1px\"} />\r\n      <Button\r\n        onClick={() => onUpdateSettings(content + steps)}\r\n        disabled={content >= max}\r\n      >\r\n        {rightButton}\r\n      </Button>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default AddMinusButtons;\r\n","import React from \"react\";\r\nimport AddMinusButtons from \"./AddMinusButtons\";\r\n\r\nconst FontSizeButton = ({ fontSize = 18, onUpdateSettings }) => {\r\n  return (\r\n    <AddMinusButtons\r\n      content={fontSize}\r\n      leftButton={\"A-\"}\r\n      rightButton={\"A+\"}\r\n      min={12}\r\n      max={40}\r\n      steps={2}\r\n      onUpdateSettings={value => onUpdateSettings(\"fontSize\", value)}\r\n    />\r\n  );\r\n};\r\n\r\nexport default FontSizeButton;\r\n","import React from \"react\";\r\nimport AddMinusButtons from \"./AddMinusButtons\";\r\nimport { Icon } from \"semantic-ui-react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst ButtonBox = styled.div``;\r\n\r\nconst Button = ({ children }) => {\r\n  return (\r\n    <ButtonBox>\r\n      <Icon name={\"sticky note outline\"} />\r\n      {children}\r\n    </ButtonBox>\r\n  );\r\n};\r\n\r\nconst ContentWidthButton = ({ contentWidth, onUpdateSettings }) => {\r\n  return (\r\n    <AddMinusButtons\r\n      content={contentWidth}\r\n      leftButton={<Button>-</Button>}\r\n      rightButton={<Button>+</Button>}\r\n      min={650}\r\n      max={1000}\r\n      steps={50}\r\n      onUpdateSettings={value => onUpdateSettings(\"contentWidth\", value)}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ContentWidthButton;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Themes from \"./settings/Themes\";\r\nimport FontFamilySelector from \"./settings/FontFamilySelector\";\r\nimport FontSizeButton from \"./settings/FontSizeButton\";\r\nimport ContentWidthButton from \"./settings/ContentWidthButton\";\r\n\r\nconst Container = styled.div`\r\n  width: 500px;\r\n  min-height: 400px;\r\n  color: black;\r\n  padding: 0 16px 40px;\r\n`;\r\n\r\nconst Header = styled.div`\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  font-size: 20px;\r\n  padding-bottom: 10px;\r\n  color: black;\r\n  font-weight: bold;\r\n`;\r\n\r\nconst SettingItemBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 40px;\r\n`;\r\n\r\nconst SettingItemTitle = styled.div`\r\n  width: 60px;\r\n  margin-right: 16px;\r\n`;\r\n\r\nconst SettingItemContent = styled.div`\r\n  flex: 1;\r\n`;\r\n\r\nconst SettingItem = ({ title, children }) => {\r\n  return (\r\n    <SettingItemBox>\r\n      <SettingItemTitle>{title}</SettingItemTitle>\r\n      <SettingItemContent>{children}</SettingItemContent>\r\n    </SettingItemBox>\r\n  );\r\n};\r\n\r\nconst ResetButtonBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 100%;\r\n  padding-top: 20px;\r\n`;\r\n\r\nconst ResetButton = styled.div`\r\n  color: white;\r\n  font-size: 16px;\r\n  background-color: #f02737;\r\n  padding: 10px 20px;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst Settings = ({ settings, onUpdateSettings, onResetSettings }) => {\r\n  const { theme, fontFamily, fontSize, contentWidth } = settings;\r\n  return (\r\n    <Container>\r\n      <Header>\r\n        <Title>设置</Title>\r\n      </Header>\r\n      <SettingItem title={\"阅读主题\"}>\r\n        <Themes currentTheme={theme} onUpdateSettings={onUpdateSettings} />\r\n      </SettingItem>\r\n      <SettingItem title={\"正文字体\"}>\r\n        <FontFamilySelector\r\n          fontFamily={fontFamily}\r\n          onUpdateSettings={onUpdateSettings}\r\n        />\r\n      </SettingItem>\r\n      <SettingItem title={\"字体大小\"}>\r\n        <FontSizeButton\r\n          fontSize={fontSize}\r\n          onUpdateSettings={onUpdateSettings}\r\n        />\r\n      </SettingItem>\r\n      <SettingItem title={\"页面宽度\"}>\r\n        <ContentWidthButton\r\n          contentWidth={contentWidth}\r\n          onUpdateSettings={onUpdateSettings}\r\n        />\r\n      </SettingItem>\r\n      <ResetButtonBox>\r\n        <ResetButton onClick={onResetSettings}>恢复默认设置</ResetButton>\r\n      </ResetButtonBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Settings;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { MAIN_RED } from \"../Styles\";\r\n\r\nconst Container = styled.div`\r\n  padding: 16px 0;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  color: black;\r\n  &:hover {\r\n    color: ${MAIN_RED};\r\n  }\r\n  border-bottom: 1px solid\r\n    ${props => (props.isLastOne ? \"transparent\" : \"#cecece\")};\r\n`;\r\n\r\nconst Title = styled.div`\r\n  text-align: left;\r\n  font-size: 18px;\r\n`;\r\n\r\nconst DateText = styled.div`\r\n  color: #cecece;\r\n`;\r\n\r\nconst BookMarkItem = ({\r\n  follower: {\r\n    followedObj: { name },\r\n    objId,\r\n    lastUpdated\r\n  },\r\n  onToChapter,\r\n  isLastOne\r\n}) => {\r\n  return (\r\n    <Container isLastOne={isLastOne} onClick={() => onToChapter(objId)}>\r\n      <Title>{name}</Title>\r\n      <DateText>{lastUpdated}</DateText>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BookMarkItem;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { GET_FOLLOWERS } from \"../../../../../common/queryGql\";\r\nimport { OBJ_TYPES } from \"../../../../../common/CONSULT\";\r\nimport _map from \"lodash/map\";\r\nimport BookMarkItem from \"../../../../../common/item/BookMarkItem\";\r\nimport LoadingWrapper from \"../../../../../common/LoadingWapper\";\r\nimport PaginationQueryList from \"../../../../../common/PaginationQueryList\";\r\nimport RefetchHandle from \"../../../../../common/RefetchHandle\";\r\n\r\nconst Header = styled.div`\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  font-size: 20px;\r\n  padding-bottom: 10px;\r\n  color: black;\r\n  font-weight: bold;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  width: 400px;\r\n  padding: 0 16px;\r\n  min-height: 300px;\r\n`;\r\n\r\nconst BookMark = ({\r\n  bookId,\r\n  onToChapter,\r\n  userId,\r\n  markChanged,\r\n  setMarkChanged\r\n}) => {\r\n  return (\r\n    <PaginationQueryList\r\n      gql={GET_FOLLOWERS}\r\n      dataKey={\"followers\"}\r\n      hidePaginationInSinglePage\r\n      paginationSecondary={true}\r\n      paginationSize={\"mini\"}\r\n      searchFields={{\r\n        types: [OBJ_TYPES.CHAPTER],\r\n        userId,\r\n        chapterBookId: bookId,\r\n        sort: \"lastUpdated\",\r\n        order: \"desc\"\r\n      }}\r\n      queryOptions={{\r\n        onCompleted: () => {\r\n          setMarkChanged(false);\r\n        }\r\n      }}\r\n    >\r\n      {({ items, loading, refetch }) => {\r\n        return (\r\n          <LoadingWrapper loading={loading}>\r\n            <Container>\r\n              <Header>\r\n                <Title>书签</Title>\r\n              </Header>\r\n              {_map(items, (item, index) => {\r\n                const isLastOne = items.length === index + 1;\r\n                return (\r\n                  <BookMarkItem\r\n                    key={\"book_mark_\" + item.id}\r\n                    isLastOne={isLastOne}\r\n                    follower={item}\r\n                    onToChapter={onToChapter}\r\n                  />\r\n                );\r\n              })}\r\n              <RefetchHandle\r\n                refetchOnce={markChanged}\r\n                refetch={refetch}\r\n                id={\"refetch_menu_followers\"}\r\n              />\r\n            </Container>\r\n          </LoadingWrapper>\r\n        );\r\n      }}\r\n    </PaginationQueryList>\r\n  );\r\n};\r\n\r\nexport default BookMark;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useSwitchFollow } from \"../../../../../../common/hooks\";\r\nimport { OBJ_TYPES } from \"../../../../../../common/CONSULT\";\r\nimport { MAIN_RED } from \"../../../../../../common/Styles\";\r\n\r\nconst Container = styled.div``;\r\n\r\nconst RedButton = styled.div`\r\n  cursor: pointer;\r\n  background-color: ${MAIN_RED};\r\n  color: white;\r\n  height: 30px;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  line-height: 30px;\r\n  pointer-events: ${props => (props.disabled ? \"none\" : \"\")};\r\n`;\r\n\r\nconst FollowBookButton = ({ currentFollowed, bookId, children, refetch }) => {\r\n  const { followed, mLoading, onSwitchFollow } = useSwitchFollow({\r\n    currentFollowed,\r\n    objId: bookId,\r\n    objType: OBJ_TYPES.BOOK,\r\n    onSwitchCompleted: () => refetch(),\r\n    successMsg: { followed: \"已成功加入书架！\", unFollowed: \"移出书架成功！\" },\r\n    errorMsg: { followed: \"加入书架失败！\", unFollowed: \"移出书架失败！\" }\r\n  });\r\n  return (\r\n    <Container>\r\n      {children}\r\n      <RedButton disabled={mLoading} onClick={onSwitchFollow}>\r\n        {followed ? \"移出书架\" : \"加入书架\"}\r\n      </RedButton>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default FollowBookButton;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { GET_FOLLOWERS } from \"../../../../../common/queryGql\";\r\nimport { OBJ_TYPES } from \"../../../../../common/CONSULT\";\r\nimport PaginationQueryList from \"../../../../../common/PaginationQueryList\";\r\nimport _map from \"lodash/map\";\r\nimport BookItem from \"../../../../../common/item/BookItem\";\r\nimport FollowBookButton from \"./bookshelf/FollowBookButton\";\r\nimport { followDataToJson } from \"../../../../../utils/jsonUtils\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  width: 560px;\r\n  cursor: default;\r\n  padding-bottom: 20px;\r\n  min-height: 400px;\r\n`;\r\n\r\nconst AddButtonField = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst Bookshelf = ({ book, onToBook, userId }) => {\r\n  return (\r\n    <PaginationQueryList\r\n      gql={GET_FOLLOWERS}\r\n      dataKey={\"followers\"}\r\n      hidePaginationInSinglePage\r\n      paginationSecondary={true}\r\n      paginationSize={\"mini\"}\r\n      searchFields={{\r\n        types: [OBJ_TYPES.BOOK],\r\n        userId,\r\n        limit: 12,\r\n        sort: \"lastUpdated\",\r\n        order: \"desc\"\r\n      }}\r\n      queryOptions={{\r\n        onCompleted: () => {}\r\n      }}\r\n    >\r\n      {({ items, loading, refetch }) => {\r\n        return (\r\n          <Container>\r\n            <AddButtonField>\r\n              <FollowBookButton\r\n                bookId={book.id}\r\n                refetch={refetch}\r\n                currentFollowed={book.currentFollowed}\r\n              >\r\n                <BookItem onToBook={onToBook} book={book} />\r\n              </FollowBookButton>\r\n            </AddButtonField>\r\n\r\n            {_map(items, item => {\r\n              const book = followDataToJson(item.followedObj);\r\n              return (\r\n                <BookItem\r\n                  key={\"book_shelf_book_\" + item.id}\r\n                  book={book}\r\n                  size={0.8}\r\n                  onToBook={onToBook}\r\n                />\r\n              );\r\n            })}\r\n          </Container>\r\n        );\r\n      }}\r\n    </PaginationQueryList>\r\n  );\r\n};\r\n\r\nexport default Bookshelf;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Icon } from \"semantic-ui-react\";\r\nimport Catalogues from \"./content/Catalogues\";\r\nimport MenuModal from \"./MenuModal\";\r\nimport Settings from \"./content/Settings\";\r\nimport _get from \"lodash/get\";\r\nimport BookMark from \"./content/Bookmark\";\r\nimport Bookshelf from \"./content/Bookshelf\";\r\n\r\nexport const MENU_HEIGHT = 78;\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  padding: 14px;\r\n  height: ${MENU_HEIGHT}px;\r\n  position: relative;\r\n  color: ${props => (props.show ? \"#f02737\" : \"\")};\r\n  &:hover {\r\n    color: #f02737;\r\n  }\r\n  background-color: ${props =>\r\n    props.show ? props.activeColor : props.bgColor};\r\n`;\r\n\r\nconst Title = styled.div`\r\n  margin-top: 2px;\r\n  font-size: 14px;\r\n  text-align: left;\r\n  margin-right: 4px;\r\n`;\r\n\r\nconst MenuBox = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  z-index: 100;\r\n`;\r\n\r\nconst getContentByType = (\r\n  type,\r\n  data,\r\n  {\r\n    onToChapter,\r\n    onToBook,\r\n    onUpdateSettings,\r\n    onResetSettings,\r\n    settings,\r\n    markChanged,\r\n    setMarkChanged\r\n  }\r\n) => {\r\n  const userId = _get(data, \"currentUser.id\");\r\n  switch (type) {\r\n    case \"Catalogue\":\r\n      return <Catalogues book={data} onToChapter={onToChapter} />;\r\n    case \"Bookshelf\":\r\n      console.log(\"dat__________________AA\", data);\r\n      return <Bookshelf book={data.book} userId={userId} onToBook={onToBook} />;\r\n    case \"Bookmark\":\r\n      return (\r\n        <BookMark\r\n          bookId={data.bookId}\r\n          userId={userId}\r\n          onToChapter={onToChapter}\r\n          markChanged={markChanged}\r\n          setMarkChanged={setMarkChanged}\r\n        />\r\n      );\r\n    case \"Settings\":\r\n      return (\r\n        <Settings\r\n          settings={settings}\r\n          onUpdateSettings={onUpdateSettings}\r\n          onResetSettings={onResetSettings}\r\n        />\r\n      );\r\n  }\r\n};\r\n\r\nconst ActivityBar = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 40px;\r\n  width: 100px;\r\n  height: 100%;\r\n  background-color: ${props => props.bgColor};\r\n`;\r\n\r\nconst Menu = ({\r\n  index,\r\n  clickEleId,\r\n  title,\r\n  icon,\r\n  showType,\r\n  type,\r\n  data,\r\n  modalWidth,\r\n  modalHeight,\r\n  setShowType,\r\n  onToChapter,\r\n  onToBook,\r\n  settings,\r\n  onUpdateSettings,\r\n  onResetSettings,\r\n  switchBefore,\r\n  markChanged,\r\n  setMarkChanged\r\n}) => {\r\n  const show = showType === type;\r\n  const content = getContentByType(type, data, {\r\n    onToChapter,\r\n    onToBook,\r\n    onUpdateSettings,\r\n    onResetSettings,\r\n    settings,\r\n    markChanged,\r\n    setMarkChanged\r\n  });\r\n  const { lightColor, color } = _get(settings, \"theme\");\r\n  return (\r\n    <Container show={show} activeColor={lightColor} bgColor={color}>\r\n      {show && <ActivityBar bgColor={lightColor} />}\r\n      <MenuBox\r\n        id={clickEleId}\r\n        onClick={() =>\r\n          switchBefore\r\n            ? switchBefore(() => setShowType(showType ? \"\" : type))\r\n            : setShowType(showType ? \"\" : type)\r\n        }\r\n      >\r\n        <Icon size={\"big\"} name={icon} />\r\n        <Title>{title}</Title>\r\n      </MenuBox>\r\n      <MenuModal\r\n        width={modalWidth}\r\n        height={modalHeight}\r\n        show={show}\r\n        bgColor={lightColor}\r\n        menuIndex={index}\r\n        onClose={() => setShowType(\"\")}\r\n      >\r\n        {content}\r\n      </MenuModal>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Menu from \"./menus/Menu\";\r\nimport { BOOK, CHAPTER } from \"../../../common/CONSULT\";\r\nimport LoginHint from \"../../../common/LoginHint\";\r\nimport { AppContext } from \"../../../../App\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  position: ${props => (props.toFixed ? \"absolute\" : \"absolute\")};\r\n  left: -90px;\r\n  top: ${props => (props.toFixed ? 12 : 0)}px;\r\n`;\r\n\r\nconst MenusBox = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n`;\r\n\r\nconst Menus = ({\r\n  chapter,\r\n  onGoTo,\r\n  settings,\r\n  onUpdateSettings,\r\n  onResetSettings,\r\n  markChanged,\r\n  setMarkChanged\r\n}) => {\r\n  const [showType, setShowType] = useState(\"\");\r\n  const [toFixed, setToFixed] = useState(false);\r\n  useEffect(() => {\r\n    const scrollToFix = () => {\r\n      const scrollTo = window.pageYOffset;\r\n      if (scrollTo >= 140) {\r\n        setToFixed(true);\r\n      } else {\r\n        setToFixed(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"scroll\", scrollToFix);\r\n    return () => document.removeEventListener(\"scroll\", scrollToFix);\r\n  }, []);\r\n  const settingsProps = { settings, onUpdateSettings, onResetSettings };\r\n  return (\r\n    <AppContext.Consumer>\r\n      {props => {\r\n        const { currentUser } = props;\r\n        const onToChapter = id => onGoTo(`${CHAPTER}${id}`);\r\n        const onToBook = id => onGoTo(`${BOOK}${id}`);\r\n        return (\r\n          <Container toFixed={toFixed}>\r\n            <MenusBox style={{ position: toFixed ? \"fixed\" : \"\" }}>\r\n              <Menu\r\n                index={0}\r\n                {...settingsProps}\r\n                title={\"目录\"}\r\n                clickEleId={\"catalogue\"}\r\n                onToChapter={onToChapter}\r\n                data={chapter.book}\r\n                icon={\"list ul\"}\r\n                type={\"Catalogue\"}\r\n                showType={showType}\r\n                modalWidth={800}\r\n                setShowType={setShowType}\r\n              />\r\n              <Menu\r\n                index={1}\r\n                {...settingsProps}\r\n                title={\"书架\"}\r\n                data={{ book: chapter.book, currentUser }}\r\n                icon={\"industry\"}\r\n                type={\"Bookshelf\"}\r\n                onToBook={onToBook}\r\n                switchBefore={callback => LoginHint.checkLogin(callback)}\r\n                showType={showType}\r\n                setShowType={setShowType}\r\n              />\r\n              <Menu\r\n                index={2}\r\n                {...settingsProps}\r\n                title={\"书签\"}\r\n                markChanged={markChanged}\r\n                setMarkChanged={setMarkChanged}\r\n                switchBefore={callback => LoginHint.checkLogin(callback)}\r\n                icon={\"bookmark outline\"}\r\n                type={\"Bookmark\"}\r\n                onToChapter={onToChapter}\r\n                data={{ bookId: chapter.book.id, currentUser }}\r\n                showType={showType}\r\n                setShowType={setShowType}\r\n              />\r\n              <Menu\r\n                index={3}\r\n                {...settingsProps}\r\n                title={\"设置\"}\r\n                icon={\"cog\"}\r\n                type={\"Settings\"}\r\n                showType={showType}\r\n                setShowType={setShowType}\r\n              />\r\n            </MenusBox>\r\n          </Container>\r\n        );\r\n      }}\r\n    </AppContext.Consumer>\r\n  );\r\n};\r\n\r\nexport default Menus;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport ReportHint from \"../../../common/ReportHint\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-top: 20px;\r\n`;\r\n\r\nconst ReportText = styled.div`\r\n  color: #99a2aa;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst ReportButton = ({ chapterId, currentReport }) => {\r\n  const [report, setReport] = useState(currentReport);\r\n  return (\r\n    <Container>\r\n      <ReportText\r\n        onClick={() =>\r\n          ReportHint.show(\"Chapter\", chapterId, report, {\r\n            reportCallback: report => setReport(report)\r\n          })\r\n        }\r\n      >\r\n        {report ? \"已举报\" : \"举报\"}\r\n      </ReportText>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ReportButton;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Icon } from \"semantic-ui-react\";\r\nimport { useSwitchFollow } from \"../../../common/hooks\";\r\nimport { OBJ_TYPES } from \"../../../common/CONSULT\";\r\nimport { MAIN_RED } from \"../../../common/Styles\";\r\nimport { clickEle } from \"../../../utils/elementLink\";\r\nimport PersistStorage from \"../../../utils/PersistStorage\";\r\n\r\nconst Container = styled.div`\r\n  position: absolute;\r\n  top: -4px;\r\n  right: 30px;\r\n  color: ${props => (props.followed ? MAIN_RED : \"#ddd8cf\")};\r\n  font-size: 12px;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst BookMark = ({ currentFollowed, chapterId, setMarkChanged }) => {\r\n  const { followed, onSwitchFollow, mLoading } = useSwitchFollow({\r\n    currentFollowed,\r\n    onSwitchCompleted: () => {\r\n      clickEle(\"refetch_menu_followers\");\r\n      PersistStorage.setItem(\"markChanged\", true);\r\n      setMarkChanged(true);\r\n    },\r\n    objId: chapterId,\r\n    objType: OBJ_TYPES.CHAPTER,\r\n    successMsg: { followed: \"添加书签成功！\", unFollowed: \"移除书签成功\" },\r\n    errorMsg: { followed: \"添加书签失败！\", unFollowed: \"移除书签失败\" }\r\n  });\r\n  return (\r\n    <Container followed={followed}>\r\n      <Icon\r\n        disabled={mLoading}\r\n        onClick={onSwitchFollow}\r\n        size={\"huge\"}\r\n        name={\"bookmark\"}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BookMark;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Title from \"./Title\";\r\nimport BasicInfo from \"./BasicInfo\";\r\nimport Article from \"./Article\";\r\nimport Menus from \"./Menus\";\r\nimport _get from \"lodash/get\";\r\nimport ReportButton from \"./ReportButton\";\r\nimport BookMark from \"./BookMark\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  position: relative;\r\n  flex-direction: column;\r\n  padding: 60px 40px 40px;\r\n  width: ${props => props.contentWidth}px;\r\n  margin-top: 60px;\r\n  background-color: ${props => props.bgColor};\r\n`;\r\n\r\nconst ChapterContent = ({\r\n  chapter,\r\n  onGoTo,\r\n  settings,\r\n  onUpdateSettings,\r\n  onResetSettings\r\n}) => {\r\n  const [markChanged, setMarkChanged] = useState(false);\r\n  if (!chapter) {\r\n    return null;\r\n  }\r\n  const {\r\n    title,\r\n    creator,\r\n    lastUpdated,\r\n    readCount,\r\n    book,\r\n    contentUrl,\r\n    id,\r\n    currentReport,\r\n    currentFollowed,\r\n    currentUpped,\r\n    upCount,\r\n    charsCount\r\n  } = chapter;\r\n  return (\r\n    <Container\r\n      contentWidth={settings.contentWidth}\r\n      bgColor={_get(settings, \"theme.color\", \"#f6f1e7\")}\r\n    >\r\n      <BookMark\r\n        key={currentFollowed}\r\n        chapterId={id}\r\n        currentFollowed={currentFollowed}\r\n        setMarkChanged={setMarkChanged}\r\n      />\r\n      <Title title={title} />\r\n      <BasicInfo\r\n        key={currentUpped}\r\n        chapterId={id}\r\n        creator={creator}\r\n        bookName={book.name}\r\n        lastUpdated={lastUpdated}\r\n        readCount={readCount}\r\n        currentUpped={currentUpped}\r\n        upCount={upCount}\r\n        charsCount={charsCount}\r\n      />\r\n      <Article settings={settings} contentUrl={contentUrl} />\r\n      <ReportButton chapterId={id} currentReport={currentReport} />\r\n      <Menus\r\n        markChanged={markChanged}\r\n        setMarkChanged={setMarkChanged}\r\n        settings={settings}\r\n        onUpdateSettings={onUpdateSettings}\r\n        onResetSettings={onResetSettings}\r\n        chapter={chapter}\r\n        onGoTo={onGoTo}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ChapterContent;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 60px;\r\n  flex: 1;\r\n  cursor: pointer;\r\n  opacity: ${props => (props.disabled ? 0.6 : 1)};\r\n  &:hover {\r\n    background-color: rgba(246, 241, 231, 0.6);\r\n    color: #f02737;\r\n  }\r\n  pointer-events: ${props => (props.disabled ? \"none\" : \"\")};\r\n`;\r\n\r\nconst ButtonText = styled.div`\r\n  font-size: 24px;\r\n`;\r\n\r\nconst BottomButton = ({ text, disabled, onClick }) => {\r\n  return (\r\n    <Container onClick={onClick} disabled={disabled}>\r\n      <ButtonText>{text}</ButtonText>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BottomButton;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport BottomButton from \"./BottomButton\";\r\nimport VLine from \"../../../common/VLine\";\r\nimport _get from \"lodash/get\";\r\nimport _findIndex from \"lodash/findIndex\";\r\n\r\nconst BottomsBox = styled.div`\r\n  display: flex;\r\n  width: 800px;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n  margin-top: 20px;\r\n  background-color: #f6f1e7;\r\n`;\r\n\r\nconst BottomButtons = ({ chapter, onToChapter }) => {\r\n  const chapters = _get(chapter, \"book.chapters\", []);\r\n  const chapterIndex = _findIndex(chapters, c => c.id === chapter.id);\r\n  return (\r\n    <BottomsBox>\r\n      <BottomButton\r\n        text={\"上一章\"}\r\n        onClick={() => onToChapter(chapters[chapterIndex - 1].id)}\r\n        disabled={chapterIndex === 0}\r\n      />\r\n      <VLine height={\"26px\"} bg={\"#cecece\"} />\r\n      <BottomButton\r\n        text={\"目录\"}\r\n        onClick={() => document.getElementById(\"catalogue\").click()}\r\n      />\r\n      <VLine height={\"26px\"} bg={\"#cecece\"} />\r\n      <BottomButton\r\n        text={\"下一章\"}\r\n        onClick={() => onToChapter(chapters[chapterIndex + 1].id)}\r\n        disabled={chapterIndex === chapters.length - 1}\r\n      />\r\n    </BottomsBox>\r\n  );\r\n};\r\n\r\nexport default BottomButtons;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Comments from \"../../../common/comment/Comments\";\r\nimport { OBJ_TYPES } from \"../../../common/CONSULT\";\r\n\r\nconst Title = styled.div`\r\n  text-align: left;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  margin-bottom: 10px;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  background-color: #f6f1e7;\r\n  margin-top: 20px;\r\n  min-height: 300px;\r\n  padding: 20px;\r\n`;\r\n\r\nconst ChapterComments = ({ chapterId }) => {\r\n  return (\r\n    <Container>\r\n      <Title>评论</Title>\r\n      <Comments type={OBJ_TYPES.CHAPTER} objId={chapterId} />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default ChapterComments;\r\n","import React, { useState, useEffect, useReducer } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport ChapterContent from \"./chapterSegaments/ChapterContent\";\r\nimport PageItem from \"../QueryItem\";\r\nimport { getRouteId } from \"../../utils/routeUtils\";\r\nimport { GET_CHAPTER } from \"../../common/queryGql\";\r\nimport BottomButtons from \"./chapterSegaments/BottomButtons\";\r\nimport {\r\n  BOOKS_READ,\r\n  CHAPTER,\r\n  CHAPTER_PAGE_SETTINGS,\r\n  OBJ_TYPES,\r\n  UPDATED\r\n} from \"../../common/CONSULT\";\r\nimport ChapterComments from \"./chapterSegaments/ChapterComments\";\r\nimport PersistStorage from \"../../utils/PersistStorage\";\r\nimport RefetchHandle from \"../../common/RefetchHandle\";\r\nimport { useRead } from \"../../common/hooks\";\r\nimport CurrentObjLoader from \"../../common/CurrentObjLoader\";\r\nimport PageTitle from \"../../common/PageTitle\";\r\nimport { AppContext } from \"../../../App\";\r\n\r\nconst ChapterBox = styled.div`\r\n  padding-bottom: 60px;\r\n`;\r\n\r\nconst INIT_SETTINGS_STATE = {\r\n  theme: { color: \"#F6F1E7\", lightColor: \"#FAF9F3\" },\r\n  fontFamily: \"SimSun\",\r\n  fontSize: 18,\r\n  contentWidth: 800\r\n};\r\n\r\nconst useChapter = ({ chapter, setGlobalBgColor }) => {\r\n  useRead({ objId: chapter.id, objType: OBJ_TYPES.CHAPTER });\r\n  // 更新阅读章节\r\n  const booksRead = PersistStorage.getItem(`booksRead`);\r\n  PersistStorage.setItem(BOOKS_READ, {\r\n    ...booksRead,\r\n    [chapter.book.id]: chapter.id\r\n  });\r\n  // 章节阅读设置处理\r\n  const initState =\r\n    PersistStorage.getItem(CHAPTER_PAGE_SETTINGS) || INIT_SETTINGS_STATE;\r\n  const [settings, dispatch] = useReducer((state, action) => {\r\n    let result = {\r\n      ...state,\r\n      [action.key]: action.value\r\n    };\r\n    if (action.type === \"RESET\") {\r\n      result = INIT_SETTINGS_STATE;\r\n    }\r\n    PersistStorage.setItem(CHAPTER_PAGE_SETTINGS, result);\r\n    return result;\r\n  }, initState);\r\n  const onUpdateSettings = (key, value) => {\r\n    dispatch({ key, value });\r\n  };\r\n  const onResetSettings = () => {\r\n    dispatch({ type: \"RESET\" });\r\n  };\r\n\r\n  const refetchNow = PersistStorage.getItem(\r\n    `${OBJ_TYPES.CHAPTER}${chapter.id}${UPDATED}`\r\n  );\r\n  useEffect(() => {\r\n    setGlobalBgColor(\"#eae5d9\");\r\n    return () => {\r\n      setGlobalBgColor(\"white\");\r\n    };\r\n  }, []);\r\n  return { settings, onUpdateSettings, onResetSettings, refetchNow };\r\n};\r\n\r\nconst _Chapter = ({\r\n  chapter,\r\n  refetchChapter,\r\n  onGoTo,\r\n  loading,\r\n  setGlobalBgColor\r\n}) => {\r\n  const {\r\n    settings,\r\n    onUpdateSettings,\r\n    onResetSettings,\r\n    refetchNow\r\n  } = useChapter({\r\n    chapter,\r\n    setGlobalBgColor\r\n  });\r\n  return (\r\n    <CurrentObjLoader openedObj={chapter.book}>\r\n      <PageTitle\r\n        title={`${chapter.title}_章节`}\r\n        metaKeywords={`${chapter.title}_${chapter.subtitle}_章节`}\r\n      />\r\n      <ChapterBox>\r\n        <ChapterContent\r\n          settings={settings}\r\n          onUpdateSettings={onUpdateSettings}\r\n          onResetSettings={onResetSettings}\r\n          chapter={chapter}\r\n          onGoTo={onGoTo}\r\n        />\r\n        <BottomButtons\r\n          chapter={chapter}\r\n          onToChapter={id => onGoTo(`${CHAPTER}${id}`)}\r\n        />\r\n        <ChapterComments chapterId={chapter.id} />\r\n        <RefetchHandle\r\n          refetchOnce={refetchNow}\r\n          refetch={() => {\r\n            refetchChapter();\r\n            PersistStorage.setItem(\r\n              `${OBJ_TYPES.CHAPTER}${chapter.id}${UPDATED}`,\r\n              false\r\n            );\r\n          }}\r\n        />\r\n      </ChapterBox>\r\n    </CurrentObjLoader>\r\n  );\r\n};\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  background-color: #eae5d9;\r\n`;\r\n\r\nconst Chapter = ({ history, location, onGoTo }) => {\r\n  return (\r\n    <AppContext.Consumer>\r\n      {props => {\r\n        const { setGlobalBgColor } = props;\r\n        return (\r\n          <Container>\r\n            <PageItem\r\n              autoLoading\r\n              id={getRouteId()}\r\n              itemPath={\"chapter\"}\r\n              gql={GET_CHAPTER}\r\n            >\r\n              {({ loading, refetch, item }) => {\r\n                return (\r\n                  <_Chapter\r\n                    setGlobalBgColor={setGlobalBgColor}\r\n                    loading={loading}\r\n                    chapter={item}\r\n                    refetchChapter={refetch}\r\n                    onGoTo={onGoTo}\r\n                  />\r\n                );\r\n              }}\r\n            </PageItem>\r\n          </Container>\r\n        );\r\n      }}\r\n    </AppContext.Consumer>\r\n  );\r\n};\r\n\r\nexport default Chapter;\r\n","export const MAIN_RED = \"#f02737\";","export const strToJson = str => {\r\n  return JSON.parse(str);\r\n};\r\n\r\nexport const followDataToJson = follow => {\r\n  return strToJson(follow.data);\r\n};\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Icon } from \"semantic-ui-react\";\r\nimport { useMutation } from \"@apollo/react-hooks\";\r\nimport { SWITCH_UP_COMMENT } from \"../../mutationGql\";\r\nimport ModalHint from \"../../ModalHint\";\r\nimport ReportHint from \"../../ReportHint\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  justify-content: space-between;\r\n  margin-top: 10px;\r\n  color: #99a2aa;\r\n`;\r\n\r\nconst DateText = styled.div`\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst ReplyButton = styled.div`\r\n  cursor: pointer;\r\n  margin-left: 10px;\r\n`;\r\n\r\nconst MainActionsBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst ReportButton = styled.div`\r\n  cursor: pointer;\r\n  font-size: 10px;\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst ThumbsUp = styled(Icon)`\r\n  cursor: pointer;\r\n  margin-right: 4px !important;\r\n  margin-bottom: 4px !important;\r\n`;\r\n\r\nconst UpCount = styled.div``;\r\n\r\nconst useCommentActions = ({ upCount, currentUpped, currentReport }) => {\r\n  const [uCount, setUCount] = useState(upCount);\r\n  const [report, setReport] = useState(currentReport);\r\n  const [cUpped, setCUpped] = useState(currentUpped);\r\n  const [switchUpComment, { data, loading }] = useMutation(SWITCH_UP_COMMENT, {\r\n    onCompleted: data => {\r\n      const { switchUpComment } = data;\r\n      setUCount(switchUpComment.upCount);\r\n      setCUpped(switchUpComment.currentUpped);\r\n    },\r\n    onError: () => ModalHint.error(\"点赞失败\")\r\n  });\r\n  return {\r\n    uCount,\r\n    setUCount,\r\n    cUpped,\r\n    setCUpped,\r\n    switchUpComment,\r\n    report,\r\n    setReport\r\n  };\r\n};\r\n\r\nconst CommentActions = ({\r\n  commentId,\r\n  dateCreated,\r\n  onReply,\r\n  upCount,\r\n  currentUpped,\r\n  currentReport\r\n}) => {\r\n  const {\r\n    uCount,\r\n    cUpped,\r\n    switchUpComment,\r\n    report,\r\n    setReport\r\n  } = useCommentActions({\r\n    upCount,\r\n    currentUpped,\r\n    currentReport\r\n  });\r\n  return (\r\n    <Container>\r\n      <MainActionsBox>\r\n        <DateText>{dateCreated}</DateText>\r\n        <ThumbsUp\r\n          color={cUpped ? \"red\" : \"\"}\r\n          onClick={e => {\r\n            e.stopPropagation();\r\n            switchUpComment({ variables: { commentId } });\r\n          }}\r\n          name={cUpped ? \"thumbs up\" : \"thumbs up outline\"}\r\n        />\r\n        {uCount > 0 && <UpCount>{uCount}</UpCount>}\r\n        {onReply && <ReplyButton onClick={onReply}>回复</ReplyButton>}\r\n      </MainActionsBox>\r\n      <ReportButton\r\n        onClick={e => {\r\n          e.stopPropagation();\r\n          ReportHint.show(\"Comment\", commentId, report, {\r\n            reportCallback: report => setReport(report)\r\n          });\r\n        }}\r\n      >\r\n        {report ? \"已举报\" : \"举报\"}\r\n      </ReportButton>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default CommentActions;\r\n","import React from \"react\";\r\nimport { Icon, Popup } from \"semantic-ui-react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst InfoItemBox = styled.div`\r\n  display: flex;\r\n  margin-left: 20px;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst ItemText = styled.div``;\r\n\r\nconst InfoItem = ({\r\n  icon,\r\n  mf,\r\n  boxStyle,\r\n  iconStyle,\r\n  text,\r\n  hintText,\r\n  onClick\r\n}) => {\r\n  const content = (\r\n    <InfoItemBox onClick={onClick} style={{ ...boxStyle, marginLeft: mf }}>\r\n      <Icon style={iconStyle} name={icon} />\r\n      <ItemText>{text}</ItemText>\r\n    </InfoItemBox>\r\n  );\r\n  return hintText ? <Popup content={hintText} trigger={content} /> : content;\r\n};\r\n\r\nexport default InfoItem;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { TextArea, Button } from \"semantic-ui-react\";\r\nimport Avatar from \"../../../pages/transformable/common/Avatar\";\r\nimport _get from \"lodash/get\";\r\nimport { useComment } from \"../../hooks\";\r\nimport LoginHint from \"../../LoginHint\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  height: 70px;\r\n  margin-bottom: 30px;\r\n`;\r\n\r\nconst LeftBox = styled.div`\r\n  width: 80px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n`;\r\n\r\nconst ContentBox = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n`;\r\n\r\nconst TextInput = styled(TextArea)`\r\n  flex: 1;\r\n  padding: 10px;\r\n  height: 65px;\r\n  outline: none;\r\n  border-radius: 6px;\r\n  &:focus {\r\n    -moz-outline-radius: 6px;\r\n    border: 1px solid lightskyblue;\r\n  }\r\n`;\r\n\r\nconst SendButton = styled(Button)``;\r\n\r\nconst CommentForm = ({\r\n  objId,\r\n  commentType,\r\n  currentUser,\r\n  refetchComments,\r\n  repliedCommentId,\r\n  parentId,\r\n  replyPlaceholder,\r\n  saveCallback\r\n}) => {\r\n  const [content, setContent] = useState(\"\");\r\n  const { mLoading, onSaveComment } = useComment({\r\n    refetch: refetchComments,\r\n    commentType,\r\n    repliedCommentId,\r\n    parentId,\r\n    objId,\r\n    saveCallback,\r\n    clearForm: () => setContent(\"\")\r\n  });\r\n  return (\r\n    <Container>\r\n      <LeftBox>\r\n        <Avatar width={54} size={\"big\"} url={_get(currentUser, \"avatar.url\")} />\r\n      </LeftBox>\r\n      <ContentBox>\r\n        <TextInput\r\n          onInput={(e, { value }) => setContent(value)}\r\n          onFocus={() => LoginHint.checkLogin()}\r\n          maxLength={255}\r\n          rows={4}\r\n          placeholder={replyPlaceholder}\r\n          value={content}\r\n        />\r\n        <SendButton\r\n          loading={mLoading}\r\n          onClick={() => LoginHint.checkLogin(() => onSaveComment(content))}\r\n          style={{ marginLeft: 10 }}\r\n          primary\r\n        >\r\n          发布\r\n        </SendButton>\r\n      </ContentBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default CommentForm;\r\n","import React, { useState } from \"react\";\r\nimport CommentForm from \"./CommentForm\";\r\n\r\nconst ReplyForm = ({\r\n  commentType,\r\n  objId,\r\n  currentUser,\r\n  refetchComments,\r\n  repliedCommentId,\r\n  parentId,\r\n  replyPlaceholder,\r\n  saveCallback\r\n}) => {\r\n  return (\r\n    <CommentForm\r\n      commentType={commentType}\r\n      objId={objId}\r\n      saveCallback={saveCallback}\r\n      repliedCommentId={repliedCommentId}\r\n      currentUser={currentUser}\r\n      parentId={parentId}\r\n      refetchComments={refetchComments}\r\n      replyPlaceholder={replyPlaceholder}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ReplyForm;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { _getByRank } from \"../../../utils/utils\";\r\nimport Avatar from \"../../../pages/transformable/common/Avatar\";\r\nimport _get from \"lodash/get\";\r\nimport CommentActions from \"./CommentActions\";\r\nimport ReplyForm from \"./ReplyForm\";\r\nimport { useReplyForm } from \"../../hooks\";\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n`;\r\n\r\nconst UserInfoBox = styled.div`\r\n  margin-bottom: 10px;\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst Name = styled.div`\r\n  color: #6d757a;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  text-align: left;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst Content = styled.div`\r\n  text-align: left;\r\n`;\r\n\r\nconst ReplyBox = styled.div`\r\n  font-size: 14px;\r\n  margin-left: 10px;\r\n`;\r\n\r\nconst ReplyUser = styled.span`\r\n  color: #00a1d6;\r\n  margin-left: 10px;\r\n  margin-right: 10px;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst UserInfo = ({ creator, repliedComment }) => {\r\n  return (\r\n    <UserInfoBox>\r\n      <Name>{_getByRank(creator, [\"nickname\", \"username\"])}</Name>\r\n      {repliedComment && (\r\n        <ReplyBox>\r\n          回复\r\n          <ReplyUser>\r\n            @{_getByRank(repliedComment.creator, [\"nickname\", \"username\"])}\r\n          </ReplyUser>\r\n          :\r\n        </ReplyBox>\r\n      )}\r\n    </UserInfoBox>\r\n  );\r\n};\r\n\r\nconst ContentInfo = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst AvatarBox = styled.div`\r\n  width: 40px;\r\n`;\r\n\r\nconst ContentBox = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n`;\r\n\r\nconst SubComment = ({\r\n  item,\r\n  currentUser,\r\n  objId,\r\n  type,\r\n  refchComments,\r\n  parentId,\r\n  onSaveCallback\r\n}) => {\r\n  const {\r\n    creator,\r\n    content,\r\n    dateCreated,\r\n    currentUpped,\r\n    upCount,\r\n    currentReport\r\n  } = item;\r\n  const { showReplyForm, setShowReplyForm, replyPlaceholder } = useReplyForm({\r\n    repliedComment: item\r\n  });\r\n  return (\r\n    <Container>\r\n      <AvatarBox>\r\n        <Avatar\r\n          size={\"small\"}\r\n          width={30}\r\n          avatar={_get(creator, \"avatar.url\")}\r\n        />\r\n      </AvatarBox>\r\n      <ContentBox>\r\n        <ContentInfo>\r\n          <UserInfo creator={creator} repliedComment={item.repliedComment} />\r\n          <Content>{content}</Content>\r\n          <CommentActions\r\n            onReply={() => setShowReplyForm(!showReplyForm)}\r\n            dateCreated={dateCreated}\r\n            currentUpped={currentUpped}\r\n            upCount={upCount}\r\n            commentId={item.id}\r\n            currentReport={currentReport}\r\n          />\r\n        </ContentInfo>\r\n        {showReplyForm && (\r\n          <ReplyForm\r\n            saveCallback={onSaveCallback}\r\n            replyPlaceholder={replyPlaceholder}\r\n            parentId={parentId}\r\n            currentUser={currentUser}\r\n            commentType={type}\r\n            objId={objId}\r\n            refetchComments={refchComments}\r\n            repliedCommentId={item.id}\r\n          />\r\n        )}\r\n      </ContentBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SubComment;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _map from \"lodash/map\";\r\nimport SubComment from \"./SubComment\";\r\n\r\nconst Container = styled.div``;\r\n\r\nconst CheckMoreBox = styled.div`\r\n  text-align: left;\r\n  color: #6d757a;\r\n  font-size: 12px;\r\n`;\r\n\r\nconst ClickMore = styled.span`\r\n  cursor: pointer;\r\n  color: #00a1d6;\r\n`;\r\n\r\nconst CheckMoreButton = ({ commentsCount, onCheckMore }) => {\r\n  if (commentsCount < 3) {\r\n    return null;\r\n  }\r\n  return (\r\n    <CheckMoreBox>\r\n      共<b>{commentsCount}</b>条回复，\r\n      <ClickMore onClick={onCheckMore}>点击查看</ClickMore>\r\n    </CheckMoreBox>\r\n  );\r\n};\r\n\r\nconst useLastSubComments = ({ item }) => {\r\n  const { last3Comments } = item;\r\n  const [subComments, setSubComments] = useState(last3Comments);\r\n  const [subCommentsCount, setSubCommentsCount] = useState(\r\n    item.subCommentsCount\r\n  );\r\n\r\n  return { subComments, subCommentsCount, setSubComments, setSubCommentsCount };\r\n};\r\n\r\nconst LastSubComments = ({\r\n  currentUser,\r\n  objId,\r\n  type,\r\n  parentId,\r\n  onCheckMore,\r\n  item\r\n}) => {\r\n  const {\r\n    subComments,\r\n    subCommentsCount,\r\n    setSubComments,\r\n    setSubCommentsCount\r\n  } = useLastSubComments({ item });\r\n  return (\r\n    <Container>\r\n      {_map(subComments, subComment => {\r\n        return (\r\n          <SubComment\r\n            key={\"sub_comment_\" + subComment.id}\r\n            item={subComment}\r\n            type={type}\r\n            currentUser={currentUser}\r\n            objId={objId}\r\n            onSaveCallback={comment => {\r\n              setSubCommentsCount(subCommentsCount + 1);\r\n              setSubComments([comment, ...subComments]);\r\n            }}\r\n            parentId={parentId}\r\n          />\r\n        );\r\n      })}\r\n      <CheckMoreButton\r\n        commentsCount={subCommentsCount}\r\n        onCheckMore={onCheckMore}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default LastSubComments;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport PaginationQueryList from \"../../PaginationQueryList\";\r\nimport { GET_COMMENTS } from \"../../queryGql\";\r\nimport _map from \"lodash/map\";\r\nimport SubComment from \"./SubComment\";\r\n\r\nconst Container = styled.div`\r\n  .paginationWrapper {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n  }\r\n`;\r\n\r\nconst CommentsBox = styled.div``;\r\n\r\nconst SubCommentList = ({ objId, type, currentUser, parentId }) => {\r\n  return (\r\n    <Container>\r\n      <PaginationQueryList\r\n        searchFields={{\r\n          objId,\r\n          parentId,\r\n          types: [type],\r\n          isUserQuery: true,\r\n          sort: \"dateCreated\",\r\n          order: \"asc\"\r\n        }}\r\n        hidePaginationInSinglePage={true}\r\n        gql={GET_COMMENTS}\r\n        paginationSecondary={true}\r\n        paginationSize={\"mini\"}\r\n        dataKey={\"comments\"}\r\n        limit={10}\r\n      >\r\n        {({ loading, count, items, refetch }) => {\r\n          return (\r\n            <CommentsBox>\r\n              {_map(items, item => {\r\n                return (\r\n                  <SubComment\r\n                    key={\"sub_comment_\" + item.id}\r\n                    refchComments={refetch}\r\n                    currentUser={currentUser}\r\n                    objId={objId}\r\n                    item={item}\r\n                    type={type}\r\n                    parentId={parentId}\r\n                  />\r\n                );\r\n              })}\r\n            </CommentsBox>\r\n          );\r\n        }}\r\n      </PaginationQueryList>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SubCommentList;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport _isEmpty from \"lodash/isEmpty\";\r\nimport LastSubComments from \"./LastSubComments\";\r\nimport SubCommentList from \"./SubCommentList\";\r\n\r\nconst Container = styled.div`\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst useSubComments = ({ item }) => {\r\n  const [checkMore, setCheckMore] = useState(false);\r\n  return { checkMore, setCheckMore };\r\n};\r\n\r\nconst SubComments = ({ item, currentUser, objId, type }) => {\r\n  const { checkMore, setCheckMore } = useSubComments({ item });\r\n  if (_isEmpty(item.last3Comments)) {\r\n    return null;\r\n  }\r\n  return (\r\n    <Container>\r\n      {checkMore ? (\r\n        <SubCommentList\r\n          objId={objId}\r\n          currentUser={currentUser}\r\n          type={type}\r\n          parentId={item.id}\r\n        />\r\n      ) : (\r\n        <LastSubComments\r\n          objId={objId}\r\n          type={type}\r\n          item={item}\r\n          parentId={item.id}\r\n          onCheckMore={() => setCheckMore(true)}\r\n          currentUser={currentUser}\r\n        />\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default SubComments;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Avatar from \"../../pages/transformable/common/Avatar\";\r\nimport _get from \"lodash/get\";\r\nimport { _getByRank } from \"../../utils/utils\";\r\nimport CommentActions from \"./segaments/CommentActions\";\r\nimport { useRefresh, useReplyForm } from \"../hooks\";\r\nimport ReplyForm from \"./segaments/ReplyForm\";\r\nimport SubComments from \"./segaments/SubComments\";\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  margin-bottom: 24px;\r\n  padding-bottom: 20px;\r\n  border-bottom: 1px solid\r\n    ${props => (props.isLastOne ? \"transparent\" : \"#e5e9ef\")};\r\n`;\r\n\r\nconst AvatarBox = styled.div`\r\n  width: 80px;\r\n`;\r\n\r\nconst ContentBox = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n`;\r\n\r\nconst UserInfoBox = styled.div`\r\n  margin-bottom: 10px;\r\n`;\r\n\r\nconst Name = styled.div`\r\n  color: #6d757a;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  text-align: left;\r\n`;\r\n\r\nconst UserInfo = ({ creator }) => {\r\n  return (\r\n    <UserInfoBox>\r\n      <Name>{_getByRank(creator, [\"nickname\", \"username\"])}</Name>\r\n    </UserInfoBox>\r\n  );\r\n};\r\n\r\nconst ContentInfo = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  margin-bottom: 20px;\r\n`;\r\n\r\nconst Content = styled.div`\r\n  text-align: left;\r\n`;\r\n\r\nconst CommentItem = ({\r\n  item,\r\n  currentUser,\r\n  objId,\r\n  type,\r\n  refetchComments,\r\n  isLastOne\r\n}) => {\r\n  const {\r\n    creator,\r\n    content,\r\n    dateCreated,\r\n    id,\r\n    currentUpped,\r\n    upCount,\r\n    currentReport\r\n  } = item;\r\n  const { showReplyForm, setShowReplyForm, replyPlaceholder } = useReplyForm({\r\n    repliedComment: item\r\n  });\r\n  const [refresh, onRefresh] = useRefresh();\r\n  return (\r\n    <Container key={refresh} isLastOne={isLastOne}>\r\n      <AvatarBox>\r\n        <Avatar\r\n          size={\"large\"}\r\n          width={50}\r\n          avatar={_get(creator, \"avatar.url\")}\r\n        />\r\n      </AvatarBox>\r\n      <ContentBox>\r\n        <ContentInfo>\r\n          <UserInfo creator={creator} />\r\n          <Content>{content}</Content>\r\n          <CommentActions\r\n            onReply={() => setShowReplyForm(!showReplyForm)}\r\n            dateCreated={dateCreated}\r\n            currentUpped={currentUpped}\r\n            upCount={upCount}\r\n            commentId={id}\r\n            currentReport={currentReport}\r\n          />\r\n        </ContentInfo>\r\n        <SubComments\r\n          type={type}\r\n          currentUser={currentUser}\r\n          objId={objId}\r\n          item={item}\r\n        />\r\n        {showReplyForm && (\r\n          <ReplyForm\r\n            refetchComments={() => {\r\n              refetchComments().then(res => {\r\n                onRefresh();\r\n              });\r\n            }}\r\n            replyPlaceholder={replyPlaceholder}\r\n            parentId={id}\r\n            currentUser={currentUser}\r\n            commentType={type}\r\n            objId={objId}\r\n          />\r\n        )}\r\n      </ContentBox>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default CommentItem;\r\n","import React, { useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport PaginationQueryList from \"../PaginationQueryList\";\r\nimport { GET_COMMENTS } from \"../queryGql\";\r\nimport CommentForm from \"./segaments/CommentForm\";\r\nimport _map from \"lodash/map\";\r\nimport CommentItem from \"./Comment\";\r\nimport { AppContext } from \"../../../App\";\r\n\r\nconst Container = styled.div`\r\n  .paginationWrapper {\r\n    display: flex;\r\n    justify-content: flex-start;\r\n  }\r\n`;\r\n\r\nconst CommentsBox = styled.div`\r\n  margin-bottom: 30px;\r\n`;\r\n\r\nconst Comments = ({ objId, type }) => {\r\n  return (\r\n    <AppContext.Consumer>\r\n      {props => {\r\n        const { currentUser } = props;\r\n        return (\r\n          <Container>\r\n            <PaginationQueryList\r\n              searchFields={{\r\n                objId,\r\n                types: [type],\r\n                isUserQuery: true,\r\n                searchParentComment: true\r\n              }}\r\n              hidePaginationInSinglePage={true}\r\n              gql={GET_COMMENTS}\r\n              paginationSize={\"mini\"}\r\n              paginationSecondary={true}\r\n              dataKey={\"comments\"}\r\n              limit={10}\r\n            >\r\n              {({ loading, count, items, refetch }) => {\r\n                return (\r\n                  <CommentsBox>\r\n                    <CommentForm\r\n                      objId={objId}\r\n                      commentType={type}\r\n                      currentUser={currentUser}\r\n                      refetchComments={refetch}\r\n                    />\r\n                    {_map(items, (item, index) => {\r\n                      return (\r\n                        <CommentItem\r\n                          key={\"comment_\" + item.id}\r\n                          item={item}\r\n                          isLastOne={index + 1 === items.length}\r\n                          objId={objId}\r\n                          type={type}\r\n                          refetchComments={refetch}\r\n                          currentUser={currentUser}\r\n                        />\r\n                      );\r\n                    })}\r\n                  </CommentsBox>\r\n                );\r\n              }}\r\n            </PaginationQueryList>\r\n          </Container>\r\n        );\r\n      }}\r\n    </AppContext.Consumer>\r\n  );\r\n};\r\n\r\nexport default Comments;\r\n","import React, { useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div``;\r\n\r\nconst RefetchHandle = ({ id, refetch, refetchOnce }) => {\r\n  useEffect(() => {\r\n    if (refetchOnce) {\r\n      refetch && refetch();\r\n    }\r\n  }, []);\r\n  return (\r\n    <Container\r\n      id={id}\r\n      onClick={() => {\r\n        refetch();\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default RefetchHandle;\r\n","import React, { useEffect } from \"react\";\r\nimport { AppContext } from \"../../App\";\r\n\r\nconst _CurrentObjLoader = ({ children, setOpenedObj, openedObj }) => {\r\n  useEffect(() => {\r\n    if (setOpenedObj) {\r\n      setOpenedObj(openedObj);\r\n    }\r\n    return () => setOpenedObj(null);\r\n  }, [openedObj]);\r\n  return <>{children}</>;\r\n};\r\n\r\nconst CurrentObjLoader = ({ openedObj, children }) => {\r\n  return (\r\n    <AppContext.Consumer>\r\n      {props => {\r\n        const { onGoTo, setOpenedObj } = props;\r\n        return (\r\n          <_CurrentObjLoader\r\n            setOpenedObj={setOpenedObj}\r\n            openedObj={openedObj}\r\n            children={children}\r\n          />\r\n        );\r\n      }}\r\n    </AppContext.Consumer>\r\n  );\r\n};\r\n\r\nexport default CurrentObjLoader;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { MAIN_RED } from \"../Styles\";\r\n\r\nconst Container = styled.div`\r\n  width: ${props => props.size * 150}px;\r\n  display: flex;\r\n  color: gray;\r\n  cursor: pointer;\r\n  &:hover {\r\n    color: ${MAIN_RED};\r\n    .cover {\r\n      box-shadow: 0 8px 20px #bbb;\r\n      -webkit-box-shadow: 0 8px 20px #bbb;\r\n    }\r\n  }\r\n  flex-direction: column;\r\n  align-items: center;\r\n\r\n  margin-left: 10px;\r\n  margin-right: 10px;\r\n`;\r\n\r\nconst Cover = styled.img`\r\n  width: ${props => props.size * 150}px;\r\n  height: ${props => props.size * 206}px;\r\n  border: 1px solid #cecece;\r\n`;\r\n\r\nconst BookName = styled.div`\r\n  margin-top: 4px;\r\n  margin-bottom: 6px;\r\n  width: 100px;\r\n`;\r\n\r\nconst BookItem = ({ book, size = 1, onToBook }) => {\r\n  const {\r\n    id,\r\n    name,\r\n    cover: { url: imageUrl },\r\n    creator: { id: creatorId, nickname }\r\n  } = book;\r\n  return (\r\n    <Container onClick={() => (onToBook ? onToBook(id) : null)} size={size}>\r\n      <Cover size={size} className={\"cover\"} src={imageUrl} />\r\n      <BookName size={size}>{name}</BookName>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BookItem;\r\n"],"sourceRoot":""}